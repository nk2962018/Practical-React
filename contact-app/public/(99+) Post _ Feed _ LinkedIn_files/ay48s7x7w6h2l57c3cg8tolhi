define.alias("@glimmer/component/-private/ember-component-manager","msg-overlay/component-managers/glimmer")
define("msg-overlay/components/-dynamic-element-alt",["exports","@glimmer/component"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class n extends t.default{}e.default=n}))
define("msg-overlay/components/-dynamic-element",["exports","@glimmer/component"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class n extends t.default{}e.default=n}))
define.alias("artdeco-button/components/artdeco-button","msg-overlay/components/artdeco-button")
define.alias("artdeco-datepicker/components/artdeco-calendar","msg-overlay/components/artdeco-calendar")
define.alias("artdeco-carousel/components/artdeco-carousel-item","msg-overlay/components/artdeco-carousel-item")
define.alias("artdeco-carousel/components/artdeco-carousel-slider","msg-overlay/components/artdeco-carousel-slider")
define.alias("artdeco-carousel/components/artdeco-carousel-title","msg-overlay/components/artdeco-carousel-title")
define.alias("artdeco-carousel/components/artdeco-carousel","msg-overlay/components/artdeco-carousel")
define.alias("artdeco-modal/components/artdeco-confirmation-dialog","msg-overlay/components/artdeco-confirmation-dialog")
define.alias("artdeco-datepicker/components/artdeco-datepicker-embedded-cal","msg-overlay/components/artdeco-datepicker-embedded-cal")
define.alias("artdeco-datepicker/components/artdeco-datepicker","msg-overlay/components/artdeco-datepicker")
define.alias("artdeco-datepicker/components/artdeco-daterange-embedded-cal","msg-overlay/components/artdeco-daterange-embedded-cal")
define.alias("artdeco-datepicker/components/artdeco-daterange","msg-overlay/components/artdeco-daterange")
define.alias("artdeco-dropdown/components/artdeco-dropdown-content","msg-overlay/components/artdeco-dropdown-content")
define.alias("artdeco-dropdown/components/artdeco-dropdown-header","msg-overlay/components/artdeco-dropdown-header")
define.alias("artdeco-dropdown/components/artdeco-dropdown-item","msg-overlay/components/artdeco-dropdown-item")
define.alias("artdeco-dropdown/components/artdeco-dropdown-trigger","msg-overlay/components/artdeco-dropdown-trigger")
define.alias("artdeco-dropdown/components/artdeco-dropdown","msg-overlay/components/artdeco-dropdown")
define.alias("artdeco-empty-state/components/artdeco-empty-state","msg-overlay/components/artdeco-empty-state")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-badge","msg-overlay/components/artdeco-entity-lockup-badge")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-caption","msg-overlay/components/artdeco-entity-lockup-caption")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-content","msg-overlay/components/artdeco-entity-lockup-content")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-image","msg-overlay/components/artdeco-entity-lockup-image")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-metadata","msg-overlay/components/artdeco-entity-lockup-metadata")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-subtitle","msg-overlay/components/artdeco-entity-lockup-subtitle")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-title","msg-overlay/components/artdeco-entity-lockup-title")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup","msg-overlay/components/artdeco-entity-lockup")
define.alias("artdeco-entity-pile/components/artdeco-entity-pile","msg-overlay/components/artdeco-entity-pile")
define.alias("artdeco-hoverables/components/artdeco-hoverable-content","msg-overlay/components/artdeco-hoverable-content")
define.alias("artdeco-hoverables/components/artdeco-hoverable-trigger","msg-overlay/components/artdeco-hoverable-trigger")
define.alias("artdeco-inline-feedback/components/artdeco-inline-feedback","msg-overlay/components/artdeco-inline-feedback")
define.alias("artdeco-loader/components/artdeco-loader","msg-overlay/components/artdeco-loader")
define.alias("artdeco-modal/components/container","msg-overlay/components/artdeco-modal-container")
define.alias("artdeco-modal/components/artdeco-modal-content","msg-overlay/components/artdeco-modal-content")
define.alias("artdeco-modal/components/artdeco-modal-footer","msg-overlay/components/artdeco-modal-footer")
define.alias("artdeco-modal/components/artdeco-modal-header","msg-overlay/components/artdeco-modal-header")
define.alias("artdeco-modal/components/artdeco-modal","msg-overlay/components/artdeco-modal")
define.alias("artdeco-notification-badge/components/artdeco-notification-badge","msg-overlay/components/artdeco-notification-badge")
define.alias("artdeco-pagination/components/artdeco-pagination-ellipsis","msg-overlay/components/artdeco-pagination-ellipsis")
define.alias("artdeco-pagination/components/artdeco-pagination-indicator","msg-overlay/components/artdeco-pagination-indicator")
define.alias("artdeco-pagination/components/artdeco-pagination","msg-overlay/components/artdeco-pagination")
define.alias("artdeco-pill/components/artdeco-pill-choice-group","msg-overlay/components/artdeco-pill-choice-group")
define.alias("artdeco-pill/components/artdeco-pill-choice","msg-overlay/components/artdeco-pill-choice")
define.alias("artdeco-pill/components/artdeco-pill-dismiss","msg-overlay/components/artdeco-pill-dismiss")
define.alias("artdeco-pill/components/artdeco-pill-input","msg-overlay/components/artdeco-pill-input")
define.alias("artdeco-pill/components/artdeco-pill-link","msg-overlay/components/artdeco-pill-link")
define.alias("artdeco-pill/components/artdeco-pill-toggle","msg-overlay/components/artdeco-pill-toggle")
define.alias("ember-cli-artdeco-tabs/components/artdeco-spotlight-tab","msg-overlay/components/artdeco-spotlight-tab")
define.alias("ember-cli-artdeco-tabs/components/artdeco-spotlight-tablist","msg-overlay/components/artdeco-spotlight-tablist")
define.alias("ember-cli-artdeco-tabs/components/artdeco-tab","msg-overlay/components/artdeco-tab")
define.alias("ember-cli-artdeco-tabs/components/artdeco-tablist","msg-overlay/components/artdeco-tablist")
define.alias("ember-cli-artdeco-tabs/components/artdeco-tabpanel","msg-overlay/components/artdeco-tabpanel")
define.alias("ember-cli-artdeco-tabs/components/artdeco-tabs","msg-overlay/components/artdeco-tabs")
define.alias("artdeco-text-input/components/artdeco-text-input-multi","msg-overlay/components/artdeco-text-input-multi")
define.alias("artdeco-text-input/components/artdeco-text-input-single","msg-overlay/components/artdeco-text-input-single")
define.alias("artdeco-text-input/components/artdeco-text-input","msg-overlay/components/artdeco-text-input")
define.alias("artdeco-toast/components/artdeco-toast-item","msg-overlay/components/artdeco-toast-item")
define.alias("artdeco-toast/components/artdeco-toasts","msg-overlay/components/artdeco-toasts")
define.alias("artdeco-toggle/components/artdeco-toggle","msg-overlay/components/artdeco-toggle")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead-input","msg-overlay/components/artdeco-typeahead-input")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead-result","msg-overlay/components/artdeco-typeahead-result")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead-results-list","msg-overlay/components/artdeco-typeahead-results-list")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead","msg-overlay/components/artdeco-typeahead")
define("msg-overlay/components/audio-bubble",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/service","@ember/object","@glimmer/component","@glimmer/tracking"],(function(e,t,n,i,o,a,r,s,l,c,u){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var d,m,p,g
const b=(0,r.createTemplateFactory)({id:"eqN100oj",block:'[[[11,0],[16,1,[29,[[30,1]]]],[24,"tabindex","-1"],[16,0,[29,["msg-overlay-bubble msg-overlay-audio-bubble\\n    ",[52,[30,2],"msg-overlay-audio-bubble--is-minimized"],"\\n    ",[52,[30,0,["isInMinimizeTransition"]],"msg-overlay-list-bubble--during-transition"],"\\n    ",[52,[30,3],"msg-overlay-audio-bubble--is-hidden-at-md"]]]],[4,[38,1],null,null],[4,[38,2],["transitioned",[28,[37,3],[[30,0],"isInMinimizeTransition",false],null]],null],[12],[1,"\\n  "],[8,[39,4],null,[["@bundle"],["rooms"]],[["default"],[[[[1,"\\n"],[41,[30,4,["state","fulfilled"]],[[[1,"      "],[8,[39,5],null,[["@room","@ugcPostUrn","@autoJoin","@onLeaveCall","@isMinimized","@toggleMinimize"],[[30,5,["room"]],[30,5,["ugcPostUrn"]],[30,5,["autoJoin"]],[30,0,["closeBubble"]],[30,2],[30,6]]],null],[1,"\\n"]],[]],[[[1,"      "],[10,0],[14,0,"msg-overlay-audio-bubble__loading-section"],[12],[1,"\\n        "],[8,[39,6],null,null,null],[1,"\\n      "],[13],[1,"\\n"]],[]]],[1,"  "]],[4]]]]],[1,"\\n"],[13]],["@bubbleId","@isMinimized","@hideAudioBubbleAtMdBreakPoint","assetLoader","@bubble","@toggleMinimize"],false,["if","msg-shared@block-scrolling","on","ember-set-helper@set","asset-loader@deferred-asset-loader","rooms@rooms-call-container","artdeco-loader@artdeco-loader"]]',moduleName:"msg-overlay/components/audio-bubble.hbs",isStrictMode:!1})
let h=(d=(0,s.inject)("msg-overlay-manager@msg-overlay-manager"),m=class extends c.default{constructor(){super(...arguments);(0,t.default)(this,"msgOverlayService",p,this);(0,t.default)(this,"isInMinimizeTransition",g,this)}closeBubble(){var e,t,n,i
null===(e=(t=this.args.bubble).onCloseBubble)||void 0===e||e.call(t)
null===(n=(i=this.args).closeBubble)||void 0===n||n.call(i)}},p=(0,i.default)(m.prototype,"msgOverlayService",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=(0,i.default)(m.prototype,"isInMinimizeTransition",[u.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(m.prototype,"closeBubble",[l.action],Object.getOwnPropertyDescriptor(m.prototype,"closeBubble"),m.prototype),m)
e.default=h;(0,a.setComponentTemplate)(b,h)}))
define.alias("ember-semaphore/components/block-profile","msg-overlay/components/block-profile")
define("msg-overlay/components/connection-search-result-item-presenter",["exports","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const o=(0,n.createTemplateFactory)({id:"Em83usiy",block:'[[[11,0],[24,0,"display-flex align-items-center"],[24,"tabindex","-1"],[17,1],[4,[38,0],["mousemove",[30,2]],null],[4,[38,0],["click",[30,3]],null],[12],[1,"\\n  "],[10,0],[14,0,"msg-overlay-search-result-picture circle display-flex flex-shrink-zero"],[12],[1,"\\n    "],[8,[39,1],null,[["@classNames","@image","@alt","@ghostType","@desiredWidth"],["msg-overlay-search-result-picture__background-img full-width full-height round",[30,4,["entityWithPresenceViewData","image"]],[30,4,["recipientName"]],"person",100]],null],[1,"\\n  "],[13],[1,"\\n\\n  "],[10,0],[14,0,"display-flex overflow-hidden pv1 pl2"],[12],[1,"\\n    "],[10,"h4"],[14,0,"msg-overlay-search-result-name t-12 t-black t-bold flex-shrink-zero truncate"],[12],[1,"\\n      "],[1,[30,4,["recipientName"]]],[1,"\\n    "],[13],[1,"\\n"],[41,[30,4,["subtext"]],[[[1,"      "],[10,1],[14,0,"t-12 t-black--light t-normal flex-shrink-zero ph1 truncate"],[12],[1,"\\n        "],[1,[28,[35,3],["dot","msg-overlay/components/connection-search-result-item-presenter"],null]],[1,"\\n      "],[13],[1,"\\n      "],[10,2],[14,0,"t-12 t-black--light t-normal truncate"],[12],[1,"\\n        "],[1,[30,4,["subtext"]]],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"  "],[13],[1,"\\n"],[13]],["&attrs","@onMouseMove","@onClick","@viewData"],false,["on","ember-vector-images@lazy-image","if","t"]]',moduleName:"msg-overlay/components/connection-search-result-item-presenter.hbs",isStrictMode:!1})
var a=(0,t.setComponentTemplate)(o,(0,i.default)())
e.default=a}))
define("msg-overlay/components/contextual-recommendation-list-presenter",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@glimmer/component","@ember/service","@ember/object","msg-shared/utils/constants","msg-overlay/utils/recommendation-helpers","@glimmer/tracking"],(function(e,t,n,i,o,a,r,s,l,c,u,d,m){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var p,g,b,h,v,y
const f=(0,r.createTemplateFactory)({id:"QIPfhn0j",block:'[[[10,0],[15,0,[29,["msg-overlay-list-bubble__contextual msg-overlay-list-bubble__contextual--redesigned mb2 mh2\\n    ",[52,[30,0,["isMinimized"]],"msg-overlay-list-bubble__contextual--minimized "],"\\n    ",[30,1]]]],[12],[1,"\\n"],[1,"  "],[11,0],[24,0,"msg-conversation-listitem__link display-flex msg-overlay-list-bubble__contextual--redesigned m1"],[4,[38,1],["click",[30,0,["toggleRemainingSuggestedRecipients"]]],null],[12],[1,"\\n    "],[10,0],[15,0,[29,["msg-overlay-list-bubble__contextual-preview-entity\\n        ",[52,[30,0,["showRemainingSuggestions"]],"msg-overlay-list-bubble__contextual--fade-out","msg-overlay-list-bubble__contextual-preview--fade-in"]]]],[12],[1,"\\n      "],[8,[39,2],null,[["@viewData","@entitySize","@iconSize"],[[30,2,["facepileViewData"]],0,"small"]],null],[1,"\\n    "],[13],[1,"\\n    "],[10,0],[14,0,"msg-overlay-list-bubble__contextual-header overflow-hidden"],[12],[1,"\\n      "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content-wrapper fl"],[12],[1,"\\n        "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n          "],[10,"h5"],[15,0,[29,["msg-overlay-list-bubble__contextual-header-title t-bold\\n              ",[52,[30,0,["showRemainingSuggestions"]],"pl1"]]]],[12],[1,"\\n"],[41,[30,0,["isFeedContext"]],[[[1,"              "],[1,[28,[35,3],[[52,[30,0,["showRemainingSuggestions"]],"i18n_connection_to_context_article_v2_expanded","i18n_connection_to_context_article_v2"],"msg-overlay/components/contextual-recommendation-list-presenter"],[["count"],[[30,2,["suggestedRecipientsLength"]]]]]],[1,"\\n"]],[]],[[[41,[30,0,["isProfileContext"]],[[[1,"              "],[1,[28,[35,3],[[52,[30,0,["showRemainingSuggestions"]],"i18n_connection_to_context_actor_member_v2_expanded","i18n_connection_to_context_actor_member_v2"],"msg-overlay/components/contextual-recommendation-list-presenter"],[["count","memberName"],[[30,2,["suggestedRecipientsLength"]],[28,[37,4],[[30,0,["msgOverlayService","contextActor"]]],null]]]]],[1,"\\n"]],[]],[[[1,"              "],[1,[28,[35,3],[[52,[30,0,["showRemainingSuggestions"]],"i18n_connection_to_context_actor_company_v2_expanded","i18n_connection_to_context_actor_company_v2"],"msg-overlay/components/contextual-recommendation-list-presenter"],[["count","companyName"],[[30,2,["suggestedRecipientsLength"]],[30,0,["msgOverlayService","contextActor"]]]]]],[1,"\\n            "]],[]]]],[]]],[1,"          "],[13],[1,"\\n          "],[10,0],[14,0,"t-12 t-black--light t-bold"],[12],[1,"\\n            "],[10,1],[14,0,"msg-overlay-list-bubble__view-more-suggestions display-flex justify-center full-width"],[12],[1,"\\n              "],[1,[28,[35,5],null,[["type","size","class"],[[52,[30,0,["showRemainingSuggestions"]],"chevron-up-icon","chevron-down"],"small","ml1"]]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n        "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n          "],[10,0],[15,0,[29,["msg-overlay-list-bubble__contextual-subheader\\n              ",[52,[30,0,["showRemainingSuggestions"]],"msg-overlay-list-bubble__contextual--fade-out","msg-overlay-list-bubble__contextual--fade-in"]]]],[12],[1,"\\n"],[41,[28,[37,6],[[30,2,["suggestedRecipientsLength"]],1],null],[[[1,"              "],[1,[28,[35,3],["i18n_mutual_connection_subtitle_single","msg-overlay/components/contextual-recommendation-list-presenter"],[["name"],[[30,2,["firstMutualConnectionName"]]]]]],[1,"\\n"]],[]],[[[41,[28,[37,6],[[30,2,["suggestedRecipientsLength"]],2],null],[[[1,"              "],[1,[28,[35,3],["i18n_mutual_connection_subtitle_double","msg-overlay/components/contextual-recommendation-list-presenter"],[["firstMember","secondMember"],[[30,2,["firstMutualConnectionName"]],[30,2,["secondMutualConnectionName"]]]]]],[1,"\\n"]],[]],[[[1,"              "],[1,[28,[35,3],["i18n_mutual_connection_subtitle_more","msg-overlay/components/contextual-recommendation-list-presenter"],[["firstMember","secondMember"],[[30,2,["firstMutualConnectionName"]],[30,2,["secondMutualConnectionName"]]]]]],[1,"\\n            "]],[]]]],[]]],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n  "],[10,1],[14,0,"visually-hidden"],[12],[1,"\\n    "],[1,[28,[35,3],["i18n_a11y_infinite_scroll","msg-overlay/components/contextual-recommendation-list-presenter"],null]],[1,"\\n  "],[13],[1,"\\n  "],[10,"ul"],[14,0,"msg-conversations-container__conversations-list msg-overlay-list-bubble__conversations-list msg-overlay-list-bubble__contextual-expended"],[12],[1,"\\n"],[42,[28,[37,8],[[28,[37,8],[[28,[37,9],[[30,2,["recommendationCardViewDataItems"]],0,[30,0,["suggestedRecipientsDisplayCount"]]],null]],null]],null],null,[[[1,"      "],[8,[39,10],null,[["@viewData","@actor","@impressionTrackingHandler","@interactionTrackingHandler","@messageRecommendation","@isFeedContext"],[[30,3],[30,0,["msgOverlayService","contextActor"]],[28,[37,11],[[30,0,["contextualRecommandationCardImpressionTracking"]],[30,3],[30,4]],null],[28,[37,11],[[30,0,["contextualRecommandationCardInteractionTracking"]],[30,3],"EXPAND"],null],[28,[37,11],[[30,0,["messageRecommendation"]],[30,3]],null],[30,0,["isFeedContext"]]]],null],[1,"\\n"]],[3,4]],null],[1,"  "],[13],[1,"\\n"],[13]],["@classNames","@viewData","recommendationsCardViewData","index"],false,["if","on","msg-facepile-grid@facepile-presenter","t","global-helpers@name","artdeco-icons-web@li-icon","global-helpers@eq","each","-track-array","global-helpers@slice","msg-overlay@recommendation-card-presenter","fn"]]',moduleName:"msg-overlay/components/contextual-recommendation-list-presenter.hbs",isStrictMode:!1}),{OVERLAY:{CONTEXT_TYPES:{FEED_CONTEXT:_,PROFILE_CONTEXT:w}}}=u.default
let C=(p=(0,l.inject)("tracking"),g=(0,l.inject)("msg-overlay-manager@msg-overlay-manager"),b=class extends s.default{constructor(){super(...arguments);(0,t.default)(this,"tracking",h,this);(0,t.default)(this,"msgOverlayService",v,this);(0,t.default)(this,"showRemainingSuggestions",y,this)}get isFeedContext(){return this.msgOverlayService.contextType===_}get isProfileContext(){return this.msgOverlayService.contextType===w}get suggestedRecipientsDisplayCount(){return this.showRemainingSuggestions?this.args.viewData.suggestedRecipientsLength:0}toggleRemainingSuggestedRecipients(){this.showRemainingSuggestions=!this.showRemainingSuggestions}messageRecommendation(e){this.args.openNewConversation({recipients:e.recipientProfile,messageActions:{afterSendTracking:()=>this.contextualRecommandationCardInteractionTracking(e,"MESSAGE",{controlUrn:this.tracking.generateControlUrn("overlay.message_recommendation")})}})}contextualRecommandationCardInteractionTracking(e,t,n){let{controlUrn:i}=n,o={}
this.isDestroyed||(o={name:"MessagingRecommendationActionEvent",body:{actionCategory:t,controlUrn:i,recommendationTrackingId:e.trackingId,usecase:(0,d.normalizeUsecase)(this.msgOverlayService.contextType,this.showRemainingSuggestions)}})
return o}contextualRecommandationCardImpressionTracking(e,t,n){let{duration:i,visibleTime:o}=n
return{name:"MessagingRecommendationImpressionEvent",body:{recommendedEntity:{recommendedEntityUrn:e.profileObjectUrn,recommendationTrackingId:e.trackingId,referenceEntityTrackingObject:{objectUrn:this.msgOverlayService.contextEntityUrn,trackingId:e.trackingId},listPosition:{index:t},usecase:(0,d.normalizeUsecase)(this.msgOverlayService.contextType,this.showRemainingSuggestions),visibleTime:o,duration:i}}}}},h=(0,i.default)(b.prototype,"tracking",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=(0,i.default)(b.prototype,"msgOverlayService",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,i.default)(b.prototype,"showRemainingSuggestions",[m.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(b.prototype,"toggleRemainingSuggestedRecipients",[c.action],Object.getOwnPropertyDescriptor(b.prototype,"toggleRemainingSuggestedRecipients"),b.prototype),(0,i.default)(b.prototype,"messageRecommendation",[c.action],Object.getOwnPropertyDescriptor(b.prototype,"messageRecommendation"),b.prototype),(0,i.default)(b.prototype,"contextualRecommandationCardInteractionTracking",[c.action],Object.getOwnPropertyDescriptor(b.prototype,"contextualRecommandationCardInteractionTracking"),b.prototype),(0,i.default)(b.prototype,"contextualRecommandationCardImpressionTracking",[c.action],Object.getOwnPropertyDescriptor(b.prototype,"contextualRecommandationCardImpressionTracking"),b.prototype),b)
e.default=C;(0,a.setComponentTemplate)(f,C)}))
define("msg-overlay/components/contextual-recommendation-list",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@glimmer/component","@ember/service","@ember/object","msg-shared/utils/constants","msg-overlay/utils/recommendation-helpers","@glimmer/tracking"],(function(e,t,n,i,o,a,r,s,l,c,u,d,m){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var p,g,b,h,v,y
const f=(0,r.createTemplateFactory)({id:"wCSaJu1l",block:'[[[10,0],[15,0,[29,["msg-overlay-list-bubble__contextual msg-overlay-list-bubble__contextual--redesigned mb2 mh2\\n    ",[52,[30,0,["isMinimized"]],"msg-overlay-list-bubble__contextual--minimized "],"\\n    ",[30,1]]]],[12],[1,"\\n"],[1,"  "],[11,0],[24,0,"msg-conversation-listitem__link display-flex msg-overlay-list-bubble__contextual--redesigned m1"],[4,[38,1],["click",[30,0,["toggleRemainingSuggestedRecipients"]]],null],[12],[1,"\\n    "],[10,0],[15,0,[29,["msg-overlay-list-bubble__contextual-preview-entity\\n        ",[52,[30,0,["showRemainingSuggestions"]],"msg-overlay-list-bubble__contextual--fade-out","msg-overlay-list-bubble__contextual-preview--fade-in"]]]],[12],[1,"\\n      "],[8,[39,2],null,[["@participants","@groupChat","@entitySize","@iconSize"],[[30,0,["previewMutualConnections"]],false,0,"small"]],null],[1,"\\n    "],[13],[1,"\\n    "],[10,0],[14,0,"msg-overlay-list-bubble__contextual-header overflow-hidden"],[12],[1,"\\n      "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content-wrapper fl"],[12],[1,"\\n        "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n          "],[10,"h5"],[15,0,[29,["msg-overlay-list-bubble__contextual-header-title t-bold\\n              ",[52,[30,0,["showRemainingSuggestions"]],"pl1"]]]],[12],[1,"\\n"],[41,[30,0,["isFeedContext"]],[[[1,"              "],[1,[28,[35,3],[[52,[30,0,["showRemainingSuggestions"]],"i18n_connection_to_context_article_v2_expanded","i18n_connection_to_context_article_v2"],"msg-overlay/components/contextual-recommendation-list"],[["count"],[[30,2,["length"]]]]]],[1,"\\n"]],[]],[[[41,[30,0,["isProfileContext"]],[[[1,"              "],[1,[28,[35,3],[[52,[30,0,["showRemainingSuggestions"]],"i18n_connection_to_context_actor_member_v2_expanded","i18n_connection_to_context_actor_member_v2"],"msg-overlay/components/contextual-recommendation-list"],[["count","memberName"],[[30,2,["length"]],[28,[37,4],[[30,0,["msgOverlayService","contextActor"]]],null]]]]],[1,"\\n"]],[]],[[[1,"              "],[1,[28,[35,3],[[52,[30,0,["showRemainingSuggestions"]],"i18n_connection_to_context_actor_company_v2_expanded","i18n_connection_to_context_actor_company_v2"],"msg-overlay/components/contextual-recommendation-list"],[["count","companyName"],[[30,2,["length"]],[30,0,["msgOverlayService","contextActor"]]]]]],[1,"\\n            "]],[]]]],[]]],[1,"          "],[13],[1,"\\n          "],[10,0],[14,0,"t-12 t-black--light t-bold"],[12],[1,"\\n            "],[10,1],[14,0,"msg-overlay-list-bubble__view-more-suggestions display-flex justify-center full-width"],[12],[1,"\\n              "],[1,[28,[35,5],null,[["type","size","class"],[[52,[30,0,["showRemainingSuggestions"]],"chevron-up-icon","chevron-down"],"small","ml1"]]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n        "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n          "],[10,0],[15,0,[29,["msg-overlay-list-bubble__contextual-subheader\\n              ",[52,[30,0,["showRemainingSuggestions"]],"msg-overlay-list-bubble__contextual--fade-out","msg-overlay-list-bubble__contextual--fade-in"]]]],[12],[1,"\\n"],[41,[28,[37,6],[[30,2,["length"]],1],null],[[[1,"              "],[1,[28,[35,3],["i18n_mutual_connection_subtitle_single","msg-overlay/components/contextual-recommendation-list"],[["name"],[[30,0,["firstMutualConnectionName"]]]]]],[1,"\\n"]],[]],[[[41,[28,[37,6],[[30,2,["length"]],2],null],[[[1,"              "],[1,[28,[35,3],["i18n_mutual_connection_subtitle_double","msg-overlay/components/contextual-recommendation-list"],[["firstMember","secondMember"],[[30,0,["firstMutualConnectionName"]],[30,0,["secondMutualConnectionName"]]]]]],[1,"\\n"]],[]],[[[1,"              "],[1,[28,[35,3],["i18n_mutual_connection_subtitle_more","msg-overlay/components/contextual-recommendation-list"],[["firstMember","secondMember"],[[30,0,["firstMutualConnectionName"]],[30,0,["secondMutualConnectionName"]]]]]],[1,"\\n            "]],[]]]],[]]],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n  "],[10,1],[14,0,"visually-hidden"],[12],[1,"\\n    "],[1,[28,[35,3],["i18n_a11y_infinite_scroll","msg-overlay/components/contextual-recommendation-list"],null]],[1,"\\n  "],[13],[1,"\\n  "],[10,"ul"],[14,0,"msg-conversations-container__conversations-list msg-overlay-list-bubble__conversations-list msg-overlay-list-bubble__contextual-expended"],[12],[1,"\\n"],[42,[28,[37,8],[[28,[37,8],[[28,[37,9],[[30,2],0,[30,0,["suggestedRecipientsDisplayCount"]]],null]],null]],null],null,[[[1,"      "],[8,[39,10],null,[["@suggestion","@actor","@messageRecommendation","@isFeedContext","@interactionTrackingHandler","@impressionTrackingHandler"],[[30,3],[30,0,["msgOverlayService","contextActor"]],[28,[37,11],[[30,0,["messageRecommendation"]],[30,3]],null],[30,0,["isFeedContext"]],[28,[37,11],[[30,0,["contextualRecommandationCardInteractionTracking"]],[30,3],"EXPAND"],null],[28,[37,11],[[30,0,["contextualRecommandationCardImpressionTracking"]],[30,3],[30,4]],null]]],null],[1,"\\n"]],[3,4]],null],[1,"  "],[13],[1,"\\n"],[13]],["@classNames","@suggestedRecipients","suggestion","index"],false,["if","on","msg-facepile-grid@facepile-grid","t","global-helpers@name","artdeco-icons-web@li-icon","global-helpers@eq","each","-track-array","global-helpers@slice","msg-overlay@recommendation-card","fn"]]',moduleName:"msg-overlay/components/contextual-recommendation-list.hbs",isStrictMode:!1}),{OVERLAY:{CONTEXT_TYPES:{FEED_CONTEXT:_,PROFILE_CONTEXT:w}}}=u.default
let C=(p=(0,l.inject)("tracking"),g=(0,l.inject)("msg-overlay-manager@msg-overlay-manager"),b=class extends s.default{constructor(){super(...arguments);(0,t.default)(this,"tracking",h,this);(0,t.default)(this,"msgOverlayService",v,this);(0,t.default)(this,"showRemainingSuggestions",y,this)}get isFeedContext(){return this.msgOverlayService.contextType===_}get isProfileContext(){return this.msgOverlayService.contextType===w}get suggestedRecipientsDisplayCount(){var e
return this.showRemainingSuggestions?null===(e=this.args.suggestedRecipients)||void 0===e?void 0:e.length:0}get hasMoreSuggestedRecipients(){return(0,c.get)(this,"args.suggestedRecipients.length")>2}get previewMutualConnections(){const e=[],{suggestedRecipients:t}=this.args
t.length&&e.push(t[0].content.get("suggestedRecipientProfile"))
t.length>1&&e.push(t[1].content.get("suggestedRecipientProfile"))
return e}get mutualConnectionNames(){return this.previewMutualConnections.map((e=>(0,c.getProperties)((0,c.get)(e,"miniProfile"),"firstName","lastName")))}get hasMultipleMutualConnection(){return this.args.suggestedRecipients.length>2}get firstMutualConnectionName(){return this.mutualConnectionNames[0]}get secondMutualConnectionName(){return this.mutualConnectionNames[1]}toggleRemainingSuggestedRecipients(){this.showRemainingSuggestions=!this.showRemainingSuggestions}messageRecommendation(e){this.args.openNewConversation({recipients:(0,c.get)(e,"recipientProfile"),messageActions:{afterSendTracking:()=>this.contextualRecommandationCardInteractionTracking(e,"MESSAGE",{controlUrn:this.tracking.generateControlUrn("overlay.message_recommendation")})}})}contextualRecommandationCardInteractionTracking(e,t,n){let{controlUrn:i}=n,o={}
this.isDestroyed||(o={name:"MessagingRecommendationActionEvent",body:{actionCategory:t,controlUrn:i,recommendationTrackingId:(0,c.get)(e,"trackingId"),usecase:(0,d.normalizeUsecase)(this.msgOverlayService.contextType,this.showRemainingSuggestions)}})
return o}contextualRecommandationCardImpressionTracking(e,t,n){let{duration:i,visibleTime:o}=n
return{name:"MessagingRecommendationImpressionEvent",body:{recommendedEntity:{recommendedEntityUrn:(0,c.get)(e,"miniProfile.objectUrn"),recommendationTrackingId:(0,c.get)(e,"trackingId"),referenceEntityTrackingObject:{objectUrn:this.msgOverlayService.contextEntityUrn,trackingId:(0,c.get)(e,"trackingId")},listPosition:{index:t},usecase:(0,d.normalizeUsecase)(this.msgOverlayService.contextType,this.showRemainingSuggestions),visibleTime:o,duration:i}}}}},h=(0,i.default)(b.prototype,"tracking",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=(0,i.default)(b.prototype,"msgOverlayService",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,i.default)(b.prototype,"showRemainingSuggestions",[m.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(b.prototype,"toggleRemainingSuggestedRecipients",[c.action],Object.getOwnPropertyDescriptor(b.prototype,"toggleRemainingSuggestedRecipients"),b.prototype),(0,i.default)(b.prototype,"messageRecommendation",[c.action],Object.getOwnPropertyDescriptor(b.prototype,"messageRecommendation"),b.prototype),(0,i.default)(b.prototype,"contextualRecommandationCardInteractionTracking",[c.action],Object.getOwnPropertyDescriptor(b.prototype,"contextualRecommandationCardInteractionTracking"),b.prototype),(0,i.default)(b.prototype,"contextualRecommandationCardImpressionTracking",[c.action],Object.getOwnPropertyDescriptor(b.prototype,"contextualRecommandationCardImpressionTracking"),b.prototype),b)
e.default=C;(0,a.setComponentTemplate)(f,C)}))
define("msg-overlay/components/conversation-bubble-header-controls-presenter",["exports","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const o=(0,n.createTemplateFactory)({id:"Yfpzy+eF",block:'[[[10,0],[14,0,"msg-overlay-bubble-header__controls display-flex align-items-center"],[12],[1,"\\n"],[41,[51,[30,1,["isMinimized"]]],[[[41,[30,1,["conversation"]],[[[1,"      "],[8,[39,2],null,[["@viewData","@handleSuccessfulDiscardRequest","@showRenameConversationForm","@externalComps","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@addParticipantsPageKey","@isOverlay","@inverse"],[[30,2,["conversationHeaderDropdownMenuViewData"]],[30,3],[28,[37,3],[[30,4],true],null],[28,[37,4],null,[["semaphoreComp"],[[50,"ember-semaphore@ember-semaphore",0,null,null]]]],[30,5],[30,6],[30,7],[30,8],"flagship3_messaging_overlay_participant_detail_screen_displayed",true,[30,9]]],null],[1,"\\n\\n"],[41,[30,10],[[[1,"        "],[8,[39,6],null,[["@bubbleId","@viewData","@ctaSize","@isOverlay","@updateTextarea","@parentRefocusElement","@invertColor"],[[30,1,["id"]],[30,2,["virtualMeetingCtaViewData"]],1,true,[30,11],[28,[37,7],["#",[30,1,["id"]]],null],[30,9]]],null],[1,"\\n"]],[]],null]],[]],null],[1,"    "],[8,[39,8],[[16,"data-control-name",[52,[30,1,["isJumbo"]],"overlay.shrink_conversation_window","overlay.expand_conversation_window"]],[16,"aria-expanded",[52,[30,1,["isJumbo"]],"true","false"]]],[["@type","@color","@circle","@size","@icon","@class","@click","@text"],[[52,[30,9],"primary","tertiary"],[52,[30,9],"default","muted"],true,1,[52,[30,1,["isJumbo"]],"minimize","maximize"],"msg-overlay-bubble-header__control msg-overlay-conversation-bubble__expand-btn",[30,12],[52,[30,1,["isJumbo"]],[28,[37,9],[[52,[30,1,["isNew"]],"i18n_minimize_bubble_new","i18n_minimize_bubble"],"msg-overlay/components/conversation-bubble-header-controls-presenter"],[["names"],[[30,2,["participantNames"]]]]],[28,[37,9],[[52,[30,1,["isNew"]],"i18n_maximize_bubble_new","i18n_maximize_bubble"],"msg-overlay/components/conversation-bubble-header-controls-presenter"],[["names"],[[30,2,["participantNames"]]]]]]]],null],[1,"\\n"]],[]],null],[1,"\\n"],[1,"  "],[8,[39,8],[[16,"data-control-name",[52,[30,1,["isConversationPreview"]],"overlay.ltj_preview_exit","overlay.close_conversation_window"]]],[["@type","@color","@class","@circle","@size","@icon","@click","@text"],[[52,[30,9],"primary","tertiary"],[52,[30,9],"default","muted"],"msg-overlay-bubble-header__control",true,1,"cancel-icon",[30,13],[28,[37,9],[[52,[30,1,["isNew"]],"a11y_close_convo_new","a11y_close_convo"],"msg-overlay/components/conversation-bubble-header-controls-presenter"],[["names"],[[52,[30,2,["conversationName"]],[30,2,["conversationName"]],[28,[37,9],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-controls-presenter"],[["names"],[[30,2,["participantNames"]]]]]]]]]]],null],[1,"\\n"],[13]],["@bubble","@viewData","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@hasBadge","@showVideoMeetingButtonInHeader","@updateMessageCompose","@toggleJumboSize","@handleCloseBubble"],false,["unless","if","msg-shared-modals@conversation-header-dropdown-menu-presenter","fn","hash","component","msg-ui@virtual-meeting-cta-presenter","concat","artdeco-button@artdeco-button","t"]]',moduleName:"msg-overlay/components/conversation-bubble-header-controls-presenter.hbs",isStrictMode:!1})
var a=(0,t.setComponentTemplate)(o,(0,i.default)())
e.default=a}))
define("msg-overlay/components/conversation-bubble-header-controls",["exports","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const o=(0,n.createTemplateFactory)({id:"9veI1tJe",block:'[[[10,0],[14,0,"msg-overlay-bubble-header__controls display-flex align-items-center"],[12],[1,"\\n"],[41,[51,[30,1,["isMinimized"]]],[[[41,[30,1,["conversation"]],[[[1,"      "],[8,[39,2],null,[["@conversation","@handleSuccessfulDiscardRequest","@showRenameConversationForm","@externalComps","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@addParticipantsPageKey","@isOverlay","@inverse"],[[30,1,["conversation"]],[30,2],[28,[37,3],[[30,3],true],null],[28,[37,4],null,[["semaphoreComp"],[[50,"ember-semaphore@ember-semaphore",0,null,null]]]],[30,4],[30,5],[30,6],[30,7],"flagship3_messaging_overlay_participant_detail_screen_displayed",true,[30,8]]],null],[1,"\\n\\n"],[41,[30,9],[[[1,"        "],[8,[39,6],null,[["@bubbleId","@conversation","@conversationUrn","@conversationFeatureTypes","@ctaSize","@isOverlay","@updateTextarea","@parentRefocusElement","@invertColor"],[[30,1,["id"]],[30,1,["conversation"]],[30,1,["conversation","entityUrn"]],[30,1,["conversation","featureTypes"]],1,true,[30,10],[28,[37,7],["#",[30,1,["id"]]],null],[30,8]]],null],[1,"\\n"]],[]],null]],[]],null],[1,"    "],[8,[39,8],[[16,"data-control-name",[52,[30,1,["isJumbo"]],"overlay.shrink_conversation_window","overlay.expand_conversation_window"]],[16,"aria-expanded",[52,[30,1,["isJumbo"]],"true","false"]]],[["@type","@color","@circle","@size","@icon","@class","@click","@text"],[[52,[30,8],"primary","tertiary"],[52,[30,8],"default","muted"],true,1,[52,[30,1,["isJumbo"]],"minimize","maximize"],"msg-overlay-bubble-header__control msg-overlay-conversation-bubble__expand-btn",[30,11],[52,[30,1,["isJumbo"]],[28,[37,9],[[52,[30,1,["isNew"]],"i18n_minimize_bubble_new","i18n_minimize_bubble"],"msg-overlay/components/conversation-bubble-header-controls"],[["names"],[[28,[37,10],[[30,1,["conversation"]]],null]]]],[28,[37,9],[[52,[30,1,["isNew"]],"i18n_maximize_bubble_new","i18n_maximize_bubble"],"msg-overlay/components/conversation-bubble-header-controls"],[["names"],[[28,[37,10],[[30,1,["conversation"]]],null]]]]]]],null],[1,"\\n"]],[]],null],[1,"\\n"],[1,"  "],[8,[39,8],[[16,"data-control-name",[52,[30,1,["isConversationPreview"]],"overlay.ltj_preview_exit","overlay.close_conversation_window"]]],[["@type","@color","@class","@circle","@size","@icon","@click","@text"],[[52,[30,8],"primary","tertiary"],[52,[30,8],"default","muted"],"msg-overlay-bubble-header__control",true,1,"cancel-icon",[30,12],[28,[37,9],[[52,[30,1,["isNew"]],"a11y_close_convo_new","a11y_close_convo"],"msg-overlay/components/conversation-bubble-header-controls"],[["names"],[[52,[30,1,["conversation","name"]],[30,1,["conversation","name"]],[28,[37,9],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-controls"],[["names"],[[28,[37,10],[[30,1,["conversation"]]],null]]]]]]]]]],null],[1,"\\n"],[13]],["@bubble","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@hasBadge","@showVideoMeetingButtonInHeader","@updateMessageCompose","@toggleJumboSize","@handleCloseBubble"],false,["unless","if","msg-shared-modals@thread-actions","fn","hash","component","msg-ui@virtual-meeting-cta","concat","artdeco-button@artdeco-button","t","msg-shared@get-participant-names"]]',moduleName:"msg-overlay/components/conversation-bubble-header-controls.hbs",isStrictMode:!1})
var a=(0,t.setComponentTemplate)(o,(0,i.default)())
e.default=a}))
define("msg-overlay/components/conversation-bubble-header-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@glimmer/component","msg-overlay/viewdata/conversation-bubble-header-viewdata","msg-overlay/viewdata/sdk-conversation-bubble-header-viewdata","@ember/object","@ember/service"],(function(e,t,n,i,o,a,r,s,l,c,u,d){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var m,p,g,b,h,v,y,f,_
const w=(0,r.createTemplateFactory)({id:"yGSh1jZt",block:'[[[11,"header"],[16,0,[29,["msg-overlay-bubble-header msg-overlay-conversation-bubble-header justify-space-between\\n    ",[52,[30,1,["isInMailCompose"]]," premium-accent-bar"]]]],[24,"tabindex","-1"],[4,[38,1],["click",[30,2]],null],[4,[38,2],[[52,[30,1,["isMinimized"]],"overlay.maximize_conversation_window_bar","overlay.minimize_conversation_window_bar"]],null],[12],[1,"\\n"],[1,"  "],[10,0],[15,0,[29,["msg-overlay-bubble-header__badge-container\\n      ",[52,[30,3],"msg-overlay-bubble-header--inverse msg-overlay-bubble-header--is-badged"]]]],[12],[13],[1,"\\n\\n"],[1,"  "],[8,[39,3],null,[["@containerClass","@renderIf","@delay","@hideClass"],["align-items-center display-flex",[30,1,["isNew"]],132,"msg-overlay-conversation-bubble-header--fade-out"]],[["default"],[[[[1,"\\n    "],[10,0],[14,0,"flex-grow-1"],[12],[1,"\\n      "],[10,"h2"],[15,0,[29,["msg-overlay-bubble-header__title truncate t-14 t-bold\\n          ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"],"\\n          pr1"]]],[14,"tabindex","-1"],[12],[1,"\\n"],[41,[30,1,["messageContext"]],[[[6,[39,4],["profile.common.profile",[30,0,["viewData","messageRecipientId"]]],[["bubbles"],[false]],[["default"],[[[[1,"            "],[10,1],[15,0,[29,["t-14 t-bold hoverable-link-text\\n                ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n              "],[1,[28,[35,5],null,[["firstName","lastName","type"],[[30,0,["viewData","messageRecipientFirstName"]],[30,0,["viewData","messageRecipientLastName"]],"full"]]]],[1,"\\n            "],[13],[1,"\\n"]],[]]]]]],[]],[[[1,"          "],[1,[30,0,["defaultTitle"]]],[1,"\\n"]],[]]],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n  "]],[]]]]],[1,"\\n\\n"],[41,[51,[30,1,["isNew"]]],[[[1,"    "],[10,0],[15,0,[29,[[52,[30,1,["isNew"]],"msg-overlay-conversation-bubble-header--hidden","msg-overlay-conversation-bubble-header--fade-in"],"\\n        display-flex align-items-center flex-grow-1 overflow-hidden"]]],[12],[1,"\\n      "],[8,[39,7],null,[["@classNames","@viewData","@entitySize","@iconSize","@hasParticipants"],["mr1",[30,0,["viewData","conversationEntityViewData"]],1,"small",[30,0,["viewData","hasParticipants"]]]],null],[1,"\\n\\n"],[1,"      "],[10,0],[14,0,"pl2 flex-grow-1 overflow-hidden"],[12],[1,"\\n        "],[10,"h2"],[15,0,[29,["pl1 msg-overlay-bubble-header__title truncate t-14 t-bold\\n            ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"],"\\n            pr1"]]],[14,"tabindex","-1"],[12],[1,"\\n"],[41,[30,0,["viewData","isCompanyRecipient"]],[[[41,[30,4],[[[1,"              "],[8,[39,4],null,[["@route","@model"],["companies.company",[30,0,["viewData","companyRecipientId"]]]],[["default"],[[[[1,"\\n                "],[10,1],[15,0,[29,["hoverable-link-text\\n                    ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                  "],[1,[28,[35,8],["i18n_participant_familiar","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n                "],[13],[1,"\\n              "]],[]]]]],[1,"\\n"]],[]],[[[1,"              "],[1,[28,[35,8],["i18n_participant_familiar","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n"]],[]]]],[]],[[[41,[30,0,["viewData","isGroupChat"]],[[[1,"            "],[1,[52,[30,0,["viewData","conversationName"]],[30,0,["viewData","conversationName"]],[28,[37,8],["i18n_participant_familiar","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNamesWithSelf"]]]]]]],[1,"\\n\\n"],[41,[51,[30,1,["isMinimized"]]],[[[1,"              "],[10,"h3"],[15,0,[29,["t-12 t-normal truncate js-msg-group-participants\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                "],[1,[30,0,["viewData","existingGroupParticipantsTitle"]]],[1,"\\n              "],[13],[1,"\\n"]],[]],null]],[]],[[[41,[30,1,["isMinimized"]],[[[1,"            "],[1,[28,[35,8],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n"]],[]],[[[41,[30,0,["shouldRenderStaticName"]],[[[1,"              "],[10,1],[15,0,[29,["t-14 t-bold\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                "],[1,[28,[35,8],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n              "],[13],[1,"\\n"]],[]],[[[41,[30,0,["viewData","recipientProfileId"]],[[[6,[39,4],["profile.common.profile",[30,0,["viewData","recipientProfileId"]]],[["bubbles"],[false]],[["default"],[[[[1,"                "],[10,1],[15,0,[29,["t-14 t-bold hoverable-link-text\\n                    ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                  "],[1,[28,[35,8],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n                "],[13],[1,"\\n"]],[]]]]],[1,"            "]],[]],null]],[]]],[1,"          "]],[]]]],[]]]],[]]],[1,"        "],[13],[1,"\\n\\n"],[41,[30,5],[[[1,"          "],[10,1],[15,0,[29,["pl1 msg-overlay-conversation-bubble__reaction-header-notification truncate t-12\\n              ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black--light"]]]],[12],[1,"\\n            "],[1,[28,[35,8],["i18n_reaction_notification","msg-overlay/components/conversation-bubble-header-feature"],[["reactorName","emoji"],[[28,[37,5],null,[["firstName","lastName","type"],[[30,0,["viewData","reactorFirstName"]],[30,0,["viewData","reactorLastName"]],"familiar"]]],[30,0,["viewData","reactorEmoji"]]]]]],[1,"\\n          "],[13],[1,"\\n"]],[]],[[[41,[30,0,["viewData","hasPresenceInformation"]],[[[41,[51,[30,1,["isMinimized"]]],[[[41,[30,6,["isOnline"]],[[[1,"              "],[10,0],[15,0,[29,["pl1 truncate t-12 t-normal\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                "],[1,[28,[35,8],["i18n_active_now","msg-overlay/components/conversation-bubble-header-feature"],null]],[1,"\\n              "],[13],[1,"\\n"]],[]],[[[41,[30,6,["isReachable"]],[[[1,"              "],[10,0],[15,0,[29,["pl1 truncate t-12 t-normal\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                "],[1,[52,[30,6,["lastActiveAt"]],[28,[37,8],["i18n_mobile","msg-overlay/components/conversation-bubble-header-feature"],[["date"],[[28,[37,9],[[30,6,["lastActiveAt"]],"short-ago"],null]]]],[28,[37,8],["i18n_available_on_mobile","msg-overlay/components/conversation-bubble-header-feature"],null]]],[1,"\\n              "],[13],[1,"\\n            "]],[]],null]],[]]]],[]],null],[1,"        "]],[]],null]],[]]],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[1,"  "],[8,[39,10],null,[["@bubble","@viewData","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@showVideoMeetingButtonInHeader","@updateMessageCompose","@hasBadge","@handleCloseBubble","@toggleJumboSize"],[[30,1],[30,0,["viewData","conversationBubbleHeaderControlsViewData"]],[30,7],[30,8],[30,9],[30,10],[30,11],[30,12],[30,13],[30,14],[30,3],[30,15],[30,16]]],null],[1,"\\n\\n"],[13]],["@bubble","@toggleMinimize","@hasBadge","@isCompanySender","@headerReactionNotification","@presenceStatus","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@showVideoMeetingButtonInHeader","@updateMessageCompose","@handleCloseBubble","@toggleJumboSize"],false,["if","on","ember-cli-pemberly-tracking@track-interaction","msg-ui@delay-remove-from-dom","ember-engines@link-to-external","ember-cli-pemberly-i18n@format-name","unless","msg-ui@conversation-entity-presenter","t","global-helpers@time-ago","msg-overlay@conversation-bubble-header-controls-presenter"]]',moduleName:"msg-overlay/components/conversation-bubble-header-feature.hbs",isStrictMode:!1})
let C=(m=(0,d.inject)("i18n"),p=(0,d.inject)("formatter"),g=(0,d.inject)("msg-data@data-manager"),b=(0,d.inject)("authentication@authenticated-user"),h=class extends s.default{constructor(){super(...arguments);(0,t.default)(this,"i18n",v,this);(0,t.default)(this,"formatter",y,this);(0,t.default)(this,"msgDataManager",f,this);(0,t.default)(this,"authenticatedUser",_,this)}get viewData(){const{conversation:e,messageRecipients:t}=this.args
return this.msgDataManager.msgSDKEnabled?new c.default({conversation:e,participantStateMap:this.msgDataManager.getMailboxState().participants,messageRecipients:t,headerReactionNotification:this.args.headerReactionNotification,authenticatedUserProfile:(0,u.get)(this.authenticatedUser,"miniProfile.content"),msgDataManager:this.msgDataManager,formatter:this.formatter,i18n:this.i18n}):new l.default({conversation:e&&(0,u.get)(e,"content"),messageRecipients:t,headerReactionNotification:this.args.headerReactionNotification,authenticatedUserProfile:(0,u.get)(this.authenticatedUser,"miniProfile.content"),msgDataManager:this.msgDataManager,formatter:this.formatter,i18n:this.i18n})}get shouldRenderStaticName(){const{messageRecipientProfileId:e}=this.viewData
return!!e&&"UNKNOWN"===e}get defaultTitle(){const{bubble:e}=this.args
let t="i18n_new_message";(0,u.get)(e,"isConversationLoadingState")||(0,u.get)(e,"isConversationErrorState")?t="":(0,u.get)(e,"isConversationPreview")?t="i18n_join_group_chat":(0,u.get)(e,"isForward")?t="i18n_forward_message":(0,u.get)(e,"showGroupEditScreen")&&(t="i18n_new_group_conversation")
return t?this.i18n.lookupTranslation("components/msg-overlay@conversation-bubble-header-feature",t)():""}},v=(0,i.default)(h.prototype,"i18n",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,i.default)(h.prototype,"formatter",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=(0,i.default)(h.prototype,"msgDataManager",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=(0,i.default)(h.prototype,"authenticatedUser",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h)
e.default=C;(0,a.setComponentTemplate)(w,C)}))
define("msg-overlay/components/conversation-bubble-header",["exports","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const o=(0,n.createTemplateFactory)({id:"XsT6FBNA",block:'[[[11,"header"],[16,0,[29,["msg-overlay-bubble-header msg-overlay-conversation-bubble-header justify-space-between\\n    ",[52,[30,1,["isInMailCompose"]]," premium-accent-bar"]]]],[24,"tabindex","-1"],[4,[38,1],["click",[30,2]],null],[4,[38,2],[[52,[30,1,["isMinimized"]],"overlay.maximize_conversation_window_bar","overlay.minimize_conversation_window_bar"]],null],[12],[1,"\\n"],[1,"  "],[10,0],[15,0,[29,["msg-overlay-bubble-header__badge-container\\n      ",[52,[30,3],"msg-overlay-bubble-header--inverse msg-overlay-bubble-header--is-badged"]]]],[12],[13],[1,"\\n\\n"],[1,"  "],[8,[39,3],null,[["@containerClass","@renderIf","@delay","@hideClass"],["align-items-center display-flex",[30,1,["isNew"]],132,"msg-overlay-conversation-bubble-header--fade-out"]],[["default"],[[[[1,"\\n    "],[10,0],[14,0,"flex-grow-1"],[12],[1,"\\n      "],[10,"h2"],[15,0,[29,["msg-overlay-bubble-header__title truncate t-14 t-bold\\n          ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"],"\\n          pr1"]]],[14,"tabindex","-1"],[12],[1,"\\n"],[41,[30,1,["messageContext"]],[[[6,[39,4],["profile.common.profile",[30,1,["messageRecipients","firstObject","publicIdentifier"]]],[["bubbles"],[false]],[["default"],[[[[1,"            "],[10,1],[15,0,[29,["t-14 t-bold hoverable-link-text\\n                ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n              "],[1,[28,[35,5],null,[["firstName","lastName","type"],[[30,1,["messageRecipients","firstObject","firstName"]],[30,1,["messageRecipients","firstObject","lastName"]],"full"]]]],[1,"\\n            "],[13],[1,"\\n"]],[]]]]]],[]],[[[41,[28,[37,6],[[30,1,["isConversationLoadingState"]],[30,1,["isConversationErrorState"]]],null],[[],[]],[[[41,[30,1,["isConversationPreview"]],[[[1,"            "],[1,[28,[35,7],["i18n_join_group_chat","msg-overlay/components/conversation-bubble-header"],null]],[1,"\\n"]],[]],[[[41,[30,1,["isForward"]],[[[1,"            "],[1,[28,[35,7],["i18n_forward_message","msg-overlay/components/conversation-bubble-header"],null]],[1,"\\n"]],[]],[[[1,"            "],[1,[28,[35,7],["i18n_new_message","msg-overlay/components/conversation-bubble-header"],null]],[1,"\\n          "]],[]]]],[]]]],[]]]],[]]],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n  "]],[]]]]],[1,"\\n\\n"],[41,[51,[30,1,["isNew"]]],[[[1,"    "],[10,0],[15,0,[29,[[52,[30,1,["isNew"]],"msg-overlay-conversation-bubble-header--hidden","msg-overlay-conversation-bubble-header--fade-in"],"\\n        display-flex align-items-center flex-grow-1 overflow-hidden"]]],[12],[1,"\\n"],[1,"      "],[10,0],[12],[1,"\\n"],[41,[28,[37,9],[[30,1,["conversation"]]],null],[[[1,"          "],[8,[39,10],null,[["@miniProfile","@miniProfileUrn","@size"],[[30,1,["conversation","participants","firstObject","miniProfile"]],[30,1,["conversation","participants","firstObject","miniProfile","entityUrn"]],1]],null],[1,"\\n"]],[]],[[[41,[30,1,["conversation","participants"]],[[[1,"          "],[8,[39,11],[[24,0,"mr1"]],[["@conversation","@entitySize","@iconSize"],[[30,1,["conversation"]],1,"small"]],null],[1,"\\n        "]],[]],null]],[]]],[1,"      "],[13],[1,"\\n\\n"],[1,"      "],[10,0],[14,0,"pl2 flex-grow-1 overflow-hidden"],[12],[1,"\\n        "],[10,"h2"],[15,0,[29,["pl1 pt1 msg-overlay-bubble-header__title truncate t-14 t-bold\\n            ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"],"\\n            pr1"]]],[14,"tabindex","-1"],[12],[1,"\\n"],[41,[28,[37,6],[[30,1,["conversation","participants","firstObject","miniCompany"]],[28,[37,12],[[30,1,["conversation"]]],null]],null],[[[41,[30,4],[[[1,"              "],[8,[39,4],null,[["@route","@model"],["companies.company",[28,[37,13],[[30,1,["conversation","participants","firstObject","miniCompany","entityUrn"]]],null]]],[["default"],[[[[1,"\\n                "],[10,1],[15,0,[29,["hoverable-link-text\\n                    ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                  "],[1,[28,[35,7],["i18n_participant_familiar","msg-overlay/components/conversation-bubble-header"],[["names"],[[28,[37,14],[[30,1,["conversation"]]],null]]]]],[1,"\\n                "],[13],[1,"\\n              "]],[]]]]],[1,"\\n"]],[]],[[[1,"              "],[1,[28,[35,7],["i18n_participant_familiar","msg-overlay/components/conversation-bubble-header"],[["names"],[[28,[37,14],[[30,1,["conversation"]]],null]]]]],[1,"\\n"]],[]]]],[]],[[[41,[30,1,["conversation","groupChat"]],[[[1,"            "],[1,[52,[30,1,["conversation","name"]],[30,1,["conversation","name"]],[28,[37,7],["i18n_participant_familiar","msg-overlay/components/conversation-bubble-header"],[["names"],[[28,[37,15],[[30,1,["conversation"]],true],null]]]]]],[1,"\\n\\n"],[41,[51,[30,1,["isMinimized"]]],[[[1,"              "],[10,"h3"],[15,0,[29,["t-12 t-normal truncate js-msg-group-participants\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n"],[41,[30,1,["conversation","name"]],[[[41,[28,[37,16],[[30,1,["conversation","participants","length"]],0],null],[[[1,"                    "],[1,[28,[35,7],["i18n_just_you","msg-overlay/components/conversation-bubble-header"],null]],[1,"\\n"]],[]],[[[1,"                    "],[1,[28,[35,7],["i18n_participant_familiar","msg-overlay/components/conversation-bubble-header"],[["names"],[[28,[37,15],[[30,1,["conversation"]],true],null]]]]],[1,"\\n"]],[]]]],[]],[[[1,"                  "],[1,[28,[35,7],["i18n_num_participants_in_group_conversation","msg-overlay/components/conversation-bubble-header"],[["count"],[[28,[37,17],[[30,1,["conversation"]]],null]]]]],[1,"\\n"]],[]]],[1,"              "],[13],[1,"\\n"]],[]],null]],[]],[[[41,[30,1,["isMinimized"]],[[[1,"            "],[1,[28,[35,7],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header"],[["names"],[[28,[37,14],[[30,1,["conversation"]]],null]]]]],[1,"\\n"]],[]],[[[41,[28,[37,16],[[30,1,["conversation","participants","firstObject","miniProfile","publicIdentifier"]],"UNKNOWN"],null],[[[1,"              "],[10,1],[15,0,[29,["t-14 t-bold\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                "],[1,[28,[35,7],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header"],[["names"],[[28,[37,14],[[30,1,["conversation"]]],null]]]]],[1,"\\n              "],[13],[1,"\\n"]],[]],[[[6,[39,4],["profile.common.profile",[28,[37,18],[[30,1,["conversation"]]],null]],[["bubbles"],[false]],[["default"],[[[[1,"                "],[10,1],[15,0,[29,["t-14 t-bold hoverable-link-text\\n                    ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                  "],[1,[28,[35,7],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header"],[["names"],[[28,[37,14],[[30,1,["conversation"]]],null]]]]],[1,"\\n                "],[13],[1,"\\n"]],[]]]]]],[]]],[1,"          "]],[]]]],[]]]],[]]],[1,"        "],[13],[1,"\\n\\n"],[41,[30,5],[[[1,"          "],[10,1],[15,0,[29,["pl1 msg-overlay-conversation-bubble__reaction-header-notification truncate t-12\\n              ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black--light"]]]],[12],[1,"\\n            "],[1,[28,[35,7],["i18n_reaction_notification","msg-overlay/components/conversation-bubble-header"],[["reactorName","emoji"],[[28,[37,5],null,[["firstName","lastName","type"],[[30,5,["reactor","firstName"]],[30,5,["reactor","lastName"]],"familiar"]]],[30,5,["emoji"]]]]]],[1,"\\n          "],[13],[1,"\\n"]],[]],[[[41,[28,[37,9],[[30,1,["conversation"]]],null],[[[41,[51,[30,1,["isMinimized"]]],[[[41,[30,6,["isOnline"]],[[[1,"              "],[10,0],[15,0,[29,["pl1 truncate t-12 t-normal\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                "],[1,[28,[35,7],["i18n_active_now","msg-overlay/components/conversation-bubble-header"],null]],[1,"\\n              "],[13],[1,"\\n"]],[]],[[[41,[30,6,["isReachable"]],[[[1,"              "],[10,0],[15,0,[29,["pl1 truncate t-12 t-normal\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                "],[1,[52,[30,6,["lastActiveAt"]],[28,[37,7],["i18n_mobile","msg-overlay/components/conversation-bubble-header"],[["date"],[[28,[37,19],[[30,6,["lastActiveAt"]],"short-ago"],null]]]],[28,[37,7],["i18n_available_on_mobile","msg-overlay/components/conversation-bubble-header"],null]]],[1,"\\n              "],[13],[1,"\\n            "]],[]],null]],[]]]],[]],null],[1,"        "]],[]],null]],[]]],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[1,"  "],[8,[39,20],null,[["@bubble","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@showVideoMeetingButtonInHeader","@updateMessageCompose","@hasBadge","@handleCloseBubble","@toggleJumboSize"],[[30,1],[30,7],[30,8],[30,9],[30,10],[30,11],[30,12],[30,13],[30,14],[30,3],[30,15],[30,16]]],null],[1,"\\n\\n"],[13]],["@bubble","@toggleMinimize","@hasBadge","@isCompanySender","@headerReactionNotification","@presenceStatus","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@showVideoMeetingButtonInHeader","@updateMessageCompose","@handleCloseBubble","@toggleJumboSize"],false,["if","on","ember-cli-pemberly-tracking@track-interaction","msg-ui@delay-remove-from-dom","ember-engines@link-to-external","ember-cli-pemberly-i18n@format-name","global-helpers@or","t","unless","msg-shared@has-presence","presence@entity-with-presence","msg-facepile-grid@conversation-facepile-grid","msg-shared@is-conversation-with-advertiser","global-helpers@urn-to-id","msg-shared@get-participant-names","msg-shared@participant-names-with-self","global-helpers@eq","msg-shared@get-total-participants-count","msg-shared@get-recipient-profile-id","global-helpers@time-ago","msg-overlay@conversation-bubble-header-controls"]]',moduleName:"msg-overlay/components/conversation-bubble-header.hbs",isStrictMode:!1})
var a=(0,t.setComponentTemplate)(o,(0,i.default)())
e.default=a}))
define("msg-overlay/components/conversation-bubble",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/classPrivateFieldSet","@babel/runtime/helpers/esm/classPrivateFieldGet","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/debug","ember","rsvp","@ember/runloop","@ember/service","ember-batcher","ember-lifeline","@ember/object","@glimmer/component","@glimmer/tracking","global-utils/utils/is-browser","msg-shared/utils/custom-tracking","ember-cli-pemberly-tracking/utils/tracking","msg-shared/utils/constants","urn-utils","msg-spinmail-data/utils/sponsored-conversation-properties","msg-data/utils/msg-reactions-helper","msg-shared/utils/document-is-hidden","msg-shared/helpers/is-sponsored-conversation","msg-shared/helpers/is-company-profile","msg-shared/helpers/is-conversation-with-advertiser","msg-shared/helpers/is-inmail-conversation","msg-ui/utils/conversation-properties","global-utils/utils/keyboard-utils","global-utils/utils/a11y-focus-element","msg-shared/utils/get-participant-presence-statuses"],(function(e,t,n,i,o,a,r,s,l,c,u,d,m,p,g,b,h,v,y,f,_,w,C,S,M,k,R,O,I,D,E,x,P,T,N){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var A,B,L,z,F,j,U,V,q,H,K,Y,G,W,J,X,Q,$,Z,ee,te,ne,ie,oe,ae,re,se,le,ce,ue,de,me,pe,ge,be
const he=(0,l.createTemplateFactory)({id:"tCpU1bva",block:'[[[11,0],[16,1,[29,[[30,1,["id"]]]]],[24,"tabindex","-1"],[16,0,[29,["msg-convo-wrapper msg-overlay-conversation-bubble msg-overlay-conversation-bubble--default-inactive ml4\\n    ",[52,[30,1,["isNew"]],"msg-overlay-conversation-bubble--is-compose"],"\\n    ",[52,[30,1,["isActive"]],"msg-overlay-conversation-bubble--is-active"],"\\n    ",[52,[30,1,["isMinimized"]],"msg-overlay-conversation-bubble--is-minimized"],"\\n    ",[52,[30,1,["isJumbo"]],"msg-overlay-conversation-bubble--jumbo","msg-overlay-conversation-bubble--petite"]]]],[24,"role","dialog"],[16,"aria-label",[28,[37,1],["a11y_message_dialog","msg-overlay/components/conversation-bubble"],null]],[4,[38,2],["keyup",[30,0,["handlekeyUp"]]],null],[4,[38,2],["keydown",[30,0,["handlekeyDown"]]],null],[4,[38,3],[[30,0,["handleDidInsert"]]],null],[4,[38,4],[[30,0,["impressionEventPayload"]]],[["routeName","currentRoute"],[[28,[37,5],[[53,"outletState"],"render.name"],null],[28,[37,5],[[53,"outletState"],"render"],null]]]],[4,[38,7],null,null],[12],[1,"\\n  "],[8,[39,8],null,[["@controlUrn","@referringModuleKey","@recipientUrns","@messageComposeFlowTrackingId","@sourceType"],[[30,1,["entryPointData","controlUrn"]],[30,1,["entryPointData","referringModuleKey"]],[30,1,["entryPointData","recipientUrns"]],[30,1,["entryPointData","messageComposeFlowTrackingId"]],"OVERLAY"]],null],[1,"\\n"],[1,"\\n"],[41,[30,0,["enableConversationBubbleHeaderPreWork"]],[[[1,"    "],[8,[39,9],null,[["@hasBadge","@toggleMinimize","@bubble","@conversation","@messageRecipients","@isCompanySender","@presenceStatus","@headerReactionNotification","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@showVideoMeetingButtonInHeader","@updateMessageCompose","@toggleJumboSize","@handleCloseBubble"],[[30,0,["hasBadge"]],[30,0,["toggleMinimize"]],[30,1],[30,1,["conversation"]],[30,1,["messageRecipients"]],[30,0,["isCompanySender"]],[30,0,["presenceStatus"]],[30,0,["headerReactionNotification"]],[30,0,["handleSuccessfulDiscardRequest"]],[30,0,["toggleShowRenameConversation"]],[30,0,["enableReportingSponsoredConversation"]],[30,0,["toggleConversationMute"]],[30,0,["trackingModuleName"]],[30,0,["actionTrackingPrefix"]],[30,0,["showVideoMeetingButtonInHeader"]],[30,0,["updateMessageCompose"]],[30,0,["toggleJumboSize"]],[30,0,["handleCloseBubble"]]]],null],[1,"\\n"]],[]],[[[1,"    "],[8,[39,10],null,[["@hasBadge","@toggleMinimize","@bubble","@isCompanySender","@presenceStatus","@headerReactionNotification","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@showVideoMeetingButtonInHeader","@updateMessageCompose","@toggleJumboSize","@handleCloseBubble"],[[30,0,["hasBadge"]],[30,0,["toggleMinimize"]],[30,1],[30,0,["isCompanySender"]],[30,0,["presenceStatus"]],[30,0,["headerReactionNotification"]],[30,0,["handleSuccessfulDiscardRequest"]],[30,0,["toggleShowRenameConversation"]],[30,0,["enableReportingSponsoredConversation"]],[30,0,["toggleConversationMute"]],[30,0,["trackingModuleName"]],[30,0,["actionTrackingPrefix"]],[30,0,["showVideoMeetingButtonInHeader"]],[30,0,["updateMessageCompose"]],[30,0,["toggleJumboSize"]],[30,0,["handleCloseBubble"]]]],null],[1,"\\n"]],[]]],[1,"\\n"],[1,"  "],[11,0],[16,0,[29,["msg-overlay-conversation-bubble__content-wrapper relative display-flex flex-column\\n      ",[52,[30,0,["showRenameConversationForm"]]," msg-overlay-conversation-bubble__content-wrapper--disabled"]]]],[4,[38,2],["mouseup",[30,0,["onActive"]]],null],[4,[38,2],["focusin",[30,0,["onActive"]]],null],[12],[1,"\\n"],[41,[30,1,["isConversationPreview"]],[[[1,"      "],[8,[39,11],null,[["@bubble"],[[30,1]]],null],[1,"\\n"]],[]],[[[41,[30,1,["isConversationLoadingState"]],[[[1,"      "],[8,[39,12],null,[["@bubble"],[[30,1]]],null],[1,"\\n"]],[]],[[[41,[30,1,["isConversationErrorState"]],[[[1,"      "],[8,[39,13],null,[["@bubble"],[[30,1]]],null],[1,"\\n"]],[]],[[[41,[28,[37,14],[[30,1,["conversation"]]],null],[[[1,"        "],[8,[39,15],null,[["@bundle"],["msg-spinmail"]],[["default"],[[[[1,"\\n"],[41,[30,2,["state","fulfilled"]],[[[1,"            "],[8,[39,16],null,[["@conversation","@isCompanySender"],[[30,1,["conversation"]],[30,0,["isCompanySender"]]]],null],[1,"\\n"]],[]],null],[1,"        "]],[2]]]]],[1,"\\n"]],[]],[[[41,[28,[37,17],[[30,1,["conversation","latestEvent","subtype"]],"SPONSORED_INMAIL"],null],[[[1,"        "],[8,[39,15],null,[["@bundle"],["msg-spinmail"]],[["default"],[[[[1,"\\n"],[41,[30,3,["state","fulfilled"]],[[[1,"            "],[8,[39,18],null,[["@conversation","@actionTrackingPrefix","@isCompanySender"],[[30,1,["conversation"]],[30,0,["actionTrackingPrefix"]],[30,0,["isCompanySender"]]]],null],[1,"\\n"]],[]],null],[1,"        "]],[3]]]]],[1,"\\n"]],[]],[[[41,[30,0,["enableThreadAndCompose"]],[[[1,"          "],[8,[39,19],null,[["@actionTrackingPrefix","@addParticipantsPageKey","@bubbleId","@composeModuleKey","@composeToNonConnection","@composeViewContext","@conversation","@conversationDetailModuleKey","@customTrackingObject","@customPlaceholderText","@didSubmitMessage","@dragAndDropTrackingKeys","@fileUploadControlName","@forwardedEvent","@handleSuccessfulDiscardRequest","@hasDraft","@setHasDraft","@hasPrefilledConversationName","@imagePasteControlName","@imageUploadControlName","@invitationUrn","@isInMailCompose","@isNew","@isOpenedFromMsgButton","@isOriginalSize","@isOverlay","@messageContext","@messageActions","@messageRecipients","@msgAdapterOptions","@entryPointData","@muteConversationControlName","@mutePageKey","@openConversation","@prefilledAttachments","@prefilledMessage","@quickRepliesUseCase","@renamePageKey","@sendMessageControlName","@showRenameConversationForm","@subject","@targetUrl","@toggleShowRenameConversation","@update","@smpContent","@is1on1Compose","@recipientSuggestionEnabled","@setFocusToRenameConversationForm","@showPremiumUpsell","@isJumboBubble","@shouldShowExpandedTypeahead","@contextWidth","@onConversationFetched","@recipientsChanged","@contextByRecipients","@conversationName","@inmailReplyDeepLink"],[[30,0,["CONTROL_NAMES","OVERLAY_PREFIX"]],"flagship3_messaging_overlay_participant_detail_screen_displayed",[30,1,["id"]],[30,0,["MODULE_KEYS","OVERLAY_COMPOSE"]],[30,0,["composeToNonConnection"]],[30,0,["composeViewContext"]],[30,1,["conversation"]],[30,0,["MODULE_KEYS","OVERLAY_CONVERSATION_DETAIL"]],[30,1,["trackingObject"]],[30,1,["placeholderText"]],[30,0,["didSubmitMessage"]],[30,0,["dragAndDropTrackingKeys"]],[30,0,["CONTROL_NAMES","OVERLAY","FILE_UPLOAD"]],[30,1,["forwardedEvent"]],[30,4],[30,1,["hasDraft"]],[30,0,["setHasDraft"]],[30,1,["groupConversationName"]],[30,0,["CONTROL_NAMES","OVERLAY","IMAGE_PASTE"]],[30,0,["CONTROL_NAMES","OVERLAY","IMAGE_UPLOAD"]],[30,1,["invitationUrn"]],[30,1,["isInMailCompose"]],[30,1,["isNew"]],[30,1,["isOpenedFromMsgButton"]],[28,[37,20],[[30,1,["isJumbo"]]],null],true,[30,1,["messageContext"]],[30,1,["messageActions"]],[30,1,["messageRecipients"]],[30,1,["msgAdapterOptions"]],[30,1,["entryPointData"]],[30,0,["CONTROL_NAMES","OVERLAY","MUTE"]],"flagship3_messaging_overlay_conversation_window_muted.page",[30,0,["openConversation"]],[30,1,["attachments"]],[30,1,["message"]],"QUICK_REPLY_OVERLAY","flagship3_messaging_overlay_conversation_window_rename.page",[30,0,["CONTROL_NAMES","OVERLAY","SEND"]],[30,0,["showRenameConversationForm"]],[30,1,["subject"]],[30,1,["targetUrl"]],[30,0,["toggleShowRenameConversation"]],[30,1,["update"]],[30,1,["smpContent"]],[30,1,["is1on1Compose"]],true,[30,0,["setFocusToRenameConversationForm"]],[30,1,["showPremiumUpsell"]],[30,1,["isJumbo"]],[30,0,["shouldShowExpandedTypeahead"]],[30,0,["width"]],[30,0,["onConversationFetched"]],[30,0,["recipientsChanged"]],[30,0,["contextByRecipients"]],[30,1,["groupConversationName"]],[30,1,["inmailReplyDeepLink"]]]],null],[1,"\\n"]],[]],[[[1,"          "],[8,[39,21],null,[["@actionTrackingPrefix","@addParticipantsPageKey","@bubbleId","@composeModuleKey","@composeToNonConnection","@composeViewContext","@conversation","@conversationDetailModuleKey","@customTrackingObject","@customPlaceholderText","@didSubmitMessage","@dragAndDropTrackingKeys","@fileUploadControlName","@forwardedEvent","@handleSuccessfulDiscardRequest","@hasDraft","@setHasDraft","@hasPrefilledConversationName","@imagePasteControlName","@imageUploadControlName","@invitationUrn","@isInMailCompose","@isNew","@isOpenedFromMsgButton","@isOriginalSize","@isOverlay","@messageContext","@messageActions","@messageRecipients","@msgAdapterOptions","@entryPointData","@muteConversationControlName","@mutePageKey","@openConversation","@prefilledAttachments","@prefilledMessage","@quickRepliesUseCase","@renamePageKey","@sendMessageControlName","@showRenameConversationForm","@subject","@targetUrl","@toggleShowRenameConversation","@update","@smpContent","@is1on1Compose","@recipientSuggestionEnabled","@setFocusToRenameConversationForm","@showPremiumUpsell","@isJumboBubble","@shouldShowExpandedTypeahead","@contextWidth","@onConversationFetched","@recipientsChanged","@contextByRecipients","@conversationName","@inmailReplyDeepLink"],[[30,0,["CONTROL_NAMES","OVERLAY_PREFIX"]],"flagship3_messaging_overlay_participant_detail_screen_displayed",[30,1,["id"]],[30,0,["MODULE_KEYS","OVERLAY_COMPOSE"]],[30,0,["composeToNonConnection"]],[30,0,["composeViewContext"]],[30,1,["conversation"]],[30,0,["MODULE_KEYS","OVERLAY_CONVERSATION_DETAIL"]],[30,1,["trackingObject"]],[30,1,["placeholderText"]],[30,0,["didSubmitMessage"]],[30,0,["dragAndDropTrackingKeys"]],[30,0,["CONTROL_NAMES","OVERLAY","FILE_UPLOAD"]],[30,1,["forwardedEvent"]],[30,4],[30,1,["hasDraft"]],[30,0,["setHasDraft"]],[30,1,["groupConversationName"]],[30,0,["CONTROL_NAMES","OVERLAY","IMAGE_PASTE"]],[30,0,["CONTROL_NAMES","OVERLAY","IMAGE_UPLOAD"]],[30,1,["invitationUrn"]],[30,1,["isInMailCompose"]],[30,1,["isNew"]],[30,1,["isOpenedFromMsgButton"]],[28,[37,20],[[30,1,["isJumbo"]]],null],true,[30,1,["messageContext"]],[30,1,["messageActions"]],[30,1,["messageRecipients"]],[30,1,["msgAdapterOptions"]],[30,1,["entryPointData"]],[30,0,["CONTROL_NAMES","OVERLAY","MUTE"]],"flagship3_messaging_overlay_conversation_window_muted.page",[30,0,["openConversation"]],[30,1,["attachments"]],[30,1,["message"]],"QUICK_REPLY_OVERLAY","flagship3_messaging_overlay_conversation_window_rename.page",[30,0,["CONTROL_NAMES","OVERLAY","SEND"]],[30,0,["showRenameConversationForm"]],[30,1,["subject"]],[30,1,["targetUrl"]],[30,0,["toggleShowRenameConversation"]],[30,1,["update"]],[30,1,["smpContent"]],[30,1,["is1on1Compose"]],true,[30,0,["setFocusToRenameConversationForm"]],[30,1,["showPremiumUpsell"]],[30,1,["isJumbo"]],[30,0,["shouldShowExpandedTypeahead"]],[30,0,["width"]],[30,0,["onConversationFetched"]],[30,0,["recipientsChanged"]],[30,0,["contextByRecipients"]],[30,1,["groupConversationName"]],[30,1,["inmailReplyDeepLink"]]]],null],[1,"\\n"]],[]]],[1,"      "]],[]]]],[]]],[1,"    "]],[]]]],[]]]],[]]],[1,"  "],[13],[1,"\\n\\n  "],[8,[39,22],null,[["@isOpen","@title","@content","@primaryActionText","@secondaryActionText","@onPrimary","@onSecondary","@onEscape"],[[30,0,["showMessageDiscardModal"]],[28,[37,1],["i18n_discard_message","msg-overlay/components/conversation-bubble"],null],[28,[37,1],["i18n_discard_body","msg-overlay/components/conversation-bubble"],null],[28,[37,1],["i18n_discard","msg-overlay/components/conversation-bubble"],null],[28,[37,1],["i18n_cancel","msg-overlay/components/conversation-bubble"],null],[30,5],[28,[37,23],[[30,0],"showMessageDiscardModal",false],null],[28,[37,23],[[30,0],"showMessageDiscardModal",false],null]]],null],[1,"\\n"],[13]],["@bubble","assetLoader","assetLoader","@handleSuccessfulDiscardRequest","@closeBubble"],false,["if","t","on","did-insert","ember-cli-pemberly-tracking@track-impression","get","-get-dynamic-var","msg-shared@block-scrolling","message-button@mcie-tracking-beacon","msg-overlay@conversation-bubble-header-feature","msg-overlay@conversation-bubble-header","msg-ui@conversation-preview","msg-ui@conversation-loading-state-presenter","msg-ui@conversation-error-state-presenter","msg-shared@is-sponsored-conversation","asset-loader@deferred-asset-loader","msg-spinmail@sponsored-conversation-bubble","global-helpers@eq","msg-spinmail@spinmail-thread","msg-ui@compose-feature","global-helpers@not","msg-ui@compose","artdeco-modal@artdeco-confirmation-dialog","ember-set-helper@set"]]',moduleName:"msg-overlay/components/conversation-bubble.hbs",isStrictMode:!1}),{ACTION_TYPES:ve,CONTROL_NAMES:ye,IMPRESSION_KEYS:{CONVERSATION_DETAIL_IMPRESSION:fe,DISPLAY_ITEM_TYPE:_e},KEYCODES:{ESC:we},MESSAGE_TYPE:Ce,MODULE_KEYS:Se,OVERLAY:{BUBBLE_ACTIONS:{TOGGLE_JUMBO:Me,TOGGLE_MINIMIZED:ke}},PAGEVIEW_KEYS:Re,ATTACHMENT_DRAG_AND_DROP_TRACKING_KEYS:Oe}=C.default,Ie=".msg-form__contenteditable"
let De=(A=(0,p.inject)("i18n"),B=(0,p.inject)("lix"),L=(0,p.inject)("profile-services@identity-store"),z=(0,p.inject)("msg-data@data-manager"),F=(0,p.inject)("msg-overlay-manager@msg-overlay-manager"),j=(0,p.inject)("rum"),U=(0,p.inject)("jet"),V=(0,p.inject)("tracking"),q=(0,p.inject)("persistent-toast-manager@persistent-toast-manager"),H=(0,p.inject)("authentication@authenticated-user"),K=(0,p.inject)("presence@presence-api"),Y=(0,p.inject)("msg-ui@update-message-compose"),G=(be=new WeakMap,class extends v.default{get hasBadge(){const{conversation:e}=this.args.bubble
if(u.default.testing){console.log("[MSG-56726] logging for unstable badging test: ")
console.log("hasUnseenMessages: ",(0,h.get)(this.args.bubble,"hasUnseenMessages"),"conversation.read: ",e&&(0,h.get)(e,"read"),"forcedMinimizedAtRoute",this.msgOverlay.forcedMinimizedAtRoute)}return(0,h.get)(this.args.bubble,"hasUnseenMessages")&&!this.msgOverlay.forcedMinimizedAtRoute&&e&&!(0,h.get)(e,"read")}get isCompanySender(){const{conversation:e}=this.args.bubble
return e&&(0,I.isCompanyProfile)((0,h.get)(e,"participants.firstObject"))&&!(0,h.get)(this.args.bubble,"isMinimized")}get headerReactionNotification(){const{reactionNotification:e}=this.msgDataManager.messageReactionsHelper,{conversation:t}=this.args.bubble
if(e&&t&&(0,k.shouldDisplayReactionNotificationInHeader)(e.messageEvent,(0,h.get)(t,"id"),(0,o.default)(this,be),this.authenticatedUser))return e}get presenceStatus(){const{conversation:e}=this.args.bubble
return this.msgDataManager.msgSDKEnabled?this.presenceAPI.getPresenceStatus(e.participants[0]):this.presenceAPI.getPresenceStatus((0,h.get)(e,"participants.firstObject.miniProfile.entityUrn"))}get enableConversationBubbleHeaderPreWork(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-sdk-pre-work-conversation-bubble-header")}get showVideoMeetingButtonInHeader(){return!(0,h.get)(this,"args.bubble.isMinimized")&&(0,h.get)(this,"args.bubble.conversation")&&(0,x.enableUserReplies)(this.args.bubble.conversation)&&"PENDING"!==(0,h.get)(this.args.bubble,"conversation.messageRequestState")&&"DECLINED"!==(0,h.get)(this.args.bubble,"conversation.messageRequestState")&&!(0,E.isInmailConversation)(this.args.bubble.conversation)&&!(0,O.isSponsoredConversation)(this.args.bubble.conversation)&&"SPONSORED_INMAIL"!==(0,h.get)(this.args.bubble,"conversation.latestEvent.subtype")}get enableThreadAndCompose(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-sdk-pre-work-thread-and-compose")}_fetchAndSetComposeContext(e,t,n){var i
if(null!==(i=this.args.overlayLixes)&&void 0!==i&&i.setComposeContextImprovementsEnabled){const i="MESSAGE_REQUEST"===t||"HIGH_INTENT"
n&&i&&(0,h.set)(this.args.bubble,"messageContext",{contextEntityUrn:n,composeOptionType:t})
if(null==e||!e.length||!n){const i="[MSG] params to conversation-bubble._fetchAndSetComposeContext are empty"
this.jet.info(new Error(i),["MSG-65768",t,n,e],{shouldRethrow:!1})
return(0,d.resolve)()}return this.msgDataManager.fetchComposeContext({recipients:e,composeOptionType:t,context:n}).then((e=>{if(!this.isDestroying){this.composeViewContext=e
n&&i&&e&&(0,h.set)(this.args.bubble,"messageContext.contextText",(0,h.get)(e,"contextText"))}}))}return this.msgDataManager.fetchComposeContext({recipients:e,composeOptionType:t,context:n}).then((e=>{if(!this.isDestroying){this.composeViewContext=e
const i="HIGH_INTENT"===t,o="MESSAGE_REQUEST"===t||i
n&&o&&(0,h.set)(this.args.bubble,"messageContext",{contextEntityUrn:n,contextText:(0,h.get)(e,"contextText"),composeOptionType:t})}}))}constructor(){var e,i,o,a,r,s
super(...arguments);(0,t.default)(this,"i18n",W,this);(0,t.default)(this,"lix",J,this);(0,t.default)(this,"identityStore",X,this);(0,t.default)(this,"msgDataManager",Q,this);(0,t.default)(this,"msgOverlay",$,this);(0,t.default)(this,"rum",Z,this);(0,t.default)(this,"jet",ee,this);(0,t.default)(this,"tracking",te,this);(0,t.default)(this,"persistentToastManager",ne,this);(0,t.default)(this,"authenticatedUser",ie,this);(0,t.default)(this,"presenceAPI",oe,this);(0,t.default)(this,"updateMessageComposeService",ae,this);(0,n.default)(this,"CONTROL_NAMES",ye);(0,n.default)(this,"MODULE_KEYS",Se);(0,n.default)(this,"actionTrackingPrefix",ye.OVERLAY_PREFIX);(0,n.default)(this,"trackingModuleName",Se.OVERLAY_CONVERSATION_DETAIL);(0,t.default)(this,"composeViewContext",re,this);(0,t.default)(this,"enableReportingSponsoredConversation",se,this);(0,t.default)(this,"messageIndexToBeAnchored",le,this);(0,t.default)(this,"shouldShowExpandedTypeahead",ce,this);(0,t.default)(this,"showMessageDiscardModal",ue,this);(0,t.default)(this,"showRenameConversationForm",de,this);(0,t.default)(this,"width",me,this);(0,t.default)(this,"contextByRecipients",pe,this);(0,t.default)(this,"setFocusToRenameConversationForm",ge,this)
be.set(this,{writable:!0,value:void 0});(0,n.default)(this,"dragAndDropTrackingKeys",Oe.OVERLAY);(0,n.default)(this,"shouldProcessHeaderFocusEvents",!1)
this.conversationEntryTime||(this.conversationEntryTime=Date.now())
const{conversation:l}=this.args.bubble
if(l){this.msgOverlay.findConversationEvents(l);(0,h.set)(this,"enableReportingSponsoredConversation",(0,M.enableReportingSponsoredMessage)(l)||(0,M.enableReportingSponsoredInMail)(l))}void 0===this.args.bubble.isJumbo&&(0,h.set)(this.args.bubble,"isJumbo",this.args.bubble.isInMail||this.args.bubble.isInMailCompose||l&&("SPONSORED_INMAIL"===(0,h.get)(l,"latestEvent.subtype")||(0,O.isSponsoredConversation)(l)&&1===(0,h.get)(l,"eventCollection.data").length))
let c,u,d
if(l&&!this.args.bubble.isNew){var p
c=null===(p=(0,h.get)(l,"participants"))||void 0===p?void 0:p.mapBy("miniProfile.entityUrn")
u="REPLY"
d=(0,h.get)(l,"entityUrn")}const{messageRecipients:v,composeOptionType:y}=this.args.bubble,_=this.args.bubble.context||this.args.bubble.invitationUrn||(null===(e=this.args.bubble.messageContext)||void 0===e?void 0:e.contextEntityUrn)||(null===(i=this.args.bubble.inMailComposeViewContext)||void 0===i?void 0:i.contextEntityUrn)||(null===(o=this.args.bubble.msgAdapterOptions)||void 0===o?void 0:o.jobApplication)||(null===(a=this.args.bubble.msgAdapterOptions)||void 0===a?void 0:a.groupUrn)
if((!l||this.args.bubble.isNew)&&null!=v&&v.length){c=v.mapBy("entityUrn")
u=y||(null!=_&&_.toLowerCase().includes("group")?"MESSAGE_REQUEST":null!=_&&_.toLowerCase().includes("jobapplication")?"CONNECTION_MESSAGE":this.args.bubble.isInMailCompose?"PREMIUM_INMAIL":"CONNECTION_MESSAGE")
d=_}const w=this.args.bubble.isNew&&((null==v?void 0:v.length)||y),C=!this.args.bubble.isNew
null!==(r=this.args.bubble)&&void 0!==r&&null!==(s=r.entryPointData)&&void 0!==s&&s.composeOptionOverride||!w&&!C||(this.composeViewContext=this._fetchAndSetComposeContext(c,u,d))
const S=this.rum.startPerfMeasurement(!this.args.bubble.isNew&&(0,h.get)(l,"eventCollection.hasInitialFetch")?"messaging-convo-bubble-subsequent-render":"messaging-convo-bubble-initial-render")
if(S.isOverlapping)S.cancel()
else{let e
this.args.bubble.isNew?e="new-bubble":l&&((0,E.isInmailConversation)(l)?e="inmail":(0,h.get)(l,"groupChat")?e="group-chat":(0,h.get)(l,"latestEvent.subtype")===Ce.M2M&&(e="1to1-mebc"))
if(e){S.spanStart(e);(0,m.schedule)("afterRender",(()=>{if(S&&!S.isCanceled&&!S.isClosed){e&&S.spanEnd(e)
this.rum.endPerfMeasurement(S)}}))}}if(f.default){(0,b.addEventListener)(this,window,"focus",(()=>{(0,g.readDOM)((()=>{this.shouldProcessHeaderFocusEvents=!0}))}));(0,b.addEventListener)(this,window,"blur",(()=>{this.shouldProcessHeaderFocusEvents=!1}))}}impressionEventPayload(e){var t,n
let{visibleTime:i,duration:o}=e
const a=this.args.bubble.isNew?Se.OVERLAY_COMPOSE:Se.OVERLAY_CONVERSATION_DETAIL
let r=null===(t=this.args.bubble.messageRecipients)||void 0===t?void 0:t.filter((e=>(0,h.get)(e,"miniProfile.objectUrn"))).mapBy("miniProfile.objectUrn")
r=null!==(n=r)&&void 0!==n&&n.length?r:null
return{name:fe,body:{moduleKey:a,participantUrns:r,conversation:{objectUrn:"",trackingId:(0,w.generateTrackingId)()},displayItem:{type:_e.MESSAGE_COMPOSE,visibleTime:i,duration:o,trackingObject:{objectUrn:"",trackingId:(0,w.generateTrackingId)()}}}}}handleDidInsert(e){this._element=e;(0,i.default)(this,be,e.querySelector(".msg-s-message-list"))
if((0,R.default)())this.args.bubble.isMinimized||(this.isPageViewEventPending=!0)
else{this._fireBubblePVE()
this.shouldProcessHeaderFocusEvents=!0}this._handleInitialFocus();(0,b.addEventListener)(this,this._element,"transitionend",(e=>{"width"===e.propertyName&&(0,g.readDOM)((()=>{this.isDestroying||(this.width=this._element.offsetWidth)}))}))
if(f.default){(0,b.addEventListener)(this,document,"mousedown",(e=>{this._element&&!this._element.contains(e.target)&&this._updateActiveState(!1)}));(0,b.addEventListener)(this,window,"visibilitychange",this._handleVisibilityChange.bind(this))}}_handleInitialFocus(){let e
if(this.args.bubble.focusInputOnInit){const{conversation:t}=this.args.bubble
e=t&&(0,D.isConversationWithAdvertiser)(t)?this._element.querySelector(".msg-overlay-bubble-header"):this._element.querySelector(this.args.bubble.isInMailCompose?".msg-form__subject input":Ie)||this._element.querySelector(".msg-overlay-bubble-header__title")}if(e){e.focus()
this.onActive()}}_handleVisibilityChange(){if(!(0,R.default)()&&this.isPageViewEventPending){this._fireBubblePVE()
this.isPageViewEventPending=!1}}_updateActiveState(e){(0,h.set)(this.args.bubble,"isActive",e)}handlekeyUp(e){e.keyCode===we&&"false"!==e.target.getAttribute("aria-hidden")&&this.handleCloseBubble()}handlekeyDown(e){var t
const n=null===(t=document.querySelector(`#${this.args.bubble.id} .msg-form__send-button`))||void 0===t?void 0:t.disabled,i=this.args.bubble.isInMailCompose&&(document.activeElement.classList.contains("emoji-hoverable-trigger")&&n||document.activeElement.classList.contains("msg-form__send-button"))
if((0,P.isTabKey)(e)&&(document.activeElement.classList.contains("msg-form__send-toggle")||i)){(0,T.default)(this,`#${this.args.bubble.id}`)
e.preventDefault()}}_focusConversation(){if(f.default&&window.getSelection().toString())return
let e
const{conversation:t}=this.args.bubble
e=t&&(0,D.isConversationWithAdvertiser)(t)?".msg-overlay-bubble-header":Ie
const n=this._element.querySelector(e)
n&&n.focus()}_showSuccessToast(e){const t=this.i18n.lookupTranslation("components/msg-overlay@conversation-bubble",e)([])
this.persistentToastManager.success({message:t})}onActive(){this._updateActiveState(!0)
this.msgOverlay.markConversationAsRead(this.args.bubble)}handleCloseBubble(){if(this.args.bubble.hasDraft)this.showMessageDiscardModal=!0
else{this.args.closeBubble()
if(this.args.bubble.conversation){const{entityUrn:e,inboxType:t}=(0,h.getProperties)(this.args.bubble.conversation,"entityUrn","inboxType")
if(e&&t){let n="OTHER"
"PRIMARY"===t?n="PRIMARY_INBOX":"SECONDARY"===t&&(n="SECONDARY_INBOX")
const i={conversationUrn:e,inboxType:n,origin:"WEB_OVERLAY",conversationEntryTime:this.conversationEntryTime,conversationExitTime:Date.now()}
this.tracking.fireTrackingPayload("ConversationDwellEvent",i)}}}(0,m.later)((()=>{var e,t
return null===(e=this.args.bubble.messageActions)||void 0===e||null===(t=e.afterCloseBubble)||void 0===t?void 0:t.call(e)}),1)}toggleJumboSize(){this.msgOverlay.conversationBubbleLayoutManager.resizeBubble(this.args.bubble,Me);(0,h.set)(this.args.bubble,"isJumbo",!this.args.bubble.isJumbo)
this.shouldShowExpandedTypeahead=this.args.bubble.isJumbo&&this.args.bubble.isNew
this.msgOverlay.syncCachedConvos()}toggleMinimize(e){var t
if(null===(t=e.target)||void 0===t||!t.closest(".msg-overlay-bubble-header__controls")){this.msgOverlay.conversationBubbleLayoutManager.resizeBubble(this.args.bubble,ke)
this.msgOverlay.syncCachedConvos()
if(this.args.bubble.isMinimized){this.args.bubble.hasUnseenMessages&&this.msgOverlay.markConversationAsRead(this.args.bubble);(0,b.runTask)(this,(()=>{this._focusConversation()}))
this._fireBubblePVE()}(0,b.runTask)(this,(()=>{(0,h.set)(this.args.bubble,"isMinimized",!this.args.bubble.isMinimized)
this._updateActiveState(!this.args.bubble.isMinimized)}))}}toggleShowRenameConversation(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]
const{conversation:t}=this.args.bubble
if(t&&(0,h.get)(t,"groupChat")){this.setFocusToRenameConversationForm=!this.showRenameConversationForm&&e
this.showRenameConversationForm=!this.showRenameConversationForm}}openConversation(e){this.msgDataManager.fetchConversation(e).then((t=>{if(t){this.onConversationFetched(t,e,!1);(0,m.scheduleOnce)("afterRender",(()=>this._handleInitialFocus()))}}))}openInMailCompose(e,t,n){this.identityStore.findRecord("com.linkedin.voyager.identity.shared.MiniProfile",e).then((e=>{if(!this.isDestroying){(0,h.setProperties)(this.args.bubble,{composeOptionType:"PREMIUM_INMAIL",isInMailCompose:!0,isJumbo:!t,isOpenedFromMsgButton:!0,messageRecipients:e?[e]:void 0,showPremiumUpsell:t,targetUrl:n});(0,m.scheduleOnce)("afterRender",(()=>this._handleInitialFocus()))}}))}composeToNonConnection(e,t){var n
let{composeOption:i={},upsellContextUrn:o}=t
const{composeOptionType:a,composeNavigationContext:r}=(0,h.getProperties)(i,"composeOptionType","composeNavigationContext")
r&&this._fetchAndSetComposeContext(r.serialize().recipientUrns,a)
switch(a){case"UPSELL":this.openInMailCompose((0,S.extractEntityInfoFromUrn)(o).id,!0,null!==(n=(0,h.get)(i,"composeNavigationContext.targetUrl"))&&void 0!==n?n:(0,h.get)(i,"targetUrl"))
break
case"PREMIUM_INMAIL":this.openInMailCompose((0,S.extractEntityInfoFromUrn)((0,h.get)(i,"composeNavigationContext.recipientUrns.firstObject")).id)
break
case"REPLY":this.openConversation((0,S.extractEntityInfoFromUrn)((0,h.get)(i,"composeNavigationContext.existingConversationUrn")).id)
break
default:e()}}toggleConversationMute(){const{conversation:e}=this.args.bubble,t=(0,h.get)(e,"muted"),n=this.msgDataManager.toggleConversationMute((0,h.get)(e,"entityUrn"),!t),i=t?ve.MUTE:ve.UNMUTE
_.default.fireDetailActionEvent({actionType:i,controlName:ye.OVERLAY.MUTE,conversationObjectUrn:(0,h.get)(e,"backendUrn"),participantUrns:_.default.getParticipantTrackingUrns((0,h.get)(e,"participants")),participantPresenceStatuses:(0,N.getParticipantPresenceStatuses)(e),trackingService:this.tracking})
return n}didSubmitMessage(e){(0,h.setProperties)(this.args.bubble,{message:"",attachments:[],conversation:e,isNew:!1,isInMailCompose:!1,forwardedEvent:void 0,update:null,smpContent:null})
const t=(0,h.get)(this,"args.bubble.messageActions.afterSendTracking")
if(t){const e=t()
this.tracking.fireTrackingPayload(e.name,e.body)}}onConversationFetched(e,t,n){this.msgDataManager.initEventCollection({name:(0,h.get)(e,"id"),conversationId:t}).fetch()
const i=(0,h.get)(this.args.bubble,"isJumbo");(0,h.setProperties)(this.args.bubble,{conversation:e,isInMailCompose:!1,isNew:n,isJumbo:(0,h.get)(e,"groupChat")})
const o=(0,h.get)(this.args.bubble,"isJumbo")
o!==i&&!(!1===o&&void 0===i)&&this.msgOverlay.conversationBubbleLayoutManager.resizeBubble(this.args.bubble,"TOGGLE_JUMBO")}recipientsChanged(e,t){this.contextByRecipients=t;(0,h.setProperties)(this.args.bubble,{conversation:this.conversation,messageRecipients:e})
if(e&&0!==e.length){if(1===e.length||null!=t&&t.length){var n,i
const o=null!=t&&null!==(n=t[0])&&void 0!==n&&n.contextEntityUrn.includes("company")?"MESSAGE_REQUEST":"CONNECTION_MESSAGE"
this._fetchAndSetComposeContext(e.mapBy("entityUrn"),o,null==t||null===(i=t[0])||void 0===i?void 0:i.contextEntityUrn)}}else(0,h.setProperties)(this.args.bubble,{fetchedEvents:void 0})}updateMessageCompose(e){let{body:t}=e
this.updateMessageComposeService.triggerUpdateMessageCompose({bubbleId:(0,h.get)(this.args.bubble,"id"),isOverlay:!0,messageText:t})}_fireBubblePVE(){this.args.bubble.isMinimized||this.tracking.firePageViewEvent(Re.OVERLAY_CONVO)}setHasDraft(e){(0,h.set)(this.args.bubble,"hasDraft",e)}handleSuccessfulDiscardRequest(){var e,t
this.msgOverlay.conversationBubbleLayoutManager.closeConversationBubble(this.args.bubble)
null===(e=(t=this.args).handleSuccessfulDiscardRequest)||void 0===e||e.call(t,...arguments)}}),W=(0,a.default)(G.prototype,"i18n",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=(0,a.default)(G.prototype,"lix",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=(0,a.default)(G.prototype,"identityStore",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=(0,a.default)(G.prototype,"msgDataManager",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=(0,a.default)(G.prototype,"msgOverlay",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,a.default)(G.prototype,"rum",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=(0,a.default)(G.prototype,"jet",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=(0,a.default)(G.prototype,"tracking",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=(0,a.default)(G.prototype,"persistentToastManager",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=(0,a.default)(G.prototype,"authenticatedUser",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=(0,a.default)(G.prototype,"presenceAPI",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=(0,a.default)(G.prototype,"updateMessageComposeService",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=(0,a.default)(G.prototype,"composeViewContext",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=(0,a.default)(G.prototype,"enableReportingSponsoredConversation",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=(0,a.default)(G.prototype,"messageIndexToBeAnchored",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=(0,a.default)(G.prototype,"shouldShowExpandedTypeahead",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=(0,a.default)(G.prototype,"showMessageDiscardModal",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de=(0,a.default)(G.prototype,"showRenameConversationForm",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),me=(0,a.default)(G.prototype,"width",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=(0,a.default)(G.prototype,"contextByRecipients",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=(0,a.default)(G.prototype,"setFocusToRenameConversationForm",[y.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,a.default)(G.prototype,"impressionEventPayload",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"impressionEventPayload"),G.prototype),(0,a.default)(G.prototype,"handleDidInsert",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"handleDidInsert"),G.prototype),(0,a.default)(G.prototype,"handlekeyUp",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"handlekeyUp"),G.prototype),(0,a.default)(G.prototype,"handlekeyDown",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"handlekeyDown"),G.prototype),(0,a.default)(G.prototype,"onActive",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"onActive"),G.prototype),(0,a.default)(G.prototype,"handleCloseBubble",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"handleCloseBubble"),G.prototype),(0,a.default)(G.prototype,"toggleJumboSize",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"toggleJumboSize"),G.prototype),(0,a.default)(G.prototype,"toggleMinimize",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"toggleMinimize"),G.prototype),(0,a.default)(G.prototype,"toggleShowRenameConversation",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"toggleShowRenameConversation"),G.prototype),(0,a.default)(G.prototype,"openConversation",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"openConversation"),G.prototype),(0,a.default)(G.prototype,"composeToNonConnection",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"composeToNonConnection"),G.prototype),(0,a.default)(G.prototype,"toggleConversationMute",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"toggleConversationMute"),G.prototype),(0,a.default)(G.prototype,"didSubmitMessage",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"didSubmitMessage"),G.prototype),(0,a.default)(G.prototype,"onConversationFetched",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"onConversationFetched"),G.prototype),(0,a.default)(G.prototype,"recipientsChanged",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"recipientsChanged"),G.prototype),(0,a.default)(G.prototype,"updateMessageCompose",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"updateMessageCompose"),G.prototype),(0,a.default)(G.prototype,"setHasDraft",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"setHasDraft"),G.prototype),(0,a.default)(G.prototype,"handleSuccessfulDiscardRequest",[h.action],Object.getOwnPropertyDescriptor(G.prototype,"handleSuccessfulDiscardRequest"),G.prototype),G)
e.default=De;(0,s.setComponentTemplate)(he,De)}))
define("msg-overlay/components/conversation-list-empty-page-presenter",["exports","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const o=(0,n.createTemplateFactory)({id:"NRjBN1FF",block:'[[[1,"\\n"],[11,0],[24,0,"msg-overlay-abi text-align-center ph6"],[4,[38,0],null,[["pageKey","routeName","currentRoute"],[[52,[30,1],"flagship3_messaging_overlay_abi_completed.page","flagship3_messaging_overlay_abi.page"],[28,[37,2],[[53,"outletState"],"render.name"],null],[28,[37,2],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n  "],[10,0],[14,0,"msg-overlay-list-bubble__illustration msg-overlay-abi__illustration"],[12],[13],[1,"\\n"],[41,[30,1],[[[1,"    "],[10,2],[14,0,"t-14 t-black--light t-normal"],[12],[1,"\\n      "],[1,[28,[35,4],["i18n_start_conversations","msg-overlay/components/conversation-list-empty-page-presenter"],null]],[1,"\\n    "],[13],[1,"\\n    "],[8,[39,5],[[4,[38,6],["overlay.find_connections"],null]],[["@route","@class"],["mynetwork","msg-overlay-abi__cta artdeco-button artdeco-button--primary mt4"]],[["default"],[[[[1,"\\n      "],[1,[28,[35,4],["i18n_find_connections","msg-overlay/components/conversation-list-empty-page-presenter"],null]],[1,"\\n    "]],[]]]]],[1,"\\n"]],[]],[[[1,"    "],[10,"h4"],[14,0,"t-16 t-black t-bold"],[12],[1,"\\n      "],[1,[28,[35,4],["i18n_keep_in_touch","msg-overlay/components/conversation-list-empty-page-presenter"],null]],[1,"\\n    "],[13],[1,"\\n    "],[10,2],[14,0,"t-14 t-black--light t-normal mt3 mb3"],[12],[1,"\\n      "],[1,[28,[35,4],["i18n_find_people","msg-overlay/components/conversation-list-empty-page-presenter"],null]],[1,"\\n    "],[13],[1,"\\n    "],[8,[39,5],[[4,[38,6],["overlay.abi"],null]],[["@route","@class"],["mynetwork.abi","msg-overlay-abi__find-new-connections artdeco-button artdeco-button--3 artdeco-button--tertiary t-14"]],[["default"],[[[[1,"\\n      "],[1,[28,[35,4],["i18n_find_new_connections","msg-overlay/components/conversation-list-empty-page-presenter"],null]],[1,"\\n    "]],[]]]]],[1,"\\n"]],[]]],[13]],["@isAbiComplete"],false,["ember-cli-pemberly-tracking@track-render","if","get","-get-dynamic-var","t","ember-engines@link-to-external","ember-cli-pemberly-tracking@track-interaction"]]',moduleName:"msg-overlay/components/conversation-list-empty-page-presenter.hbs",isStrictMode:!1})
var a=(0,t.setComponentTemplate)(o,(0,i.default)())
e.default=a}))
define("msg-overlay/components/conversation-list-empty-page-with-strong-network-presenter",["exports","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const o=(0,n.createTemplateFactory)({id:"gBn+glQr",block:'[[[11,0],[24,0,"text-align-center p5"],[17,1],[12],[1,"\\n"],[41,[30,2],[[[1,"    "],[10,0],[14,0,"mb4"],[12],[1,"\\n"],[42,[28,[37,2],[[28,[37,2],[[30,2]],null]],null],null,[[[1,"        "],[8,[39,3],null,[["@image","@class","@ghostType","@width"],[[30,3],"EntityPhoto-circle-2-stackedFacepile","person",40]],null],[1,"\\n"]],[3]],null],[1,"    "],[13],[1,"\\n    "],[10,"h4"],[14,0,"t-16 t-black t-bold mb3"],[12],[1,"\\n      "],[1,[28,[35,4],["i18n_reach_out","msg-overlay/components/conversation-list-empty-page-with-strong-network-presenter"],null]],[1,"\\n    "],[13],[1,"\\n    "],[10,2],[14,0,"t-14 t-black--light t-normal mb5"],[12],[1,"\\n      "],[1,[28,[35,4],["i18n_has_connections","msg-overlay/components/conversation-list-empty-page-with-strong-network-presenter"],null]],[1,"\\n    "],[13],[1,"\\n    "],[8,[39,5],null,[["@click"],[[30,4]]],[["default"],[[[[1,"\\n      "],[1,[28,[35,4],["i18n_send_message","msg-overlay/components/conversation-list-empty-page-with-strong-network-presenter"],null]],[1,"\\n    "]],[]]]]],[1,"\\n"]],[]],[[[1,"    "],[10,2],[14,0,"t-14 t-black--light t-normal"],[12],[1,"\\n      "],[1,[28,[35,4],["i18n_no_connections","msg-overlay/components/conversation-list-empty-page-with-strong-network-presenter"],null]],[1,"\\n    "],[13],[1,"\\n"]],[]]],[13]],["&attrs","@connectionProfileImages","picture","@newConversation"],false,["if","each","-track-array","ember-vector-images@lazy-image","t","artdeco-button@artdeco-button"]]',moduleName:"msg-overlay/components/conversation-list-empty-page-with-strong-network-presenter.hbs",isStrictMode:!1})
var a=(0,t.setComponentTemplate)(o,(0,i.default)())
e.default=a}))
define.alias("ember-vector-images/components/custom-image","msg-overlay/components/custom-image")
define.alias("ember-semaphore/components/ember-semaphore","msg-overlay/components/ember-semaphore")
define.alias("ember-wormhole/components/ember-wormhole","msg-overlay/components/ember-wormhole")
define.alias("ember-vector-images/components/lazy-background","msg-overlay/components/lazy-background")
define.alias("ember-vector-images/components/lazy-image","msg-overlay/components/lazy-image")
define.alias("ember-line-clamp/components/line-clamp","msg-overlay/components/line-clamp")
define.alias("artdeco-icons-web/components/linkedin-logo","msg-overlay/components/linkedin-logo")
define("msg-overlay/components/list-bubble-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/runloop","@ember/service","@ember/object","extended/config/environment","msg-shared/utils/constants","msg-ui/utils/realtime-onboarding","global-utils/utils/is-browser","rsvp","ember-cli-pemberly-tracking/utils/tracking","msg-shared/utils/get-participant-presence-statuses","ember-lifeline","@glimmer/component","@glimmer/tracking","tracked-toolbox","@ember/object/internals","msg-overlay/viewdata/list-bubble-viewdata"],(function(e,t,n,i,o,a,r,s,l,c,u,d,m,p,g,b,h,v,y,f,_,w,C){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var S,M,k,R,O,I,D,E,x,P,T,N,A,B,L,z,F,j,U,V,q,H,K,Y,G,W,J,X,Q,$,Z,ee,te,ne,ie,oe,ae,re,se,le,ce,ue,de,me,pe,ge,be,he,ve,ye,fe,_e,we,Ce,Se,Me,ke,Re,Oe,Ie,De
const Ee=(0,r.createTemplateFactory)({id:"J8kPXUPY",block:'[[[11,0],[24,"tabindex","-1"],[16,0,[29,["msg-overlay-list-bubble\\n    ",[52,[30,0,["isMinimized"]],"msg-overlay-list-bubble--is-minimized"],"\\n    ",[52,[30,0,["isInMinimizeTransition"]],"msg-overlay-list-bubble--during-transition"],"\\n    ml4"]]],[4,[38,1],null,null],[4,[38,2],["transitionend",[28,[37,3],[[30,0],"isInMinimizeTransition",false],null]],null],[12],[1,"\\n  "],[10,"header"],[14,0,"msg-overlay-bubble-header"],[12],[1,"\\n    "],[10,0],[15,0,[29,["msg-overlay-bubble-header__badge-container\\n        ",[52,[30,0,["hasBadge"]],"msg-overlay-bubble-header--inverse msg-overlay-bubble-header--is-badged"]]]],[12],[13],[1,"\\n    "],[8,[39,4],null,null,null],[1,"\\n"],[1,"    "],[11,0],[24,0,"msg-overlay-bubble-header__details flex-row align-items-center ml1"],[4,[38,2],["click",[30,0,["toggleMinimize"]]],null],[4,[38,5],[[30,0,["toggleMinimizeTrackingControlName"]]],null],[12],[1,"\\n      "],[8,[39,6],null,[["@viewData","@size"],[[30,0,["viewData","entityWithPresenceViewData"]],1]],null],[1,"\\n      "],[10,"button"],[14,0,"msg-overlay-bubble-header__button truncate ml2"],[14,4,"button"],[12],[1,"\\n        "],[10,1],[15,0,[29,["truncate t-14 t-bold\\n            ",[52,[30,0,["hasBadge"]],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n          "],[10,1],[14,"aria-hidden","true"],[12],[1,"\\n            "],[1,[28,[35,7],["messaging","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n          "],[13],[1,"\\n          "],[10,1],[14,0,"visually-hidden"],[12],[1,"\\n            "],[1,[52,[30,0,["isMinimized"]],[28,[37,7],["a11y_open_overlay","msg-overlay/components/list-bubble-feature"],null],[28,[37,7],["a11y_minimize_overlay","msg-overlay/components/list-bubble-feature"],null]]],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n\\n"],[41,[30,0,["hasBadge"]],[[[1,"        "],[10,"mark"],[14,0,"msg-overlay-bubble-header__unread-count"],[14,"aria-hidden","true"],[12],[1,"\\n          "],[10,"abbr"],[15,"title",[28,[37,7],["a11y_unseen_messages","msg-overlay/components/list-bubble-feature"],[["count"],[[30,0,["msgOverlayService","unseenMsgCount"]]]]]],[12],[1,"\\n            "],[1,[30,0,["msgOverlayService","unseenMsgCount"]]],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[41,[30,0,["enableRealtimeConnectionStatus"]],[[[1,"        "],[10,0],[12],[1,"\\n          "],[1,[28,[35,8],null,[["type","class"],["flash",[28,[37,9],["msg-overlay-bubble-header__realtime-indicator ",[30,0,["realtimeStatusClassName"]]],null]]]]],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[1,"    "],[13],[1,"\\n    "],[10,0],[14,0,"msg-overlay-bubble-header__controls display-flex"],[12],[1,"\\n"],[1,"      "],[8,[39,10],null,[["@isOpen","@onVisibilityChange","@placement","@justification","@onClick","@shouldTriggerRetainFocus"],[[30,0,["isHeaderDropdownMenuOpen"]],[28,[37,3],[[30,0],"isHeaderDropdownMenuOpen"],null],[30,0,["headerDropdownMenuPlacement"]],"right",[30,0,["stopEvtPropagation"]],false]],[["default"],[[[[1,"\\n        "],[8,[30,1,["dropdown-trigger"]],[[4,[38,5],["overlay.dropdown_menu"],null]],[["@class"],[[29,["artdeco-button artdeco-button--1 artdeco-button--circle ",[52,[30,0,["hasBadge"]],"artdeco-button--primary","artdeco-button--muted artdeco-button--tertiary"]]]]],[["default"],[[[[1,"\\n          "],[1,[28,[35,8],null,[["a11y-text","type","size","color"],[[28,[37,7],["i18n_dropdown_menu_description","msg-overlay/components/list-bubble-feature"],null],"overflow-web-ios","small",true]]]],[1,"\\n        "]],[]]]]],[1,"\\n        "],[10,0],[14,0,"msg-overlay-bubble-header__dropdown-container"],[12],[1,"\\n          "],[8,[30,1,["dropdown-content"]],null,[["@arrowDir"],["right"]],[["default"],[[[[1,"\\n            "],[10,"ul"],[14,0,"white-space-nowrap"],[12],[1,"\\n"],[41,[30,0,["showManageConversationsButtonInHeaderDropdown"]],[[[1,"                "],[8,[39,11],[[4,[38,5],["overlay.enter_bulk_selection"],null]],[["@itemSelected","@role"],[[30,0,["enterBulkActionsMode"]],"button"]],[["default"],[[[[1,"\\n                  "],[10,0],[14,0,"display-flex align-items-center"],[12],[1,"\\n                    "],[10,1],[12],[1,"\\n                      "],[1,[28,[35,7],["i18n_manage_conversations","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                    "],[13],[1,"\\n                  "],[13],[1,"\\n                "]],[]]]]],[1,"\\n"]],[]],null],[1,"              "],[8,[39,11],[[4,[38,5],["overlay.connection_list_settings_from_dropdown"],null]],[["@itemSelected","@role"],[[30,0,["openMessagingSettingsModal"]],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,7],["i18n_messaging_settings","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n              "]],[]]]]],[1,"\\n"],[41,[51,[30,0,["enableFocusedInbox"]]],[[[41,[30,0,["showMessageRequestInboxInHeaderDropdown"]],[[[1,"                  "],[8,[39,11],[[4,[38,5],["overlay.overflow_view_message_request_inbox"],null]],[["@itemSelected","@role"],[[30,0,["openMessageRequestConversationList"]],"button"]],[["default"],[[[[1,"\\n                    "],[1,[28,[35,7],["i18n_message_request_inbox","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                  "]],[]]]]],[1,"\\n"]],[]],null]],[]],null],[1,"\\n"],[41,[28,[37,13],[[30,0,["currentConvosFilter"]],"MESSAGE_REQUEST_PENDING"],null],[[[1,"                "],[8,[39,11],[[4,[38,5],["overlay.view_declined_message_requests"],null]],[["@itemSelected","@role"],[[30,0,["openDeclinedMessageRequestConversationList"]],"button"]],[["default"],[[[[1,"\\n                  "],[1,[28,[35,7],["i18n_declined_message_requests","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                "]],[]]]]],[1,"\\n"]],[]],null],[1,"              "],[8,[39,11],null,[["@itemSelected","@role"],[[30,0,["openAwayMessageSettingsModal"]],"button"]],[["default"],[[[[1,"\\n                "],[1,[52,[30,0,["msgDataManager","awayMessageSettings","length"]],[28,[37,7],["i18n_update_away_message","msg-overlay/components/list-bubble-feature"],null],[28,[37,7],["i18n_set_away_message","msg-overlay/components/list-bubble-feature"],null]]],[1,"\\n              "]],[]]]]],[1,"\\n"],[41,[30,0,["isCompanyUser"]],[[[1,"                "],[8,[39,11],null,[["@itemSelected","@role"],[[30,0,["copyRealtimePayload"]],"button"]],[["default"],[[[[1,"\\n                  "],[1,[28,[35,7],["i18n_copy_realtime_payload","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                "]],[]]]]],[1,"\\n"]],[]],null],[1,"            "],[13],[1,"\\n          "]],[]]]]],[1,"\\n        "],[13],[1,"\\n      "]],[1]]]]],[1,"\\n\\n"],[1,"      "],[8,[39,14],[[4,[38,5],["overlay.compose_message"],null]],[["@text","@type","@color","@circle","@size","@icon","@class","@click"],[[28,[37,7],["a11y_compose","msg-overlay/components/list-bubble-feature"],null],[52,[30,0,["hasBadge"]],"primary","tertiary"],[52,[30,0,["hasBadge"]],"default","muted"],true,1,"compose-icon","msg-overlay-bubble-header__control msg-overlay-bubble-header__control--new-convo-btn",[30,0,["newConversation"]]]],null],[1,"\\n\\n"],[1,"      "],[8,[39,14],[[4,[38,5],[[52,[30,0,["isMinimized"]],"overlay_maximize_inbox","overlay_minimize_inbox"]],null]],[["@type","@color","@text","@circle","@size","@icon","@class","@click"],[[52,[30,0,["hasBadge"]],"primary","tertiary"],[52,[30,0,["hasBadge"]],"default","muted"],[52,[30,0,["isMinimized"]],[28,[37,7],["a11y_open_overlay","msg-overlay/components/list-bubble-feature"],null],[28,[37,7],["a11y_minimize_overlay","msg-overlay/components/list-bubble-feature"],null]],true,1,[52,[30,0,["isMinimized"]],"chevron-up-icon","chevron-down"],"msg-overlay-bubble-header__control msg-overlay-bubble-header__control--new-convo-btn",[30,0,["toggleMinimize"]]]],null],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[41,[30,0,["shouldRenderContent"]],[[[41,[30,0,["isBulkActionsMode"]],[[[1,"      "],[8,[39,15],null,[["@willExecuteBulkAction","@didExecuteBulkAction","@onExitBulkActionsMode","@isOverlay","@selectedConversationUrns"],[[30,0,["willExecuteBulkAction"]],[30,0,["didExecuteBulkAction"]],[30,0,["onExitBulkActionsMode"]],true,[30,0,["selectedConversationUrns"]]]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["enableOverlaySearchPreWork"]],[[[1,"      "],[8,[39,16],null,[["@openNewConversation","@openBubble","@currentConvosFilter","@onFilterApply","@onClearFilters","@showSearchInput","@onSearchTermChange"],[[30,2],[30,3],[30,0,["currentConvosFilter"]],[30,0,["applyFilter"]],[30,0,["clearFilters"]],[30,0,["showSearchInput"]],[30,0,["onSearchTermChange"]]]],[["default"],[[[[1,"\\n        "],[8,[30,4,["filterSection"]],null,null,[["default"],[[[[1,"\\n          "],[8,[39,17],null,[["@clearFilter","@currentFilter","@trackingPrefix","@disabled","@loadedUnreadConversations"],[[30,0,["clearFilters"]],[30,0,["currentConvosFilter"]],"overlay.",[30,0,["isBulkActionsMode"]],[30,0,["loadedUnreadConversations"]]]],null],[1,"\\n        "]],[]]]]],[1,"\\n      "]],[4]]]]],[1,"\\n"]],[]],[[[1,"      "],[8,[39,18],null,[["@openNewConversation","@openBubble","@currentConvosFilter","@onFilterApply","@onClearFilters","@showSearchInput","@onSearchTermChange"],[[30,2],[30,3],[30,0,["currentConvosFilter"]],[30,0,["applyFilter"]],[30,0,["clearFilters"]],[30,0,["showSearchInput"]],[30,0,["onSearchTermChange"]]]],[["default"],[[[[1,"\\n        "],[8,[30,5,["filterSection"]],null,null,[["default"],[[[[1,"\\n          "],[8,[39,17],null,[["@clearFilter","@currentFilter","@trackingPrefix","@disabled","@loadedUnreadConversations"],[[30,0,["clearFilters"]],[30,0,["currentConvosFilter"]],"overlay.",[30,0,["isBulkActionsMode"]],[30,0,["loadedUnreadConversations"]]]],null],[1,"\\n        "]],[]]]]],[1,"\\n      "]],[5]]]]],[1,"\\n"]],[]]],[1,"\\n    "],[10,0],[14,0,"msg-overlay-list-bubble__top-static-area"],[12],[1,"\\n"],[41,[30,0,["showFocusedInboxTabs"]],[[[1,"        "],[8,[39,19],null,[["@currentSelection","@showSecondaryTabBadge","@onPrimaryTabSelect","@onSecondaryTabSelect","@isOverlay"],[[30,0,["inboxType"]],[30,0,["hasUnseenSecondaryConversations"]],[28,[37,20],[[30,0,["switchInboxTab"]],"PRIMARY"],null],[28,[37,20],[[30,0,["switchInboxTab"]],"SECONDARY"],null],true]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["showKindnessReminder"]],[[[1,"        "],[8,[39,21],[[24,0,"msg-overlay-list-bubble__kindness-reminder"]],[["@type","@legoConfig","@text","@primaryActionText","@onImpression","@onDismiss","@onPrimary"],["basic",[30,0,["kindnessReminderLegoConfig"]],[28,[37,7],["i18n_kindness_reminder_text","msg-overlay/components/list-bubble-feature"],null],[28,[37,7],["i18n_kindness_reminder_learn_more","msg-overlay/components/list-bubble-feature"],null],[30,0,["impressionKindnessReminder"]],[30,0,["onKindnessReminderWidgetDismiss"]],[30,0,["clickKindnessReminder"]]]],null],[1,"\\n"]],[]],null],[1,"\\n      "],[8,[39,22],null,null,null],[1,"\\n\\n"],[41,[51,[30,0,["currentConvosFilter"]]],[[[41,[51,[30,0,["isBulkActionsMode"]]],[[[41,[30,0,["showAwayMessageOnboarding"]],[[[1,"            "],[8,[39,21],null,[["@title","@text","@legoConfig","@onDismiss","@onPrimary","@primaryActionText"],[[28,[37,7],["i18n_away_message_onboarding_title","msg-overlay/components/list-bubble-feature"],null],[28,[37,7],["i18n_away_message_onboarding_text","msg-overlay/components/list-bubble-feature"],null],[30,0,["awayMessageOnboardingLegoConfig"]],[28,[37,3],[[30,0],"showAwayMessageOnboarding",false],null],[28,[37,3],[[30,0],"awayMessageSettingsModalIsOpen",true],null],[28,[37,7],["i18n_set_away_message","msg-overlay/components/list-bubble-feature"],null]]],[["default"],[[[[1,"\\n              "],[8,[30,6,["leftSection"]],null,null,[["default"],[[[[1,"\\n                "],[1,[28,[35,8],null,[["type","size","color"],["linkedin-bug","21dp","premium"]]]],[1,"\\n              "]],[]]]]],[1,"\\n            "]],[6]]]]],[1,"\\n"]],[]],null]],[]],null]],[]],null],[1,"    "],[13],[1,"\\n\\n"],[41,[30,0,["inboxDataFetchFailed"]],[[[1,"      "],[10,0],[14,0,"msg-overlay-list-bubble__failed-to-connect-container text-align-center"],[12],[1,"\\n        "],[10,"h3"],[14,0,"t-16 t-black--light t-normal ph3 pb5"],[12],[1,"\\n          "],[1,[28,[35,7],["i18n_failed_connect","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n        "],[13],[1,"\\n        "],[8,[39,14],[[4,[38,5],["overlay.retry"],null]],[["@click","@type","@text"],[[30,0,["refetchInboxData"]],"secondary",[28,[37,7],["i18n_try_again","msg-overlay/components/list-bubble-feature"],null]]],null],[1,"\\n      "],[13],[1,"\\n"]],[]],[[[41,[30,0,["showMarkingAllReadLoader"]],[[[1,"        "],[8,[39,23],[[16,0,[52,[30,0,["currentConvosFilter"]],"full-height justify-center"]]],[["@size","@textPosition","@text","@border"],["xsmall","right",[28,[37,7],["i18n_mark_all_read_progress_text_v2","msg-overlay/components/list-bubble-feature"],null],[52,[28,[37,24],[[30,0,["currentConvosFilter"]]],null],"bottom"]]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[51,[30,0,["hideConversationsList"]]],[[[1,"        "],[10,"section"],[14,0,"scrollable msg-overlay-list-bubble__content msg-overlay-list-bubble__content--scrollable"],[12],[1,"\\n"],[1,"          "],[11,0],[4,[38,25],null,[["when"],[[30,0,["shouldScrollToTop"]]]]],[12],[13],[1,"\\n"],[1,"          "],[10,0],[14,0,"msg-overlay-list-bubble__default-conversation-container"],[12],[1,"\\n"],[41,[28,[37,13],[[30,0,["currentConvosFilter"]],"MESSAGE_REQUEST_PENDING"],null],[[[1,"              "],[8,[39,26],null,[["@trackingKey","@goBack"],["back_to_inbox_from_requests_overlay",[30,0,["backToInboxFromMessageRequestList"]]]],null],[1,"\\n"]],[]],[[[41,[28,[37,13],[[30,0,["currentConvosFilter"]],"MESSAGE_REQUEST_DECLINED"],null],[[[1,"              "],[8,[39,26],null,[["@isDeclinedList","@trackingKey","@goBack"],[true,"back_to_message_requests_from_declined_messages_overlay",[30,0,["messageRequestListHeaderOnGoBack"]]]],null],[1,"\\n            "]],[]],null]],[]]],[1,"\\n"],[41,[30,0,["inboxDataLoaded"]],[[[41,[30,0,["shouldShowSecondaryPreviewBanner"]],[[[1,"                "],[10,0],[14,0,"msg-conversation-card msg-ui-focused-inbox-secondary-preview-banner-presenter__secondary-preview-banner-card display-flex"],[12],[1,"\\n                  "],[8,[39,27],null,[["@classNames","@onClicked","@isOverlay"],[[29,["pl2 ",[52,[51,[30,0,["showContextualRecommendations"]]],"mb2"]," mh2 mt2 "]],[28,[37,20],[[30,0,["switchInboxTab"]],"SECONDARY"],null],true]],null],[1,"\\n                "],[13],[1,"\\n"]],[]],[[[41,[30,0,["showFocusedInboxBanner"]],[[[1,"                "],[8,[39,28],null,null,null],[1,"\\n              "]],[]],null]],[]]],[41,[30,0,["showContextualRecommendations"]],[[[1,"                "],[8,[39,29],null,[["@viewData","@openNewConversation","@classNames"],[[30,0,["viewData","contextualRecommendationListViewData"]],[30,2],[29,[[52,[30,0,["shouldShowSecondaryPreviewBanner"]],"mt1","mt2"]," "]]]],null],[1,"\\n"]],[]],null],[1,"\\n              "],[10,1],[14,0,"visually-hidden"],[12],[1,"\\n                "],[1,[28,[35,7],["i18n_a11y_infinite_scroll","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n              "],[13],[1,"\\n"],[41,[30,0,["showContextualRecommendations"]],[[[41,[51,[30,0,["showMessageRequestBanner"]]],[[[1,"                  "],[10,"header"],[14,0,"msg-overlay-list-bubble__list-header"],[12],[1,"\\n                    "],[10,"h5"],[14,0,"msg-overlay-list-bubble__list-header-title t-12 t-black--light t-bold truncate"],[12],[1,"\\n                      "],[1,[28,[35,7],["i18n_messages","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                    "],[13],[1,"\\n                  "],[13],[1,"\\n"]],[]],null]],[]],null],[41,[30,0,["showMessageRequestBanner"]],[[[1,"                "],[8,[39,30],null,[["@headingText","@openMessageRequestConversationList","@trackingKey"],[[30,0,["pendingMessageRequestBundle","heading","text"]],[30,0,["openMessageRequestConversationList"]],"overlay.bundle_view_message_request_inbox"]],null],[1,"\\n"]],[]],null],[1,"              "],[8,[39,31],null,[["@conversations","@participants","@currentConvosFilter","@hasStrongNetwork","@connectionProfileImages","@isAbiComplete","@isBulkActionsMode","@disableBulkActions","@openBubble","@newConversation","@onBulkActionToggle","@selectedConversationUrns"],[[30,0,["conversations"]],[30,0,["mailboxParticipants"]],[30,0,["currentConvosFilter"]],[30,0,["hasStrongNetwork"]],[30,0,["connectionProfileImages"]],[30,0,["isAbiComplete"]],[30,0,["isBulkActionsMode"]],[30,0,["showMessageRequestConversationList"]],[30,0,["openBubbleByConversationUrn"]],[30,0,["newConversation"]],[30,0,["onListBubbleItemClick"]],[30,0,["selectedConversationUrns"]]]],null],[1,"\\n"],[41,[30,0,["loadMoreError"]],[[[1,"                "],[10,0],[14,0,"p4 mb6"],[12],[1,"\\n                  "],[8,[39,32],null,[["@class","@headline","@illustration","@message","@muted"],["msg-conversations-container__load-error",[28,[37,7],["i18n_oops","msg-overlay/components/list-bubble-feature"],null],"no-connection",[28,[37,7],["i18n_load_more_error","msg-overlay/components/list-bubble-feature"],null],true]],null],[1,"\\n                  "],[8,[39,14],[[4,[38,5],["overlay.retry"],null]],[["@class","@click","@text","@type"],["js-retry-button block mlA mrA",[30,0,["retryLoadMore"]],[28,[37,7],["i18n_try_again","msg-overlay/components/list-bubble-feature"],null],"secondary"]],null],[1,"\\n                "],[13],[1,"\\n"]],[]],null],[41,[30,0,["loadMoreInProgress"]],[[[1,"                "],[10,0],[12],[1,"\\n                  "],[8,[39,33],null,[["@size"],["small"]],null],[1,"\\n                "],[13],[1,"\\n"]],[]],null]],[]],[[[1,"              "],[8,[39,23],[[24,0,"full-height justify-center"]],[["@size"],["small"]],null],[1,"\\n"]],[]]],[1,"\\n"],[41,[30,0,["shouldLoadMoreConversations"]],[[[1,"              "],[8,[39,34],null,[["@inView","@rootSelector"],[[30,0,["loadMore"]],".msg-overlay-list-bubble__content"]],null],[1,"\\n"]],[]],null],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null]],[]]]],[]],null],[1,"\\n"],[41,[30,0,["isMessagingSettingsModalOpen"]],[[[1,"    "],[8,[39,35],null,[["@closeModal"],[[28,[37,3],[[30,0],"isMessagingSettingsModalOpen",false],null]]],null],[1,"\\n"]],[]],null],[41,[30,0,["awayMessageSettingsModalIsOpen"]],[[[1,"    "],[8,[39,36],null,[["@closeModal"],[[28,[37,3],[[30,0],"awayMessageSettingsModalIsOpen",false],null]]],null],[1,"\\n"]],[]],null],[13]],["dropdown","@newConversation","@openBubble","OverlaySearchFeature","listBubbleSearch","widget"],false,["if","msg-shared@block-scrolling","on","ember-set-helper@set","msg-overlay@presence-onboarding-presenter","ember-cli-pemberly-tracking@track-interaction","presence@entity-with-presence-presenter","t","artdeco-icons-web@li-icon","concat","artdeco-dropdown@artdeco-dropdown","artdeco-dropdown@artdeco-dropdown-item","unless","global-helpers@eq","artdeco-button@artdeco-button","msg-ui@primitives/bulk-actions-panel-presenter","msg-overlay@overlay-search-feature","msg-ui@selected-filter-presenter","msg-overlay@list-bubble-search","msg-ui@focused-inbox-tabs-presenter","fn","msg-ui@kindness-reminder-presenter","msg-ui@away-message-reminder-banner-presenter","msg-ui@loader","global-helpers@not","global-modifiers@scroll-into-view","msg-ui@message-request-list-header-presenter","msg-ui@focused-inbox-secondary-preview-banner-presenter","msg-ui@focused-inbox-banner-presenter","msg-overlay@contextual-recommendation-list-presenter","msg-ui@inbox-header-with-message-request-presenter","msg-overlay@overlay-conversation-list-feature","artdeco-empty-state@artdeco-empty-state","artdeco-loader@artdeco-loader","msg-ui@visible-beacon","msg-shared-modals@msg-settings-modal-presenter","msg-shared-modals@away-message-settings-modal-presenter"]]',moduleName:"msg-overlay/components/list-bubble-feature.hbs",isStrictMode:!1}),{IMPRESSION_KEYS:{CONVERSATION:xe},MODULE_KEYS:{OVERLAY_CONVERSATION_LIST:Pe},MESSAGE_REQUEST_STATUS:{MESSAGE_REQUEST_PENDING:Te,MESSAGE_REQUEST_DECLINED:Ne},MESSAGE_REQUEST_TARGET_URLS:Ae,OVERLAY_LS_CONVERSATIONS_FILTER_KEY:Be,OVERLAY:{QUALITY_MEMBER_CONNECTIONS_THRESHOLD:Le},OVERLAY_FILTERS_INTERACTION_EVENTS:ze,PAGEVIEW_KEYS:Fe,KINDNESS_REMINDER_LEGO:je,AWAY_MESSAGE_ONBOARDING_LEGO:Ue,INBOX_TYPES:Ve}=d.default
let qe=(S=(0,l.inject)("authentication@authenticated-user"),M=(0,l.inject)("global-nav-badge@badge"),k=(0,l.inject)("global-services@clipboard"),R=(0,l.inject)("lix"),O=(0,l.inject)("tracking"),I=(0,l.inject)("i18n"),D=(0,l.inject)("global-services@window"),E=(0,l.inject)("global-services@a11y-notification"),x=(0,l.inject)("heathrow@heathrow"),P=(0,l.inject)("msg-overlay-manager@msg-overlay-manager"),T=(0,l.inject)("global-services@realtime-events"),N=(0,l.inject)("store"),A=(0,l.inject)("global-services@local-storage"),B=(0,l.inject)("lego@resolver"),L=(0,l.inject)("lego@tracking"),z=(0,l.inject)("msg-shared@messaging-user-settings"),F=(0,l.inject)("msg-data@data-manager"),j=(0,l.inject)("persistent-toast-manager@persistent-toast-manager"),U=(0,l.inject)("formatter"),V=(0,l.inject)("rum"),q=(0,_.localCopy)("args.filterFromDeeplink"),H=class extends y.default{get isMinimized(){return this.msgOverlayService.listBubbleIsMinimized}get shouldRenderContent(){return!this.isMinimized||this.isInMinimizeTransition}get showMessageRequestConversationList(){return this.currentConvosFilter===Te||this.currentConvosFilter===Ne}get showSearchInput(){return!this.isBulkActionsMode&&(!this.showMessageRequestConversationList||this.enableFocusedInbox)}get showFocusedInboxTabs(){return this.enableFocusedInbox&&(!this.currentConvosFilter||this.currentConvosFilter===Te)}get showMessageRequestInboxInHeaderDropdown(){return!this.showMessageRequestConversationList}get showManageConversationsButtonInHeaderDropdown(){return!this.showMessageRequestConversationList}get showContextualRecommendations(){return!this.currentConvosFilter&&this.msgOverlayService.suggestedRecipients}get toggleMinimizeTrackingControlName(){return this.isMinimized?"overlay.maximize_connection_list_bar":"overlay.minimize_connection_list_bar"}get hideConversationsList(){return"UNREAD"===this.currentConvosFilter&&this.showMarkingAllReadLoader}get hasBadge(){return this.msgOverlayService.unseenMsgCount>0&&(!this.msgOverlayService.forcedMinimizedAtRoute||this.args.realtimeMsgNotAutoOpened)}get hasStrongNetwork(){return this.numConnections>Le}get showMessageRequestBanner(){return!this.enableFocusedInbox&&this.pendingMessageRequestBundle&&!this.currentConvosFilter}get showFocusedInboxBanner(){return this.enableFocusedInbox&&!this.currentConvosFilter&&!this.isBulkActionsMode}get showKindnessReminder(){return!this.kindnessReminderShown&&!this.currentConvosFilter&&!this.isBulkActionsMode}get realtimeStatusClassName(){return this.realtimeEvents.hasActiveConnection?"msg-overlay-bubble-header__realtime-indicator--online":"msg-overlay-bubble-header__realtime-indicator--offline"}get headerDropdownMenuPlacement(){return this.isMinimized?"top":"bottom"}get shouldLoadMoreConversations(){return!!this.conversationCollection&&(!this.conversationCollection.lastSetOfRecordsLoaded&&!this.loadMoreInProgress&&this.inboxDataLoaded&&!this.loadMoreError)}get showMarkingAllReadLoader(){return this.msgDataManager.progressIndicatorState.markAllReadIndicator&&(!this.currentConvosFilter||"UNREAD"===this.currentConvosFilter)}get enableOverlaySearchPreWork(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-sdk-pre-work-overlay-search")}get conversationCollection(){let e
e=this.currentConvosFilter?this.currentConvosFilter:this.enableFocusedInbox?this.inboxType:Ve.MAIN_INBOX
return this.msgDataManager.inboxManager.getConversationCollectionByName(e)}get conversations(){var e,t
if(this.msgDataManager.msgSDKEnabled){var n
return null===(n=this.msgDataManager.getMailboxState())||void 0===n?void 0:n.conversations}const i=null===(e=this.conversationCollection)||void 0===e?void 0:e.data
return null!==(t=this.currentConvosFilter?i:null==i?void 0:i.filter((e=>!(0,c.get)(e,"archived")&&!(0,c.get)(e,"blocked"))))&&void 0!==t?t:[]}get mailboxParticipants(){if(this.msgDataManager.msgSDKEnabled){var e
return null===(e=this.msgDataManager.getMailboxState())||void 0===e?void 0:e.participants}}get loadedUnreadConversations(){var e,t
return null!==(e=null===(t=this.conversations)||void 0===t?void 0:t.filter((e=>!(0,c.get)(e,"read"))))&&void 0!==e?e:[]}get useNewCoachmark(){return this.lix.getTreatmentIsEnabled("voyager.web.discover-messaging-enable-coachmark")}get enableRealtimeConnectionStatus(){return this.lix.getTreatmentIsEnabled("voyager.messaging.web.show-realtime-connection-status")}get isCompanyUser(){return this.lix.getTreatmentIsEnabled("voyager.client.staff")}get enableFocusedInbox(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-focused-inbox-experience")}get hasUnseenSecondaryConversations(){return!!this.enableFocusedInbox&&null!==this.msgDataManager.inboxManager.secondaryPreviewBannerData}get shouldShowSecondaryPreviewBanner(){return this.hasUnseenSecondaryConversations&&(!this.currentConvosFilter||this.currentConvosFilter===Te)&&"PRIMARY"===this.inboxType}get viewData(){const e=this.msgOverlayService.suggestedRecipients.map((e=>(0,c.get)(e,"content")))
return new C.default({suggestedRecipients:e,formatter:this.formatter,authenticatedUserProfile:this.authenticatedUser.miniProfile.content})}get shouldScrollToTop(){const e=this.conversationCollection!==this._previousConversationCollection
this._previousConversationCollection=this.conversationCollection
return e}constructor(){super(...arguments);(0,n.default)(this,"listBubbleId",`list-bubble-${(0,w.guidFor)(this)}`);(0,t.default)(this,"authenticatedUser",K,this);(0,t.default)(this,"badgeService",Y,this);(0,t.default)(this,"clipboard",G,this);(0,t.default)(this,"lix",W,this);(0,t.default)(this,"tracking",J,this);(0,t.default)(this,"i18n",X,this);(0,t.default)(this,"windowService",Q,this);(0,t.default)(this,"a11yNotification",$,this);(0,t.default)(this,"heathrow",Z,this);(0,t.default)(this,"msgOverlayService",ee,this);(0,t.default)(this,"realtimeEvents",te,this);(0,t.default)(this,"store",ne,this);(0,t.default)(this,"localStorage",ie,this);(0,t.default)(this,"legoResolver",oe,this);(0,t.default)(this,"legoTracking",ae,this);(0,t.default)(this,"msgUserSettings",re,this);(0,t.default)(this,"msgDataManager",se,this);(0,t.default)(this,"persistentToastManager",le,this);(0,t.default)(this,"formatter",ce,this);(0,t.default)(this,"rum",ue,this);(0,t.default)(this,"currentConvosFilter",de,this);(0,t.default)(this,"isHeaderDropdownMenuOpen",me,this);(0,t.default)(this,"isMessagingSettingsModalOpen",pe,this);(0,t.default)(this,"inboxDataFetchInProgress",ge,this);(0,t.default)(this,"inboxDataLoaded",be,this);(0,t.default)(this,"inboxDataFetchFailed",he,this);(0,t.default)(this,"loadMoreError",ve,this);(0,t.default)(this,"loadMoreInProgress",ye,this);(0,t.default)(this,"pendingMessageRequestBundle",fe,this);(0,t.default)(this,"numConnections",_e,this);(0,t.default)(this,"connectionProfileImages",we,this);(0,t.default)(this,"awayMessageSettingsModalIsOpen",Ce,this);(0,t.default)(this,"selectedConversations",Se,this);(0,t.default)(this,"selectedConversationUrns",Me,this);(0,t.default)(this,"isBulkActionsMode",ke,this);(0,t.default)(this,"searchTerm",Re,this);(0,t.default)(this,"inboxType",Oe,this);(0,t.default)(this,"isInMinimizeTransition",Ie,this);(0,n.default)(this,"bubblePageKey","d_flagship3_messaging_overlay_connections.page");(0,n.default)(this,"bubbleMinimizeProperty","isMinimized");(0,n.default)(this,"kindnessReminderLegoConfig",je);(0,n.default)(this,"kindnessReminderHelpCenterLink","/legal/professional-community-policies");(0,n.default)(this,"awayMessageOnboardingLegoConfig",Ue);(0,t.default)(this,"kindnessReminderShown",De,this);(0,n.default)(this,"_previousConversationCollection",null)
this.badging=this.badgeService
this.showAwayMessageOnboarding=this.authenticatedUser.isPremiumUser
new m.default(this.legoResolver,this.legoTracking,this.msgUserSettings,this.store,this.tracking,this.lix).run()
const e=this.rum.startPerfMeasurement("messaging-list-bubble-initial-render");(0,s.schedule)("afterRender",(()=>{e&&!e.isClosed&&this.rum.endPerfMeasurement(e)}))
this.msgDataManager.subscribe((e=>{"conversationBundleUpdate"===e&&(this.pendingMessageRequestBundle=this.msgDataManager.getConversationBundleByTargetUrl(Ae.URL_PENDING))}))
this._fetchInboxData(this.currentConvosFilter)}_fetchInboxData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
if(this.inboxDataFetchInProgress||this.inboxDataLoaded)return(0,g.reject)()
this.inboxDataFetchInProgress=!0
this.inboxDataLoaded=!1
const n=this._loadConversations(e,t),i=this._loadConversationBundles(t)
return(0,g.hashSettled)({conversations:n,conversationBundles:i}).then((e=>{var t,n,i
if(this.isDestroying)return(0,g.reject)()
if("rejected"===(0,c.get)(e.conversations,"state")){this.inboxDataFetchFailed=!0
this.tracking.firePageViewEvent(Fe.OVERLAY_FAILED_TO_CONNECT)
return(0,g.resolve)()}if(!(this.conversations.length||null!==(t=this.msgOverlayService.suggestedRecipients)&&void 0!==t&&t.length))return this._fetchFallbackStateData()
null===(n=(i=this.args).afterInboxDataFetch)||void 0===n||n.call(i,this.conversations)
return(0,g.resolve)(e)})).finally((()=>{if(!this.isDestroying){this.inboxDataFetchInProgress=!1
this.inboxDataLoaded=!0}}))}_fetchFallbackStateData(){const{store:e}=this,t=this.heathrow.organicAbiShouldSkipImport(),n={connectionSummary:e.findRecord("com.linkedin.voyager.relationships.shared.connection.ConnectionsSummary","GET",{reload:!1,adapterOptions:{url:`/${u.default.namespace}/relationships/connectionsSummary/`}}),isAbiComplete:t}
return(0,g.hashSettled)(n).then((t=>{var n
if(this.isDestroying)return(0,g.reject)()
this.isAbiComplete=t.isAbiComplete.value
this.numConnections=null!==(n=(0,c.get)(t,"connectionSummary.value.numConnections"))&&void 0!==n?n:0
return this.numConnections>=Le?e.queryURL(`/${u.default.namespace}/relationships/connections`,{params:{start:0,count:4},reload:!1}):(0,g.resolve)()})).then((e=>{if(this.isDestroying)return(0,g.reject)()
if(e){const t=(0,c.get)(e,"elements")
this.connectionProfileImages=t.map((e=>(0,c.get)(e,"miniProfile.picture")))}return e}))}_loadConversations(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
const n=e||this.localStorage.getItem(Be)
if(this.msgDataManager.msgSDKEnabled)return this.msgDataManager.getMailbox()
if(n)return this.loadConversationsByFilter(n).then((()=>{this.isDestroying||this.tracking.firePageViewEvent(Fe.OVERLAY_CONVERSATION_FILTERED_LIST[n])}))
const{inboxManager:i}=this.msgDataManager
return i.inboxDataLoaded&&!t?(0,g.resolve)([]):i.syncInbox()}_loadConversationBundles(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]
const t=this.msgDataManager.getConversationBundleByTargetUrl(Ae.URL_PENDING)
if(!e&&t){this.pendingMessageRequestBundle=t
return(0,g.resolve)()}return this.msgDataManager.fetchConversationBundles().then((()=>{this.isDestroying||(this.pendingMessageRequestBundle=this.msgDataManager.getConversationBundleByTargetUrl(Ae.URL_PENDING))}))}switchInboxTab(e){this.inboxType=e
this.isBulkActionsMode=!1
"SECONDARY"===e&&this.msgDataManager.inboxManager.markSecondaryInboxAsSeen()
const t="PRIMARY"===e?"flagship3_messaging_overlay_primary_tab":"flagship3_messaging_overlay_secondary_tab"
this.tracking.firePageViewEvent(t)}loadConversationsByFilter(e){this.isBulkActionsMode=!1
this.inboxDataLoaded=!1
this.inboxDataFetchInProgress=!0
this.currentConvosFilter=e
let t,n
t=e===Te?{q:"systemLabel",type:Te,excludedSystemLabelTypes:["SPAM","ARCHIVE"]}:e===Ne?{q:"systemLabel",type:Ne,excludedSystemLabelTypes:["SPAM","ARCHIVE"]}:"ARCHIVED"===e?{q:"search",folders:[e]}:e?{q:"search",filters:[e]}:{}
n=e?this.msgDataManager.inboxManager.loadCollection(e,t):this.msgDataManager.inboxManager.syncInbox()
return n.finally((()=>{if(!this.isDestroying){this.inboxDataLoaded=!0
this.inboxDataFetchInProgress=!1}}))}refetchInboxData(){this.inboxDataFetchFailed=!1
this.inboxDataFetchInProgress=!1
this.inboxDataLoaded=!1
this._fetchInboxData("",!0)}infiniteScroll(){return this.loadMore()}_updateMinimizedState(e){(0,v.runTask)(this,(()=>this.msgOverlayService.updateListBubbleMinimizeState(e)))}loadMore(){var e
if(this.loadMoreInProgress)return(0,g.resolve)()
if(0===(null===(e=this.conversations)||void 0===e?void 0:e.length))return(0,g.resolve)()
this.loadMoreInProgress=!0
this.loadMoreError=!1
return this.msgDataManager.inboxManager.loadMore(this.conversationCollection.name).then((e=>{const t=e.length
if(!this.isDestroying){const e=this.i18n.lookupTranslation("components/msg-ui@i18n-shared","i18n_a11y_infinite_scroll_conversations")
this.a11yNotification.setTextInLiveRegion(e([{newRecordCount:t}]))}const n=this.rum.startPerfMeasurement("messaging-list-bubble-render-load-more");(0,s.schedule)("afterRender",(()=>{n&&!n.isClosed&&this.rum.endPerfMeasurement(n)}))
return t})).catch((e=>{this.isDestroying||(this.loadMoreError=!0)
throw e})).finally((()=>{this.isDestroying||(this.loadMoreInProgress=!1)}))}newConversation(e,t){var n,i
e&&e.stopPropagation()
null===(n=(i=this.args).newConversation)||void 0===n||n.call(i,t)}retryLoadMore(){this.loadMore()}stopEvtPropagation(e){e&&e.stopPropagation()}toggleMinimize(e){var t
null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e)
this.isInMinimizeTransition=!0
if(this.isMinimized){this.badging.getBadgeCount("messaging")>0&&this.badging.fireBadgeInteractionEvent(document.getElementById(this.listBubbleId),"msg-overlay-list-bubble-header","messaging")
this.msgOverlayService.markAllAsSeen()
const e=this.rum.startPerfMeasurement("messaging-list-bubble-manual-open");(0,s.schedule)("afterRender",(()=>{e&&!e.isClosed&&this.rum.endPerfMeasurement(e)}))}this.msgOverlayService.toggleListBubbleMinimized()
this.isMinimized||this.tracking.firePageViewEvent(this.bubblePageKey)}openMessageRequestConversationList(){this.loadConversationsByFilter(Te)
this.isHeaderDropdownMenuOpen=!1
this.tracking.firePageViewEvent("d_flagship3_messaging_overlay_pending_request_inbox")}backToInboxFromMessageRequestList(){this.loadConversationsByFilter("")
this.tracking.fireInteractionEvent("overlay.back_to_inbox_from_requests")
this.msgDataManager.refreshConversationBundles()}openDeclinedMessageRequestConversationList(){this.loadConversationsByFilter(Ne)
this.isHeaderDropdownMenuOpen=!1
this.tracking.firePageViewEvent("d_flagship3_messaging_overlay_declined_request_inbox")}openAwayMessageSettingsModal(e){null==e||e.stopPropagation()
this.awayMessageSettingsModalIsOpen=!0}openMessagingSettingsModal(e){e&&e.stopPropagation()
this.isMessagingSettingsModalOpen=!0}onListBubbleItemClick(e){var t
if(!this.conversations.find((t=>(0,c.get)(t,"entityUrn")===e)))return
this._toggleConversationSelected(e)
this.selectedConversations=null===(t=this.conversations)||void 0===t?void 0:t.filter((e=>this.selectedConversationUrns.includes((0,c.get)(e,"entityUrn"))))
!this.isBulkActionsMode&&this.selectedConversations.length>0?this.isBulkActionsMode=!0:0===this.selectedConversations.length&&(this.isBulkActionsMode=!1)
const n=this.selectedConversationUrns.includes(e)?"overlay.bulk_select_conversation":"overlay.bulk_unselect_conversation"
this.tracking.fireInteractionEvent(n)}_toggleConversationSelected(e){if(0===this.selectedConversationUrns.length)this.selectedConversationUrns=[e]
else{const t=this.selectedConversationUrns.includes(e)
this.selectedConversationUrns=t?this.selectedConversationUrns.filter((t=>t!==e)):this.selectedConversationUrns.concat(e)}}enterBulkActionsMode(e){e&&e.stopPropagation()
this.isMinimized&&this.toggleMinimize()
this.isBulkActionsMode=!0
this.isHeaderDropdownMenuOpen=!1}onExitBulkActionsMode(){this.selectedConversationUrns=[]
this.selectedConversations=[]
this.isBulkActionsMode=!1}willExecuteBulkAction(){this.isBulkActionsMode=!1}didExecuteBulkAction(e){"delete"===e&&this.selectedConversations.forEach((e=>{this.msgOverlayService.conversationBubbleLayoutManager.closeBubbleByConversation(e)}))}applyFilter(e){e?this.localStorage.setItem(Be,e):this.localStorage.removeItem(Be)
this.loadConversationsByFilter(e).then((()=>{this.tracking.firePageViewEvent(Fe.OVERLAY_CONVERSATION_FILTERED_LIST[e||"ALL"])}))
this.tracking.fireInteractionEvent(ze.SELECT[e||"ALL"],"SHORT_PRESS")}clearFilters(){this.localStorage.removeItem(Be)
this.tracking.fireInteractionEvent(ze.DISMISS[this.currentConvosFilter],"SHORT_PRESS")
this.loadConversationsByFilter("")}impressionKindnessReminder(){this.tracking.firePageViewEvent("d_flagship3_messaging_overlay_kindness_banner")}clickKindnessReminder(){this.tracking.fireInteractionEvent("overlay.open_kindness_banner")
if(p.default){const e=this.kindnessReminderHelpCenterLink
if(!e)return
this.windowService.open(e,"_blank")}}onSearchTermChange(e){this.searchTerm=e}createListBubbleItemImpressionEvent(e){return this.isDestroying||this.isDestroyed?[]:{name:xe,body:{moduleKey:Pe,conversations:[{objectUrn:(0,c.get)(e,"backendUrn"),trackingId:(0,b.generateTrackingId)()}],participantPresenceStatuses:(0,h.getParticipantPresenceStatuses)(e)}}}onKindnessReminderWidgetDismiss(){this.kindnessReminderShown=!0
this.tracking.fireInteractionEvent("overlay.dismiss_kindness_banner")}messageRequestListHeaderOnGoBack(){this.loadConversationsByFilter(Te)
this.tracking.fireInteractionEvent("overlay.back_to_message_requests_from_declined_messages")}copyRealtimePayload(){const e=this.clipboard.copyToClipboard(JSON.stringify(this.realtimeEvents.getRealtimePayloadDump()))
this.isHeaderDropdownMenuOpen=!1
if(e){const e=this.i18n.lookupTranslation("components/msg-overlay@list-bubble-v2","i18n_realtime_payload_copied")([])
this.persistentToastManager.success({message:e})}}openBubbleByConversationUrn(e){const t=this.conversations.find((t=>(0,c.get)(t,"entityUrn")===e))
t&&this.args.openBubble(t)}},K=(0,i.default)(H.prototype,"authenticatedUser",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=(0,i.default)(H.prototype,"badgeService",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=(0,i.default)(H.prototype,"clipboard",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=(0,i.default)(H.prototype,"lix",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=(0,i.default)(H.prototype,"tracking",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=(0,i.default)(H.prototype,"i18n",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=(0,i.default)(H.prototype,"windowService",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=(0,i.default)(H.prototype,"a11yNotification",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,i.default)(H.prototype,"heathrow",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=(0,i.default)(H.prototype,"msgOverlayService",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=(0,i.default)(H.prototype,"realtimeEvents",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=(0,i.default)(H.prototype,"store",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=(0,i.default)(H.prototype,"localStorage",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=(0,i.default)(H.prototype,"legoResolver",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=(0,i.default)(H.prototype,"legoTracking",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=(0,i.default)(H.prototype,"msgUserSettings",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=(0,i.default)(H.prototype,"msgDataManager",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=(0,i.default)(H.prototype,"persistentToastManager",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=(0,i.default)(H.prototype,"formatter",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=(0,i.default)(H.prototype,"rum",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=(0,i.default)(H.prototype,"currentConvosFilter",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=(0,i.default)(H.prototype,"isHeaderDropdownMenuOpen",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pe=(0,i.default)(H.prototype,"isMessagingSettingsModalOpen",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ge=(0,i.default)(H.prototype,"inboxDataFetchInProgress",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),be=(0,i.default)(H.prototype,"inboxDataLoaded",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),he=(0,i.default)(H.prototype,"inboxDataFetchFailed",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ve=(0,i.default)(H.prototype,"loadMoreError",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ye=(0,i.default)(H.prototype,"loadMoreInProgress",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fe=(0,i.default)(H.prototype,"pendingMessageRequestBundle",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=(0,i.default)(H.prototype,"numConnections",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=(0,i.default)(H.prototype,"connectionProfileImages",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=(0,i.default)(H.prototype,"awayMessageSettingsModalIsOpen",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=(0,i.default)(H.prototype,"selectedConversations",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Me=(0,i.default)(H.prototype,"selectedConversationUrns",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ke=(0,i.default)(H.prototype,"isBulkActionsMode",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=(0,i.default)(H.prototype,"searchTerm",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oe=(0,i.default)(H.prototype,"inboxType",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ve.PRIMARY}}),Ie=(0,i.default)(H.prototype,"isInMinimizeTransition",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),De=(0,i.default)(H.prototype,"kindnessReminderShown",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(H.prototype,"switchInboxTab",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"switchInboxTab"),H.prototype),(0,i.default)(H.prototype,"loadConversationsByFilter",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"loadConversationsByFilter"),H.prototype),(0,i.default)(H.prototype,"refetchInboxData",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"refetchInboxData"),H.prototype),(0,i.default)(H.prototype,"infiniteScroll",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"infiniteScroll"),H.prototype),(0,i.default)(H.prototype,"loadMore",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"loadMore"),H.prototype),(0,i.default)(H.prototype,"newConversation",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"newConversation"),H.prototype),(0,i.default)(H.prototype,"retryLoadMore",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"retryLoadMore"),H.prototype),(0,i.default)(H.prototype,"stopEvtPropagation",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"stopEvtPropagation"),H.prototype),(0,i.default)(H.prototype,"toggleMinimize",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"toggleMinimize"),H.prototype),(0,i.default)(H.prototype,"openMessageRequestConversationList",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"openMessageRequestConversationList"),H.prototype),(0,i.default)(H.prototype,"backToInboxFromMessageRequestList",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"backToInboxFromMessageRequestList"),H.prototype),(0,i.default)(H.prototype,"openDeclinedMessageRequestConversationList",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"openDeclinedMessageRequestConversationList"),H.prototype),(0,i.default)(H.prototype,"openAwayMessageSettingsModal",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"openAwayMessageSettingsModal"),H.prototype),(0,i.default)(H.prototype,"openMessagingSettingsModal",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"openMessagingSettingsModal"),H.prototype),(0,i.default)(H.prototype,"onListBubbleItemClick",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"onListBubbleItemClick"),H.prototype),(0,i.default)(H.prototype,"enterBulkActionsMode",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"enterBulkActionsMode"),H.prototype),(0,i.default)(H.prototype,"onExitBulkActionsMode",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"onExitBulkActionsMode"),H.prototype),(0,i.default)(H.prototype,"willExecuteBulkAction",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"willExecuteBulkAction"),H.prototype),(0,i.default)(H.prototype,"didExecuteBulkAction",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"didExecuteBulkAction"),H.prototype),(0,i.default)(H.prototype,"applyFilter",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"applyFilter"),H.prototype),(0,i.default)(H.prototype,"clearFilters",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"clearFilters"),H.prototype),(0,i.default)(H.prototype,"impressionKindnessReminder",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"impressionKindnessReminder"),H.prototype),(0,i.default)(H.prototype,"clickKindnessReminder",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"clickKindnessReminder"),H.prototype),(0,i.default)(H.prototype,"onSearchTermChange",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"onSearchTermChange"),H.prototype),(0,i.default)(H.prototype,"createListBubbleItemImpressionEvent",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"createListBubbleItemImpressionEvent"),H.prototype),(0,i.default)(H.prototype,"onKindnessReminderWidgetDismiss",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"onKindnessReminderWidgetDismiss"),H.prototype),(0,i.default)(H.prototype,"messageRequestListHeaderOnGoBack",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"messageRequestListHeaderOnGoBack"),H.prototype),(0,i.default)(H.prototype,"copyRealtimePayload",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"copyRealtimePayload"),H.prototype),(0,i.default)(H.prototype,"openBubbleByConversationUrn",[c.action],Object.getOwnPropertyDescriptor(H.prototype,"openBubbleByConversationUrn"),H.prototype),H)
e.default=qe;(0,a.setComponentTemplate)(Ee,qe)}))
define("msg-overlay/components/list-bubble-search",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","ember","@ember/service","rsvp","@ember/object","msg-shared/utils/scroll-blocker-helper","msg-shared/utils/constants","ember-batcher","global-helpers/helpers/name","global-utils/utils/ember-cli-search-typeahead-utils","ember-lifeline","msg-shared/helpers/get-participant-names","@glimmer/component","@glimmer/tracking","msg-ui/viewdata/conversation-list-item-viewdata","tracked-toolbox"],(function(e,t,n,i,o,a,r,s,l,c,u,d,m,p,g,b,h,v,y,f,_,w){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var C,S,M,k,R,O,I,D,E,x,P,T,N,A,B,L,z,F,j,U,V,q,H,K,Y,G,W,J,X,Q
const $=(0,r.createTemplateFactory)({id:"QgB2qKYq",block:'[[[11,0],[16,0,[29,["msg-overlay-list-bubble-search\\n    ",[52,[30,0,["shouldShowSearchContent"]]," msg-overlay-list-bubble-search--search-content-visible"]]]],[4,[38,1],[[30,0,["onElementInsert"]]],null],[4,[38,2],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search",[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n"],[41,[30,1],[[[1,"    "],[10,0],[14,0,"msg-overlay-list-bubble-search__input-container"],[12],[1,"\\n"],[1,"      "],[10,"label"],[14,0,"a11y-text"],[14,"for","msg-overlay-list-bubble-search__search-typeahead-input"],[12],[1,"\\n        "],[1,[28,[35,5],["i18n_a11y_search_hint_text","msg-overlay/components/list-bubble-search"],null]],[1,"\\n      "],[13],[1,"\\n      "],[1,[28,[35,6],null,[["type","class","size"],["search-icon","msg-overlay-list-search__search-icon","small"]]]],[1,"\\n      "],[8,[39,7],[[24,1,"msg-overlay-list-bubble-search__search-typeahead-input"],[24,0,"msg-overlay-list-bubble-search__search-typeahead-input"],[16,"placeholder",[28,[37,5],["i18n_find_a_connection","msg-overlay/components/list-bubble-search"],null]],[24,"autocomplete","off"],[4,[38,8],["input",[30,0,["onInputChange"]]],null],[4,[38,8],["focusin",[30,0,["onInputFocusIn"]]],null],[4,[38,8],["focusout",[30,0,["onInputFocusOut"]]],null],[4,[38,8],["keyup",[30,0,["onKeyUp"]]],null]],[["@value","@insert-newline"],[[30,0,["searchTerm"]],[30,0,["onInputEnterKeyRelease"]]]],null],[1,"\\n      "],[8,[39,9],null,[["@class","@placement","@justification","@isOpen","@onVisibilityChange"],["msg-overlay-list-bubble__filters-dropdown","bottom","right",[30,0,["isConvoFiltersDropdownOpen"]],[30,0,["toggleConvoFilters"]]]],[["default"],[[[[1,"\\n        "],[8,[30,2,["dropdown-trigger"]],null,[["@class","@tabindex"],["msg-overlay-list-bubble__filters-btn","0"]],[["default"],[[[[1,"\\n          "],[1,[28,[35,6],null,[["type","size","a11y-text"],["filter-icon","small",[28,[37,5],["i18n_filter_messages_by","msg-overlay/components/list-bubble-search"],null]]]]],[1,"\\n        "]],[]]]]],[1,"\\n        "],[8,[30,2,["dropdown-content"]],null,[["@classNames","@arrowDir"],["msg-overlay-list-bubble__filters-dropdown-content","right"]],[["default"],[[[[1,"\\n          "],[10,"ul"],[12],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n"],[1,"              "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[52,[30,3],false,true],[28,[37,11],[[30,0,["applyFilter"]],""],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_all_messages","msg-overlay/components/list-bubble-search"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"ARCHIVED"],null],[28,[37,11],[[30,0,["applyFilter"]],"ARCHIVED"],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_archived","msg-overlay/components/list-bubble-search"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"CONNECTIONS"],null],[28,[37,11],[[30,0,["applyFilter"]],"CONNECTIONS"],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_connections","msg-overlay/components/list-bubble-search"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n"],[41,[30,0,["isStarringEnabled"]],[[[1,"              "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n                "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"STARRED"],null],[28,[37,11],[[30,0,["applyFilter"]],"STARRED"],null],"button"]],[["default"],[[[[1,"\\n                  "],[1,[28,[35,5],["i18n_starred","msg-overlay/components/list-bubble-search"],null]],[1,"\\n                "]],[]]]]],[1,"\\n              "],[13],[1,"\\n"]],[]],null],[1,"            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"UNREAD"],null],[28,[37,11],[[30,0,["applyFilter"]],"UNREAD"],null],"button"]],[["default"],[[[[1,"\\n                "],[10,0],[14,0,"display-flex align-items-center justify-space-between"],[12],[1,"\\n                  "],[10,1],[12],[1,"\\n                    "],[1,[28,[35,5],["i18n_unread","msg-overlay/components/list-bubble-search"],null]],[1,"\\n                  "],[13],[1,"\\n                "],[13],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"INMAIL"],null],[28,[37,11],[[30,0,["applyFilter"]],"INMAIL"],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_inmail","msg-overlay/components/list-bubble-search"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"BLOCKED"],null],[28,[37,11],[[30,0,["applyFilter"]],"BLOCKED"],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_spam","msg-overlay/components/list-bubble-search"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n        "]],[]]]]],[1,"\\n      "]],[2]]]]],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["shouldShowSelectedFilter"]],[[[1,"    "],[18,9,[[28,[37,14],null,[["filterSection"],[[50,"dummy-yield-wrapper@dummy-yield-wrapper",0,null,null]]]]]],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["hasActiveSearch"]],[[[1,"    "],[8,[39,16],null,[["@icon","@size","@circle","@class","@text","@type","@click"],["cancel-icon","small",true,"msg-search-form__cancel-search",[28,[37,5],["i18n_cancel_search","msg-overlay/components/list-bubble-search"],null],"tertiary",[30,4]]],null],[1,"\\n"]],[]],null],[1,"  "],[10,0],[15,0,[29,["relative display-flex justify-center flex-column overflow-hidden\\n      ",[52,[51,[30,0,["shouldShowSearchContent"]]]," hidden"]]]],[12],[1,"\\n    "],[10,0],[14,0,"msg-overlay-list-bubble-search-content"],[12],[1,"\\n"],[41,[30,0,["searchPerformed"]],[[[41,[30,0,["shouldShowSearchLoadingView"]],[[[1,"          "],[8,[39,18],null,[["@size","@class"],["small","msg-overlay-list-bubble-search__loading-state"]],null],[1,"\\n"]],[]],[[[1,"          "],[11,0],[24,0,"msg-overlay-list-bubble-search__search-result-container"],[4,[38,8],["mousedown",[30,0,["noOp"]]],null],[12],[1,"\\n"],[41,[30,0,["shouldShowNoResultView"]],[[[1,"              "],[11,0],[24,0,"msg-overlay-list-bubble-search__no-result-container text-align-center"],[4,[38,2],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search_no_results",[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                "],[10,0],[14,0,"msg-overlay-list-bubble__illustration msg-overlay-list-bubble-search__no-result-illustration"],[12],[13],[1,"\\n                "],[10,2],[14,0,"ph2 t-14 t-black t-normal"],[12],[1,"\\n                  "],[1,[28,[35,5],["i18n_we_did_not_find_anything","msg-overlay/components/list-bubble-search"],[["searchTerm"],[[30,0,["searchTerm"]]]]]],[1,"\\n                "],[13],[1,"\\n              "],[13],[1,"\\n"]],[]],[[[41,[30,0,["displayedConnections","length"]],[[[1,"                "],[11,"header"],[24,0,"msg-overlay-list-bubble__list-header msg-overlay-list-bubble-search__result-header"],[4,[38,2],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search_typeahead_results",[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                  "],[10,"h5"],[14,0,"msg-overlay-list-bubble__list-header-title t-12 t-black--light t-bold truncate"],[12],[1,"\\n                    "],[1,[28,[35,5],["i18n_connections_matched","msg-overlay/components/list-bubble-search"],null]],[1,"\\n                  "],[13],[1,"\\n                "],[13],[1,"\\n                "],[10,"ul"],[14,0,"msg-overlay-list-bubble-search__connection-search-result-list"],[12],[1,"\\n"],[42,[28,[37,20],[[28,[37,20],[[30,0,["displayedConnections"]]],null]],null],null,[[[1,"                    "],[10,"li"],[15,0,[29,["msg-overlay-list-bubble-search__list-item display-flex align-items-center pv2 ph3\\n                        ",[52,[28,[37,12],[[30,6],[30,0,["highlightedItemIndex"]]],null],"msg-overlay-list-bubble-search__list-item--selected"]]]],[12],[1,"\\n                      "],[8,[39,21],null,[["@itemIndex","@profile","@caption","@onClick","@onMouseMove"],[[30,6],[30,5,["miniProfile"]],[28,[37,22],[[30,5,["subtext"]],[30,5,["caption"]]],null],[28,[37,11],[[30,0,["onConnectionSearchResultSelect"]],[30,5,["miniProfile"]]],null],[28,[37,11],[[30,0,["onListItemMouseMove"]],[30,6],false],null]]],null],[1,"\\n                    "],[13],[1,"\\n"]],[5,6]],null],[1,"                "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["matchedConversations","length"]],[[[1,"                "],[11,"header"],[24,0,"msg-overlay-list-bubble__list-header msg-overlay-list-bubble-search__result-header"],[4,[38,2],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search_results",[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                  "],[10,"h5"],[14,0,"msg-overlay-list-bubble__list-header-title t-12 t-black--light t-bold truncate"],[12],[1,"\\n                    "],[1,[28,[35,5],["i18n_conversation_history","msg-overlay/components/list-bubble-search"],null]],[1,"\\n                  "],[13],[1,"\\n                "],[13],[1,"\\n"],[1,"                "],[10,0],[14,0,"msg-overlay-list-bubble-search__content-search-result-list"],[12],[1,"\\n"],[42,[28,[37,20],[[28,[37,20],[[30,0,["conversationListItemViewDataElements"]]],null]],null],null,[[[1,"                    "],[11,0],[4,[38,23],[[28,[37,11],[[30,0,["createSearchItemImpressionEvent"]],[30,7],[30,8]],null]],[["routeName","currentRoute"],[[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                      "],[8,[39,24],[[16,0,[52,[28,[37,12],[[30,8],[30,0,["highlightedConversationResultIndex"]]],null],"msg-overlay-list-bubble__convo-item--selected"]]],[["@viewData","@convoIndex","@openBubble","@onMouseMove","@disableBulkActions"],[[30,7],[30,8],[30,0,["onContentSearchResultSelect"]],[28,[37,11],[[30,0,["onListItemMouseMove"]],[30,8],true],null],true]],null],[1,"\\n                    "],[13],[1,"\\n"]],[7,8]],null],[41,[30,0,["loadMoreInProgress"]],[[[1,"                    "],[8,[39,18],null,[["@size"],["small"]],null],[1,"\\n"]],[]],null],[41,[30,0,["shouldLoadMoreConversations"]],[[[1,"                    "],[8,[39,25],null,[["@inView","@rootSelector"],[[30,0,["infiniteScroll"]],".msg-overlay-list-bubble-search-content"]],null],[1,"\\n"]],[]],null],[1,"                "],[13],[1,"\\n"]],[]],null]],[]]],[1,"          "],[13],[1,"\\n"]],[]]]],[]],[[[1,"        "],[10,0],[14,0,"msg-overlay-list-bubble-search__history-placeholder-container text-align-center"],[12],[1,"\\n          "],[10,0],[14,0,"msg-overlay-list-bubble__illustration msg-overlay-list-bubble-search__history-placeholder-illustration"],[12],[13],[1,"\\n          "],[10,2],[14,0,"t-14 t-black t-normal ph2"],[12],[1,"\\n            "],[1,[28,[35,5],["i18n_search_your_messages","msg-overlay/components/list-bubble-search"],null]],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[]]],[1,"    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],["@showSearchInput","dropdown","@currentConvosFilter","@clearActiveSearch","connection","index","viewData","index","&default"],false,["if","did-insert","ember-cli-pemberly-tracking@track-render","get","-get-dynamic-var","t","artdeco-icons-web@li-icon","input","on","artdeco-dropdown@artdeco-dropdown","artdeco-dropdown@artdeco-dropdown-item","fn","global-helpers@eq","yield","hash","component","artdeco-button@artdeco-button","unless","artdeco-loader@artdeco-loader","each","-track-array","msg-overlay@search-connection-item","global-helpers@or","ember-cli-pemberly-tracking@track-impression","msg-overlay@overlay-conversation-list-item-presenter","msg-ui@visible-beacon"]]',moduleName:"msg-overlay/components/list-bubble-search.hbs",isStrictMode:!1}),{KEYCODES:Z,CONTROL_INTERACTION_KEYS:ee}=m.default,te=".msg-overlay-list-bubble-search__search-typeahead-input",ne=".msg-overlay-list-bubble-search-content",ie=".msg-overlay-list-bubble-search__list-item",oe=new Set(["ARCHIVED","CONNECTIONS","STARRED","UNREAD","INMAIL","BLOCKED"])
let ae=(C=(0,l.inject)("lix"),S=(0,l.inject)("i18n"),M=(0,l.inject)("tracking"),k=(0,l.inject)("global-services@a11y-notification"),R=(0,l.inject)("msg-data@data-manager"),O=(0,l.inject)("search-services@search-tracking-v2"),I=(0,l.inject)("authentication@authenticated-user"),D=(0,l.inject)("date"),E=(0,l.inject)("formatter"),x=class extends y.default{constructor(){super(...arguments);(0,t.default)(this,"lix",P,this);(0,t.default)(this,"i18n",T,this);(0,t.default)(this,"tracking",N,this);(0,t.default)(this,"a11yNotification",A,this);(0,t.default)(this,"msgDataManager",B,this);(0,t.default)(this,"searchTrackingV2",L,this);(0,t.default)(this,"authenticatedUser",z,this);(0,t.default)(this,"dateService",F,this);(0,t.default)(this,"formatter",j,this);(0,t.default)(this,"connectionSearchPerformed",U,this);(0,t.default)(this,"contentSearchPerformed",V,this);(0,t.default)(this,"inputHasFocus",q,this);(0,t.default)(this,"matchedConnections",H,this);(0,t.default)(this,"matchedConversations",K,this);(0,t.default)(this,"shouldShowSearchLoadingView",Y,this);(0,t.default)(this,"collection",G,this);(0,t.default)(this,"highlightedItemIndex",W,this);(0,t.default)(this,"searchTerm",J,this);(0,t.default)(this,"isConvoFiltersDropdownOpen",X,this);(0,t.default)(this,"loadMoreInProgress",Q,this);(0,n.default)(this,"collectionName",void 0);(0,n.default)(this,"searchField",void 0);(0,n.default)(this,"hasMoreContentSearchResults",!1);(0,n.default)(this,"scrollSection",void 0)}get isStarringEnabled(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-message-starring")}get searchPerformed(){return this.connectionSearchPerformed||this.contentSearchPerformed}get shouldShowSelectedFilter(){const{currentConvosFilter:e}=this.args
return e&&oe.has(e)}get shouldShowSearchContent(){return this.inputHasFocus}get displayedConnections(){return this.matchedConnections.slice(0,3)}get shouldShowNoResultView(){return 0===this.displayedResultsLength&&this.connectionSearchPerformed&&this.contentSearchPerformed}get displayedResultsLength(){return this.displayedConnections.length+this.matchedConversations.length}get listItemCount(){return this.searchPerformed&&this.displayedResultsLength}get highlightedConversationResultIndex(){return this.highlightedItemIndex-this.displayedConnections.length}get searchResultConversationCollection(){return this.msgDataManager.inboxManager.getConversationCollectionByName(this.collectionName)}onElementInsert(e){this.currentElement=e
this.searchField=e.querySelector(te)
this.scrollSection=e.querySelector(ne);(0,d.default)(this,this.scrollSection)}_performSearch(e){this.shouldShowSearchLoadingView=!0
const t=(new Date).getTime()
this.lastRequestTime=t
const n=[this.msgDataManager.fetchTypeaheadResults(e).then((e=>this._handleConnectionSearchResults(e,t)))],i={q:"search",keywords:e,createdBefore:Date.now()}
"ARCHIVED"===this.args.currentConvosFilter?i.folders=[this.args.currentConvosFilter]:this.args.currentConvosFilter&&(i.filters=[this.args.currentConvosFilter])
this.collectionName=`${e}-${Date.now()}`
const o=this.msgDataManager.inboxManager.loadCollection(this.collectionName,i).then((()=>{this._handleConversationSearchResults(this.searchResultConversationCollection.data,t)}))
n.push(o);(0,c.all)(n).then((()=>{if(!this.isDestroying){this.shouldShowSearchLoadingView=!1
0!==this.displayedResultsLength&&this.a11yNotify("i18n_a11y_navigate_search_results")}}))}_handleSearchTermChange(e){var t,n
const i=e?e.trim():"",o=i.length>0
this.highlightedItemIndex=-1
o?(0,h.debounceTask)(this,"_performSearch",i,150):this._clearSearchResults()
null===(t=(n=this.args).onSearchTermChange)||void 0===t||t.call(n,i)}_handleConversationSearchResults(e,t){if(t!==this.lastRequestTime||0===this.searchTerm.length)return(0,c.reject)()
this.contentSearchPerformed=!0
this.matchedConversations=e
this.hasMoreContentSearchResults=e.length>0
this.a11yNotify("i18n_a11y_conversation_results_found",{resultsLength:e.length})
return(0,c.resolve)()}_handleConnectionSearchResults(e,t){if(t!==this.lastRequestTime||0===this.searchTerm.length)return(0,c.reject)()
this.connectionSearchPerformed=!0
this.matchedConnections=e
this.a11yNotify("i18n_a11y_connection_results_found",{resultsLength:e.length})
return(0,c.resolve)()}_clearSearchResults(){this.connectionSearchPerformed=!1
this.matchedConnections=[]
this.contentSearchPerformed=!1
this.matchedConversations=[]}_clearInputField(){this.searchTerm=""
this._handleSearchTermChange("")}_moveSelectedItem(e){const t=this.listItemCount
if(0===t)return
const n=this.highlightedItemIndex
let i
i=-1===n?1===e?0:t-1:(n+e+t)%t
s.default.testing&&console.log("[MSG-56428] logging for unstable search interaction test: ","currIndex: ",n," newIndex: ",i)
this.highlightedItemIndex=i
this._a11yNotifyItemSelectionChange();(0,p.mutateDOM)((()=>{if(!this.isDestroying)if(0===i)this.scrollSection.scrollTop=0
else{const e=this.currentElement.querySelectorAll(ie)[i]
if(e){const t=e.offsetTop,n=t+e.offsetHeight
n>this.scrollSection.offsetHeight+this.scrollSection.scrollTop?this.scrollSection.scrollTop=n-this.scrollSection.offsetHeight:t<this.scrollSection.scrollTop&&(this.scrollSection.scrollTop=t)}}}))}_a11yNotifyItemSelectionChange(){if(this.searchPerformed)if(this.highlightedItemIndex<this.displayedConnections.length)this.a11yNotify("i18n_a11y_search_result_connection_fullname",{connectionName:(0,g.getName)((0,u.get)(this.displayedConnections[this.highlightedItemIndex],"miniProfile"))})
else{const e=this.matchedConversations[this.highlightedConversationResultIndex]
let t
t="SPONSORED_INMAIL"===(0,u.get)(e,"latestEvent.subtype")?"i18n_a11y_search_result_spinmail_from_name":(0,u.get)(e,"groupChat")?"i18n_a11y_search_result_conversation_names":"i18n_a11y_search_result_participant_full_name"
this.a11yNotify(t,{names:(0,v.getParticipantNames)(e)})}}_openConnectionSearchResult(e){this._clearInputField()
this.args.openNewConversation({recipients:[e]})
this.tracking.fireInteractionEvent(ee.SELECT_CONNECTION_SEARCH_RESULT)}_openContentSearchResult(e){var t
const n=(0,u.get)(e,"backendUrn"),i=null===(t=this.searchResultConversationCollection)||void 0===t?void 0:t.collectionMetadata
this._clearInputField()
this.args.openBubble(e)
this.tracking.fireInteractionEvent(ee.SELECT_CONTENT_SEARCH_RESULT)
i&&this.searchTrackingV2.trackAction("MESSAGING_VIEW_RESULT",(0,b.getResultTrackingInfo)(e,(0,u.get)(i,"rawSearchId"),(0,u.get)(i,"trackingIdMap")[n]))}onKeyUp(e){if(this.inputHasFocus)switch(e.keyCode){case Z.UP_ARROW:this._moveSelectedItem(-1)
e.preventDefault()
break
case Z.DOWN_ARROW:this._moveSelectedItem(1)
e.preventDefault()
break
case Z.ESC:this._clearInputField()}}infiniteScroll(){if(!this.hasMoreContentSearchResults)return(0,c.resolve)(!1)
this.loadMoreInProgress=!0
return this.msgDataManager.inboxManager.loadMore(this.collectionName).then((e=>{const t=e.length
if(!this.isDestroying){this.matchedConversations=this.searchResultConversationCollection.data
this.hasMoreContentSearchResults=t}return(0,c.resolve)(t)})).finally((()=>{this.loadMoreInProgress=!1}))}get shouldLoadMoreConversations(){return!(!this.matchedConversations||0===this.matchedConversations.length)&&(!this.searchResultConversationCollection.lastSetOfRecordsLoaded&&!this.loadMoreInProgress)}get conversationListItemViewDataElements(){const{msgDataManager:e,formatter:t,i18n:n}=this
return this.matchedConversations.map((i=>new _.default({conversation:(0,u.get)(i,"content"),authenticatedUserMiniProfile:(0,u.get)(this.authenticatedUser,"miniProfile"),msgDataManager:e,nowTimestamp:this.dateService.now(),formatter:t,i18n:n})))}a11yNotify(e,t){const n=this.i18n.lookupTranslation("components/msg-overlay@list-bubble-search",e)
this.a11yNotification.setTextInLiveRegion(n([t]))}toggleConvoFilters(e){this.isConvoFiltersDropdownOpen=e
this.tracking.fireInteractionEvent("overlay.filter_messages_by","SHORT_PRESS")}applyFilter(e){this.isConvoFiltersDropdownOpen=!1
if(this.args.currentConvosFilter!==e){this.args.onFilterApply(e)
this._handleSearchTermChange(this.searchTerm)}}clearFilters(){this.args.onClearFilters()
this._handleSearchTermChange(this.searchTerm)}onInputFocusIn(){this.inputHasFocus=!0;(0,p.mutateDOM)((()=>{this.isDestroying||(this.scrollSection.scrollTop=0)}))
this.tracking.fireInteractionEvent(ee.FOCUS_SEARCH_BOX)}onInputFocusOut(){this.inputHasFocus=!1}onInputEnterKeyRelease(){if(-1!==this.highlightedItemIndex&&this.searchPerformed){const e=this.displayedConnections.length
if(this.highlightedItemIndex<e){const e=this.displayedConnections[this.highlightedItemIndex]
this._openConnectionSearchResult((0,u.get)(e,"miniProfile"))}else{const e=this.matchedConversations[this.highlightedConversationResultIndex]
this._openContentSearchResult(e)}}}clearInputField(){this._clearInputField()
this.tracking.fireInteractionEvent(ee.CANCEL_SEARCH)}onConnectionSearchResultSelect(e){this._openConnectionSearchResult(e)}onContentSearchResultSelect(e){const t=this.matchedConversations.find((t=>(0,u.get)(t,"entityUrn")===e))
this._openContentSearchResult(t)}onInputChange(e){this.searchTerm=e.target.value
this._handleSearchTermChange(this.searchTerm)}onListItemMouseMove(e,t,n){if(this.lastX!==n.screenX||this.lastY!==n.screenY){this.highlightedItemIndex=t?e+this.displayedConnections.length:e
this.lastX=n.screenX
this.lastY=n.screenY}}createSearchItemImpressionEvent(e,t){var n
if(this.isDestroying)return[]
const i=null===(n=this.searchResultConversationCollection)||void 0===n?void 0:n.collectionMetadata
return i?{name:"SearchImpressionV2Event",body:{results:[{duration:0,entityUrn:e.entityUrn,gridPosition:{row:t+1,column:1},resultSize:{height:0,width:0},searchId:(0,u.get)(i,"rawSearchId"),trackingId:(0,u.get)(i,"trackingIdMap")[e.conversationBackendUrn],visibleHeight:0,visibleTime:0,isCacheHit:!1}]}}:[]}noOp(e){e.preventDefault()}},P=(0,i.default)(x.prototype,"lix",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,i.default)(x.prototype,"i18n",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=(0,i.default)(x.prototype,"tracking",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,i.default)(x.prototype,"a11yNotification",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=(0,i.default)(x.prototype,"msgDataManager",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,i.default)(x.prototype,"searchTrackingV2",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=(0,i.default)(x.prototype,"authenticatedUser",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=(0,i.default)(x.prototype,"dateService",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=(0,i.default)(x.prototype,"formatter",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=(0,i.default)(x.prototype,"connectionSearchPerformed",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=(0,i.default)(x.prototype,"contentSearchPerformed",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q=(0,i.default)(x.prototype,"inputHasFocus",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H=(0,i.default)(x.prototype,"matchedConnections",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=(0,i.default)(x.prototype,"matchedConversations",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=(0,i.default)(x.prototype,"shouldShowSearchLoadingView",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=(0,i.default)(x.prototype,"collection",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=(0,i.default)(x.prototype,"highlightedItemIndex",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),J=(0,i.default)(x.prototype,"searchTerm",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=(0,i.default)(x.prototype,"isConvoFiltersDropdownOpen",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=(0,i.default)(x.prototype,"loadMoreInProgress",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(x.prototype,"onElementInsert",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"onElementInsert"),x.prototype),(0,i.default)(x.prototype,"onKeyUp",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"onKeyUp"),x.prototype),(0,i.default)(x.prototype,"infiniteScroll",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"infiniteScroll"),x.prototype),(0,i.default)(x.prototype,"conversationListItemViewDataElements",[w.cached],Object.getOwnPropertyDescriptor(x.prototype,"conversationListItemViewDataElements"),x.prototype),(0,i.default)(x.prototype,"toggleConvoFilters",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"toggleConvoFilters"),x.prototype),(0,i.default)(x.prototype,"applyFilter",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"applyFilter"),x.prototype),(0,i.default)(x.prototype,"clearFilters",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"clearFilters"),x.prototype),(0,i.default)(x.prototype,"onInputFocusIn",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"onInputFocusIn"),x.prototype),(0,i.default)(x.prototype,"onInputFocusOut",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"onInputFocusOut"),x.prototype),(0,i.default)(x.prototype,"onInputEnterKeyRelease",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"onInputEnterKeyRelease"),x.prototype),(0,i.default)(x.prototype,"clearInputField",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"clearInputField"),x.prototype),(0,i.default)(x.prototype,"onConnectionSearchResultSelect",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"onConnectionSearchResultSelect"),x.prototype),(0,i.default)(x.prototype,"onContentSearchResultSelect",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"onContentSearchResultSelect"),x.prototype),(0,i.default)(x.prototype,"onInputChange",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"onInputChange"),x.prototype),(0,i.default)(x.prototype,"onListItemMouseMove",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"onListItemMouseMove"),x.prototype),(0,i.default)(x.prototype,"createSearchItemImpressionEvent",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"createSearchItemImpressionEvent"),x.prototype),(0,i.default)(x.prototype,"noOp",[u.action],Object.getOwnPropertyDescriptor(x.prototype,"noOp"),x.prototype),x)
e.default=ae;(0,a.setComponentTemplate)($,ae)}))
define("msg-overlay/components/list-bubble",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/runloop","@ember/service","@ember/object","extended/config/environment","msg-shared/utils/constants","msg-ui/utils/realtime-onboarding","global-utils/utils/is-browser","rsvp","ember-cli-pemberly-tracking/utils/tracking","msg-shared/utils/get-participant-presence-statuses","ember-lifeline","@glimmer/component","@glimmer/tracking","tracked-toolbox","@ember/object/internals"],(function(e,t,n,i,o,a,r,s,l,c,u,d,m,p,g,b,h,v,y,f,_,w){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var C,S,M,k,R,O,I,D,E,x,P,T,N,A,B,L,z,F,j,U,V,q,H,K,Y,G,W,J,X,Q,$,Z,ee,te,ne,ie,oe,ae,re,se,le,ce,ue,de,me,pe,ge,be,he,ve,ye,fe,_e,we,Ce,Se,Me,ke,Re
const Oe=(0,r.createTemplateFactory)({id:"E+etTs3+",block:'[[[11,0],[24,"tabindex","-1"],[16,0,[29,["msg-overlay-list-bubble\\n    ",[52,[30,0,["isMinimized"]],"msg-overlay-list-bubble--is-minimized"],"\\n    ",[52,[30,0,["isInMinimizeTransition"]],"msg-overlay-list-bubble--during-transition"],"\\n    ml4"]]],[4,[38,1],null,null],[4,[38,2],["transitionend",[28,[37,3],[[30,0],"isInMinimizeTransition",false],null]],null],[12],[1,"\\n  "],[10,"header"],[14,0,"msg-overlay-bubble-header"],[12],[1,"\\n    "],[10,0],[15,0,[29,["msg-overlay-bubble-header__badge-container\\n        ",[52,[30,0,["hasBadge"]],"msg-overlay-bubble-header--inverse msg-overlay-bubble-header--is-badged"]]]],[12],[13],[1,"\\n    "],[8,[39,4],null,null,null],[1,"\\n"],[1,"    "],[11,0],[24,0,"msg-overlay-bubble-header__details flex-row align-items-center ml1"],[4,[38,2],["click",[30,0,["toggleMinimize"]]],null],[4,[38,5],[[30,0,["toggleMinimizeTrackingControlName"]]],null],[12],[1,"\\n      "],[8,[39,6],null,[["@alt","@title","@miniProfile","@size"],[[30,0,["authenticatedUser","miniProfile","fullName"]],[30,0,["authenticatedUser","miniProfile","fullName"]],[30,0,["authenticatedUser","miniProfile"]],1]],null],[1,"\\n      "],[10,"button"],[14,0,"msg-overlay-bubble-header__button truncate ml2"],[14,4,"button"],[12],[1,"\\n        "],[10,1],[15,0,[29,["truncate t-14 t-bold\\n            ",[52,[30,0,["hasBadge"]],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n          "],[10,1],[14,"aria-hidden","true"],[12],[1,"\\n            "],[1,[28,[35,7],["messaging","msg-overlay/components/list-bubble"],null]],[1,"\\n          "],[13],[1,"\\n          "],[10,1],[14,0,"visually-hidden"],[12],[1,"\\n            "],[1,[52,[30,0,["isMinimized"]],[28,[37,7],["a11y_open_overlay","msg-overlay/components/list-bubble"],null],[28,[37,7],["a11y_minimize_overlay","msg-overlay/components/list-bubble"],null]]],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n\\n"],[41,[30,0,["hasBadge"]],[[[1,"        "],[10,"mark"],[14,0,"msg-overlay-bubble-header__unread-count"],[14,"aria-hidden","true"],[12],[1,"\\n          "],[10,"abbr"],[15,"title",[28,[37,7],["a11y_unseen_messages","msg-overlay/components/list-bubble"],[["count"],[[30,0,["msgOverlayService","unseenMsgCount"]]]]]],[12],[1,"\\n            "],[1,[30,0,["msgOverlayService","unseenMsgCount"]]],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[41,[30,0,["enableRealtimeConnectionStatus"]],[[[1,"        "],[10,0],[12],[1,"\\n          "],[1,[28,[35,8],null,[["type","class"],["flash",[28,[37,9],["msg-overlay-bubble-header__realtime-indicator ",[30,0,["realtimeStatusClassName"]]],null]]]]],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[1,"    "],[13],[1,"\\n    "],[10,0],[14,0,"msg-overlay-bubble-header__controls display-flex"],[12],[1,"\\n"],[1,"      "],[8,[39,10],null,[["@isOpen","@onVisibilityChange","@placement","@justification","@onClick","@shouldTriggerRetainFocus"],[[30,0,["isHeaderDropdownMenuOpen"]],[28,[37,3],[[30,0],"isHeaderDropdownMenuOpen"],null],[30,0,["headerDropdownMenuPlacement"]],"right",[30,0,["stopEvtPropagation"]],false]],[["default"],[[[[1,"\\n        "],[8,[30,1,["dropdown-trigger"]],[[4,[38,5],["overlay.dropdown_menu"],null]],[["@class"],[[29,["artdeco-button artdeco-button--1 artdeco-button--circle ",[52,[30,0,["hasBadge"]],"artdeco-button--primary","artdeco-button--muted artdeco-button--tertiary"]]]]],[["default"],[[[[1,"\\n          "],[1,[28,[35,8],null,[["a11y-text","type","size","color"],[[28,[37,7],["i18n_dropdown_menu_description","msg-overlay/components/list-bubble"],null],"overflow-web-ios","small",true]]]],[1,"\\n        "]],[]]]]],[1,"\\n        "],[10,0],[14,0,"msg-overlay-bubble-header__dropdown-container"],[12],[1,"\\n          "],[8,[30,1,["dropdown-content"]],null,[["@arrowDir"],["right"]],[["default"],[[[[1,"\\n            "],[10,"ul"],[14,0,"white-space-nowrap"],[12],[1,"\\n"],[41,[30,0,["showManageConversationsButtonInHeaderDropdown"]],[[[1,"                "],[8,[39,11],[[4,[38,5],["overlay.enter_bulk_selection"],null]],[["@itemSelected","@role"],[[30,0,["enterBulkActionsMode"]],"button"]],[["default"],[[[[1,"\\n                  "],[10,0],[14,0,"display-flex align-items-center"],[12],[1,"\\n                    "],[10,1],[12],[1,"\\n                      "],[1,[28,[35,7],["i18n_manage_conversations","msg-overlay/components/list-bubble"],null]],[1,"\\n                    "],[13],[1,"\\n                  "],[13],[1,"\\n                "]],[]]]]],[1,"\\n"]],[]],null],[1,"              "],[8,[39,11],[[4,[38,5],["overlay.connection_list_settings_from_dropdown"],null]],[["@itemSelected","@role"],[[30,0,["openMessagingSettingsModal"]],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,7],["i18n_messaging_settings","msg-overlay/components/list-bubble"],null]],[1,"\\n              "]],[]]]]],[1,"\\n"],[41,[51,[30,0,["enableFocusedInbox"]]],[[[41,[30,0,["showMessageRequestInboxInHeaderDropdown"]],[[[1,"                  "],[8,[39,11],[[4,[38,5],["overlay.overflow_view_message_request_inbox"],null]],[["@itemSelected","@role"],[[30,0,["openMessageRequestConversationList"]],"button"]],[["default"],[[[[1,"\\n                    "],[1,[28,[35,7],["i18n_message_request_inbox","msg-overlay/components/list-bubble"],null]],[1,"\\n                  "]],[]]]]],[1,"\\n"]],[]],null]],[]],null],[1,"\\n"],[41,[28,[37,13],[[30,0,["currentConvosFilter"]],"MESSAGE_REQUEST_PENDING"],null],[[[1,"                "],[8,[39,11],[[4,[38,5],["overlay.view_declined_message_requests"],null]],[["@itemSelected","@role"],[[30,0,["openDeclinedMessageRequestConversationList"]],"button"]],[["default"],[[[[1,"\\n                  "],[1,[28,[35,7],["i18n_declined_message_requests","msg-overlay/components/list-bubble"],null]],[1,"\\n                "]],[]]]]],[1,"\\n"]],[]],null],[1,"              "],[8,[39,11],null,[["@itemSelected","@role"],[[30,0,["openAwayMessageSettingsModal"]],"button"]],[["default"],[[[[1,"\\n                "],[1,[52,[30,0,["msgDataManager","awayMessageSettings","length"]],[28,[37,7],["i18n_update_away_message","msg-overlay/components/list-bubble"],null],[28,[37,7],["i18n_set_away_message","msg-overlay/components/list-bubble"],null]]],[1,"\\n              "]],[]]]]],[1,"\\n"],[41,[30,0,["isCompanyUser"]],[[[1,"                "],[8,[39,11],null,[["@itemSelected","@role"],[[30,0,["copyRealtimePayload"]],"button"]],[["default"],[[[[1,"\\n                  "],[1,[28,[35,7],["i18n_copy_realtime_payload","msg-overlay/components/list-bubble"],null]],[1,"\\n                "]],[]]]]],[1,"\\n"]],[]],null],[1,"            "],[13],[1,"\\n          "]],[]]]]],[1,"\\n        "],[13],[1,"\\n      "]],[1]]]]],[1,"\\n\\n"],[1,"      "],[8,[39,14],[[4,[38,5],["overlay.compose_message"],null]],[["@text","@type","@color","@circle","@size","@icon","@class","@click"],[[28,[37,7],["a11y_compose","msg-overlay/components/list-bubble"],null],[52,[30,0,["hasBadge"]],"primary","tertiary"],[52,[30,0,["hasBadge"]],"default","muted"],true,1,"compose","msg-overlay-bubble-header__control msg-overlay-bubble-header__control--new-convo-btn",[30,0,["newConversation"]]]],null],[1,"\\n\\n"],[1,"      "],[8,[39,14],[[4,[38,5],[[52,[30,0,["isMinimized"]],"overlay_maximize_inbox","overlay_minimize_inbox"]],null]],[["@type","@color","@text","@circle","@size","@icon","@class","@click"],[[52,[30,0,["hasBadge"]],"primary","tertiary"],[52,[30,0,["hasBadge"]],"default","muted"],[52,[30,0,["isMinimized"]],[28,[37,7],["a11y_open_overlay","msg-overlay/components/list-bubble"],null],[28,[37,7],["a11y_minimize_overlay","msg-overlay/components/list-bubble"],null]],true,1,[52,[30,0,["isMinimized"]],"chevron-up-icon","chevron-down"],"msg-overlay-bubble-header__control msg-overlay-bubble-header__control--new-convo-btn",[30,0,["toggleMinimize"]]]],null],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[41,[30,0,["shouldRenderContent"]],[[[41,[30,0,["isBulkActionsMode"]],[[[1,"      "],[8,[39,15],null,[["@willExecuteBulkAction","@didExecuteBulkAction","@onExitBulkActionsMode","@isOverlay","@selectedConversationUrns"],[[30,0,["willExecuteBulkAction"]],[30,0,["didExecuteBulkAction"]],[30,0,["onExitBulkActionsMode"]],true,[30,0,["selectedConversationUrns"]]]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["enableOverlaySearchPreWork"]],[[[1,"      "],[8,[39,16],null,[["@openNewConversation","@openBubble","@currentConvosFilter","@onFilterApply","@onClearFilters","@showSearchInput","@onSearchTermChange"],[[30,2],[30,3],[30,0,["currentConvosFilter"]],[30,0,["applyFilter"]],[30,0,["clearFilters"]],[30,0,["showSearchInput"]],[30,0,["onSearchTermChange"]]]],[["default"],[[[[1,"\\n        "],[8,[30,4,["filterSection"]],null,null,[["default"],[[[[1,"\\n          "],[8,[39,17],null,[["@clearFilter","@currentFilter","@trackingPrefix","@disabled","@loadedUnreadConversations"],[[30,0,["clearFilters"]],[30,0,["currentConvosFilter"]],"overlay.",[30,0,["isBulkActionsMode"]],[30,0,["loadedUnreadConversations"]]]],null],[1,"\\n        "]],[]]]]],[1,"\\n      "]],[4]]]]],[1,"\\n"]],[]],[[[1,"      "],[8,[39,18],null,[["@openNewConversation","@openBubble","@currentConvosFilter","@onFilterApply","@onClearFilters","@showSearchInput","@onSearchTermChange"],[[30,2],[30,3],[30,0,["currentConvosFilter"]],[30,0,["applyFilter"]],[30,0,["clearFilters"]],[30,0,["showSearchInput"]],[30,0,["onSearchTermChange"]]]],[["default"],[[[[1,"\\n        "],[8,[30,5,["filterSection"]],null,null,[["default"],[[[[1,"\\n          "],[8,[39,17],null,[["@clearFilter","@currentFilter","@trackingPrefix","@disabled","@loadedUnreadConversations"],[[30,0,["clearFilters"]],[30,0,["currentConvosFilter"]],"overlay.",[30,0,["isBulkActionsMode"]],[30,0,["loadedUnreadConversations"]]]],null],[1,"\\n        "]],[]]]]],[1,"\\n      "]],[5]]]]],[1,"\\n"]],[]]],[1,"\\n    "],[10,0],[14,0,"msg-overlay-list-bubble__top-static-area"],[12],[1,"\\n"],[41,[30,0,["showFocusedInboxTabs"]],[[[1,"        "],[8,[39,19],null,[["@currentSelection","@showSecondaryTabBadge","@onPrimaryTabSelect","@onSecondaryTabSelect","@isOverlay"],[[30,0,["inboxType"]],[30,0,["hasUnseenSecondaryConversations"]],[28,[37,20],[[30,0,["switchInboxTab"]],"PRIMARY"],null],[28,[37,20],[[30,0,["switchInboxTab"]],"SECONDARY"],null],true]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["showKindnessReminder"]],[[[1,"        "],[8,[39,21],[[24,0,"msg-overlay-list-bubble__kindness-reminder"]],[["@type","@legoConfig","@text","@primaryActionText","@onImpression","@onDismiss","@onPrimary"],["basic",[30,0,["kindnessReminderLegoConfig"]],[28,[37,7],["i18n_kindness_reminder_text","msg-overlay/components/list-bubble"],null],[28,[37,7],["i18n_kindness_reminder_learn_more","msg-overlay/components/list-bubble"],null],[30,0,["impressionKindnessReminder"]],[30,0,["onKindnessReminderWidgetDismiss"]],[30,0,["clickKindnessReminder"]]]],null],[1,"\\n"]],[]],null],[1,"\\n      "],[8,[39,22],null,null,null],[1,"\\n\\n"],[41,[51,[30,0,["currentConvosFilter"]]],[[[41,[51,[30,0,["isBulkActionsMode"]]],[[[41,[30,0,["showAwayMessageOnboarding"]],[[[1,"            "],[8,[39,21],null,[["@title","@text","@legoConfig","@onDismiss","@onPrimary","@primaryActionText"],[[28,[37,7],["i18n_away_message_onboarding_title","msg-overlay/components/list-bubble"],null],[28,[37,7],["i18n_away_message_onboarding_text","msg-overlay/components/list-bubble"],null],[30,0,["awayMessageOnboardingLegoConfig"]],[28,[37,3],[[30,0],"showAwayMessageOnboarding",false],null],[28,[37,3],[[30,0],"awayMessageSettingsModalIsOpen",true],null],[28,[37,7],["i18n_set_away_message","msg-overlay/components/list-bubble"],null]]],[["default"],[[[[1,"\\n              "],[8,[30,6,["leftSection"]],null,null,[["default"],[[[[1,"\\n                "],[1,[28,[35,8],null,[["type","size","color"],["linkedin-bug","21dp","premium"]]]],[1,"\\n              "]],[]]]]],[1,"\\n            "]],[6]]]]],[1,"\\n"]],[]],null]],[]],null]],[]],null],[1,"    "],[13],[1,"\\n\\n"],[41,[30,0,["inboxDataFetchFailed"]],[[[1,"      "],[10,0],[14,0,"msg-overlay-list-bubble__failed-to-connect-container text-align-center"],[12],[1,"\\n        "],[10,"h3"],[14,0,"t-16 t-black--light t-normal ph3 pb5"],[12],[1,"\\n          "],[1,[28,[35,7],["i18n_failed_connect","msg-overlay/components/list-bubble"],null]],[1,"\\n        "],[13],[1,"\\n        "],[8,[39,14],[[4,[38,5],["overlay.retry"],null]],[["@click","@type","@text"],[[30,0,["refetchInboxData"]],"secondary",[28,[37,7],["i18n_try_again","msg-overlay/components/list-bubble"],null]]],null],[1,"\\n      "],[13],[1,"\\n"]],[]],[[[41,[30,0,["showMarkingAllReadLoader"]],[[[1,"        "],[8,[39,23],[[16,0,[52,[30,0,["currentConvosFilter"]],"full-height justify-center"]]],[["@size","@textPosition","@text","@border"],["xsmall","right",[28,[37,7],["i18n_mark_all_read_progress_text_v2","msg-overlay/components/list-bubble"],null],[52,[28,[37,24],[[30,0,["currentConvosFilter"]]],null],"bottom"]]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[51,[30,0,["hideConversationsList"]]],[[[1,"        "],[10,"section"],[14,0,"scrollable msg-overlay-list-bubble__content msg-overlay-list-bubble__content--scrollable"],[12],[1,"\\n"],[1,"          "],[11,0],[4,[38,25],null,[["when"],[[30,0,["shouldScrollToTop"]]]]],[12],[13],[1,"\\n"],[1,"          "],[10,0],[14,0,"msg-overlay-list-bubble__default-conversation-container"],[12],[1,"\\n"],[41,[28,[37,13],[[30,0,["currentConvosFilter"]],"MESSAGE_REQUEST_PENDING"],null],[[[1,"              "],[8,[39,26],null,[["@trackingKey","@goBack"],["back_to_inbox_from_requests_overlay",[30,0,["backToInboxFromMessageRequestList"]]]],null],[1,"\\n"]],[]],[[[41,[28,[37,13],[[30,0,["currentConvosFilter"]],"MESSAGE_REQUEST_DECLINED"],null],[[[1,"              "],[8,[39,26],null,[["@isDeclinedList","@trackingKey","@goBack"],[true,"back_to_message_requests_from_declined_messages_overlay",[30,0,["messageRequestListHeaderOnGoBack"]]]],null],[1,"\\n            "]],[]],null]],[]]],[1,"\\n"],[41,[30,0,["inboxDataLoaded"]],[[[41,[30,0,["shouldShowSecondaryPreviewBanner"]],[[[1,"                "],[10,0],[14,0,"msg-conversation-card msg-ui-focused-inbox-secondary-preview-banner-presenter__secondary-preview-banner-card display-flex"],[12],[1,"\\n                  "],[8,[39,27],null,[["@classNames","@onClicked","@isOverlay"],[[29,["pl2 ",[52,[51,[30,0,["showContextualRecommendations"]]],"mb2"]," mh2 mt2 "]],[28,[37,20],[[30,0,["switchInboxTab"]],"SECONDARY"],null],true]],null],[1,"\\n                "],[13],[1,"\\n"]],[]],[[[41,[30,0,["showFocusedInboxBanner"]],[[[1,"                "],[8,[39,28],null,null,null],[1,"\\n              "]],[]],null]],[]]],[41,[30,0,["showContextualRecommendations"]],[[[1,"                "],[8,[39,29],null,[["@suggestedRecipients","@openNewConversation","@classNames"],[[30,0,["msgOverlayService","suggestedRecipients"]],[30,2],[29,[[52,[30,0,["shouldShowSecondaryPreviewBanner"]],"mt1","mt2"]," "]]]],null],[1,"\\n"]],[]],null],[1,"\\n              "],[10,1],[14,0,"visually-hidden"],[12],[1,"\\n                "],[1,[28,[35,7],["i18n_a11y_infinite_scroll","msg-overlay/components/list-bubble"],null]],[1,"\\n              "],[13],[1,"\\n"],[41,[30,0,["showContextualRecommendations"]],[[[41,[51,[30,0,["showMessageRequestBanner"]]],[[[1,"                  "],[10,"header"],[14,0,"msg-overlay-list-bubble__list-header"],[12],[1,"\\n                    "],[10,"h5"],[14,0,"msg-overlay-list-bubble__list-header-title t-12 t-black--light t-bold truncate"],[12],[1,"\\n                      "],[1,[28,[35,7],["i18n_messages","msg-overlay/components/list-bubble"],null]],[1,"\\n                    "],[13],[1,"\\n                  "],[13],[1,"\\n"]],[]],null]],[]],null],[41,[30,0,["showMessageRequestBanner"]],[[[1,"                "],[8,[39,30],null,[["@headingText","@openMessageRequestConversationList","@trackingKey"],[[30,0,["pendingMessageRequestBundle","heading","text"]],[30,0,["openMessageRequestConversationList"]],"overlay.bundle_view_message_request_inbox"]],null],[1,"\\n"]],[]],null],[1,"              "],[8,[39,31],null,[["@conversations","@participants","@currentConvosFilter","@hasStrongNetwork","@connectionProfileImages","@isAbiComplete","@isBulkActionsMode","@disableBulkActions","@openBubble","@newConversation","@onBulkActionToggle","@selectedConversationUrns"],[[30,0,["conversations"]],[30,0,["mailboxParticipants"]],[30,0,["currentConvosFilter"]],[30,0,["hasStrongNetwork"]],[30,0,["connectionProfileImages"]],[30,0,["isAbiComplete"]],[30,0,["isBulkActionsMode"]],[30,0,["showMessageRequestConversationList"]],[30,0,["openBubbleByConversationUrn"]],[30,0,["newConversation"]],[30,0,["onListBubbleItemClick"]],[30,0,["selectedConversationUrns"]]]],null],[1,"\\n"],[41,[30,0,["loadMoreError"]],[[[1,"                "],[10,0],[14,0,"p4 mb6"],[12],[1,"\\n                  "],[8,[39,32],null,[["@class","@headline","@illustration","@message","@muted"],["msg-conversations-container__load-error",[28,[37,7],["i18n_oops","msg-overlay/components/list-bubble"],null],"no-connection",[28,[37,7],["i18n_load_more_error","msg-overlay/components/list-bubble"],null],true]],null],[1,"\\n                  "],[8,[39,14],[[4,[38,5],["overlay.retry"],null]],[["@class","@click","@text","@type"],["js-retry-button block mlA mrA",[30,0,["retryLoadMore"]],[28,[37,7],["i18n_try_again","msg-overlay/components/list-bubble"],null],"secondary"]],null],[1,"\\n                "],[13],[1,"\\n"]],[]],null],[41,[30,0,["loadMoreInProgress"]],[[[1,"                "],[10,0],[12],[1,"\\n                  "],[8,[39,33],null,[["@size"],["small"]],null],[1,"\\n                "],[13],[1,"\\n"]],[]],null]],[]],[[[1,"              "],[8,[39,23],[[24,0,"full-height justify-center"]],[["@size"],["small"]],null],[1,"\\n"]],[]]],[1,"\\n"],[41,[30,0,["shouldLoadMoreConversations"]],[[[1,"              "],[8,[39,34],null,[["@inView","@rootSelector"],[[30,0,["loadMore"]],".msg-overlay-list-bubble__content"]],null],[1,"\\n"]],[]],null],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null]],[]]]],[]],null],[1,"\\n"],[41,[30,0,["isMessagingSettingsModalOpen"]],[[[1,"    "],[8,[39,35],null,[["@closeModal"],[[28,[37,3],[[30,0],"isMessagingSettingsModalOpen",false],null]]],null],[1,"\\n"]],[]],null],[41,[30,0,["awayMessageSettingsModalIsOpen"]],[[[1,"    "],[8,[39,36],null,[["@closeModal"],[[28,[37,3],[[30,0],"awayMessageSettingsModalIsOpen",false],null]]],null],[1,"\\n"]],[]],null],[13]],["dropdown","@newConversation","@openBubble","OverlaySearchFeature","listBubbleSearch","widget"],false,["if","msg-shared@block-scrolling","on","ember-set-helper@set","msg-overlay@presence-onboarding-presenter","ember-cli-pemberly-tracking@track-interaction","presence@entity-with-presence","t","artdeco-icons-web@li-icon","concat","artdeco-dropdown@artdeco-dropdown","artdeco-dropdown@artdeco-dropdown-item","unless","global-helpers@eq","artdeco-button@artdeco-button","msg-ui@primitives/bulk-actions-panel-presenter","msg-overlay@overlay-search-feature","msg-ui@selected-filter-presenter","msg-overlay@list-bubble-search","msg-ui@focused-inbox-tabs-presenter","fn","msg-ui@kindness-reminder-presenter","msg-ui@away-message-reminder-banner-presenter","msg-ui@loader","global-helpers@not","global-modifiers@scroll-into-view","msg-ui@message-request-list-header-presenter","msg-ui@focused-inbox-secondary-preview-banner-presenter","msg-ui@focused-inbox-banner-presenter","msg-overlay@contextual-recommendation-list","msg-ui@inbox-header-with-message-request-presenter","msg-overlay@overlay-conversation-list-feature","artdeco-empty-state@artdeco-empty-state","artdeco-loader@artdeco-loader","msg-ui@visible-beacon","msg-shared-modals@msg-settings-modal-presenter","msg-shared-modals@away-message-settings-modal-presenter"]]',moduleName:"msg-overlay/components/list-bubble.hbs",isStrictMode:!1}),{IMPRESSION_KEYS:{CONVERSATION:Ie},MODULE_KEYS:{OVERLAY_CONVERSATION_LIST:De},MESSAGE_REQUEST_STATUS:{MESSAGE_REQUEST_PENDING:Ee,MESSAGE_REQUEST_DECLINED:xe},MESSAGE_REQUEST_TARGET_URLS:Pe,OVERLAY_LS_CONVERSATIONS_FILTER_KEY:Te,OVERLAY:{QUALITY_MEMBER_CONNECTIONS_THRESHOLD:Ne},OVERLAY_FILTERS_INTERACTION_EVENTS:Ae,PAGEVIEW_KEYS:Be,KINDNESS_REMINDER_LEGO:Le,AWAY_MESSAGE_ONBOARDING_LEGO:ze,INBOX_TYPES:Fe}=d.default
let je=(C=(0,l.inject)("authentication@authenticated-user"),S=(0,l.inject)("global-nav-badge@badge"),M=(0,l.inject)("global-services@clipboard"),k=(0,l.inject)("lix"),R=(0,l.inject)("tracking"),O=(0,l.inject)("i18n"),I=(0,l.inject)("global-services@window"),D=(0,l.inject)("global-services@a11y-notification"),E=(0,l.inject)("heathrow@heathrow"),x=(0,l.inject)("msg-overlay-manager@msg-overlay-manager"),P=(0,l.inject)("global-services@realtime-events"),T=(0,l.inject)("store"),N=(0,l.inject)("global-services@local-storage"),A=(0,l.inject)("lego@resolver"),B=(0,l.inject)("lego@tracking"),L=(0,l.inject)("msg-shared@messaging-user-settings"),z=(0,l.inject)("msg-data@data-manager"),F=(0,l.inject)("persistent-toast-manager@persistent-toast-manager"),j=(0,l.inject)("rum"),U=(0,_.localCopy)("args.filterFromDeeplink"),V=class extends y.default{get isMinimized(){return this.msgOverlayService.listBubbleIsMinimized}get shouldRenderContent(){return!this.isMinimized||this.isInMinimizeTransition}get showMessageRequestConversationList(){return this.currentConvosFilter===Ee||this.currentConvosFilter===xe}get showSearchInput(){return!this.isBulkActionsMode&&(!this.showMessageRequestConversationList||this.enableFocusedInbox)}get showFocusedInboxTabs(){return this.enableFocusedInbox&&(!this.currentConvosFilter||this.currentConvosFilter===Ee)}get showMessageRequestInboxInHeaderDropdown(){return!this.showMessageRequestConversationList}get showManageConversationsButtonInHeaderDropdown(){return!this.showMessageRequestConversationList}get showContextualRecommendations(){return!this.currentConvosFilter&&this.msgOverlayService.suggestedRecipients}get toggleMinimizeTrackingControlName(){return this.isMinimized?"overlay.maximize_connection_list_bar":"overlay.minimize_connection_list_bar"}get hideConversationsList(){return"UNREAD"===this.currentConvosFilter&&this.showMarkingAllReadLoader}get hasBadge(){return this.msgOverlayService.unseenMsgCount>0&&(!this.msgOverlayService.forcedMinimizedAtRoute||this.args.realtimeMsgNotAutoOpened)}get hasStrongNetwork(){return this.numConnections>Ne}get showMessageRequestBanner(){return!this.enableFocusedInbox&&this.pendingMessageRequestBundle&&!this.currentConvosFilter}get showFocusedInboxBanner(){return this.enableFocusedInbox&&!this.currentConvosFilter&&!this.isBulkActionsMode}get showKindnessReminder(){return!this.kindnessReminderShown&&!this.currentConvosFilter&&!this.isBulkActionsMode}get realtimeStatusClassName(){return this.realtimeEvents.hasActiveConnection?"msg-overlay-bubble-header__realtime-indicator--online":"msg-overlay-bubble-header__realtime-indicator--offline"}get headerDropdownMenuPlacement(){return this.isMinimized?"top":"bottom"}get shouldLoadMoreConversations(){return!!this.conversationCollection&&(!this.conversationCollection.lastSetOfRecordsLoaded&&!this.loadMoreInProgress&&this.inboxDataLoaded&&!this.loadMoreError)}get showMarkingAllReadLoader(){return this.msgDataManager.progressIndicatorState.markAllReadIndicator&&(!this.currentConvosFilter||"UNREAD"===this.currentConvosFilter)}get enableOverlaySearchPreWork(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-sdk-pre-work-overlay-search")}get conversationCollection(){let e
e=this.currentConvosFilter?this.currentConvosFilter:this.enableFocusedInbox?this.inboxType:Fe.MAIN_INBOX
return this.msgDataManager.inboxManager.getConversationCollectionByName(e)}get conversations(){var e,t
if(this.msgDataManager.msgSDKEnabled){var n
return null===(n=this.msgDataManager.getMailboxState())||void 0===n?void 0:n.conversations}const i=null===(e=this.conversationCollection)||void 0===e?void 0:e.data
return null!==(t=this.currentConvosFilter?i:null==i?void 0:i.filter((e=>!(0,c.get)(e,"archived")&&!(0,c.get)(e,"blocked"))))&&void 0!==t?t:[]}get mailboxParticipants(){if(this.msgDataManager.msgSDKEnabled){var e
return null===(e=this.msgDataManager.getMailboxState())||void 0===e?void 0:e.participants}}get loadedUnreadConversations(){var e,t
return null!==(e=null===(t=this.conversations)||void 0===t?void 0:t.filter((e=>!(0,c.get)(e,"read"))))&&void 0!==e?e:[]}get useNewCoachmark(){return this.lix.getTreatmentIsEnabled("voyager.web.discover-messaging-enable-coachmark")}get enableRealtimeConnectionStatus(){return this.lix.getTreatmentIsEnabled("voyager.messaging.web.show-realtime-connection-status")}get isCompanyUser(){return this.lix.getTreatmentIsEnabled("voyager.client.staff")}get enableFocusedInbox(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-focused-inbox-experience")}get hasUnseenSecondaryConversations(){return!!this.enableFocusedInbox&&null!==this.msgDataManager.inboxManager.secondaryPreviewBannerData}get shouldShowSecondaryPreviewBanner(){return this.hasUnseenSecondaryConversations&&(!this.currentConvosFilter||this.currentConvosFilter===Ee)&&"PRIMARY"===this.inboxType}get shouldScrollToTop(){const e=this.conversationCollection!==this._previousConversationCollection
this._previousConversationCollection=this.conversationCollection
return e}constructor(){super(...arguments);(0,n.default)(this,"listBubbleId",`list-bubble-${(0,w.guidFor)(this)}`);(0,t.default)(this,"authenticatedUser",q,this);(0,t.default)(this,"badgeService",H,this);(0,t.default)(this,"clipboard",K,this);(0,t.default)(this,"lix",Y,this);(0,t.default)(this,"tracking",G,this);(0,t.default)(this,"i18n",W,this);(0,t.default)(this,"windowService",J,this);(0,t.default)(this,"a11yNotification",X,this);(0,t.default)(this,"heathrow",Q,this);(0,t.default)(this,"msgOverlayService",$,this);(0,t.default)(this,"realtimeEvents",Z,this);(0,t.default)(this,"store",ee,this);(0,t.default)(this,"localStorage",te,this);(0,t.default)(this,"legoResolver",ne,this);(0,t.default)(this,"legoTracking",ie,this);(0,t.default)(this,"msgUserSettings",oe,this);(0,t.default)(this,"msgDataManager",ae,this);(0,t.default)(this,"persistentToastManager",re,this);(0,t.default)(this,"rum",se,this);(0,t.default)(this,"currentConvosFilter",le,this);(0,t.default)(this,"isHeaderDropdownMenuOpen",ce,this);(0,t.default)(this,"isMessagingSettingsModalOpen",ue,this);(0,t.default)(this,"inboxDataFetchInProgress",de,this);(0,t.default)(this,"inboxDataLoaded",me,this);(0,t.default)(this,"inboxDataFetchFailed",pe,this);(0,t.default)(this,"loadMoreError",ge,this);(0,t.default)(this,"loadMoreInProgress",be,this);(0,t.default)(this,"pendingMessageRequestBundle",he,this);(0,t.default)(this,"numConnections",ve,this);(0,t.default)(this,"connectionProfileImages",ye,this);(0,t.default)(this,"awayMessageSettingsModalIsOpen",fe,this);(0,t.default)(this,"selectedConversations",_e,this);(0,t.default)(this,"selectedConversationUrns",we,this);(0,t.default)(this,"isBulkActionsMode",Ce,this);(0,t.default)(this,"searchTerm",Se,this);(0,t.default)(this,"inboxType",Me,this);(0,t.default)(this,"isInMinimizeTransition",ke,this);(0,n.default)(this,"bubblePageKey","d_flagship3_messaging_overlay_connections.page");(0,n.default)(this,"bubbleMinimizeProperty","isMinimized");(0,n.default)(this,"kindnessReminderLegoConfig",Le);(0,n.default)(this,"kindnessReminderHelpCenterLink","/legal/professional-community-policies");(0,n.default)(this,"awayMessageOnboardingLegoConfig",ze);(0,t.default)(this,"kindnessReminderShown",Re,this);(0,n.default)(this,"_previousConversationCollection",null)
this.badging=this.badgeService
this.showAwayMessageOnboarding=this.authenticatedUser.isPremiumUser
new m.default(this.legoResolver,this.legoTracking,this.msgUserSettings,this.store,this.tracking,this.lix).run()
const e=this.rum.startPerfMeasurement("messaging-list-bubble-initial-render");(0,s.schedule)("afterRender",(()=>{e&&!e.isClosed&&this.rum.endPerfMeasurement(e)}))
this.msgDataManager.subscribe((e=>{"conversationBundleUpdate"===e&&(this.pendingMessageRequestBundle=this.msgDataManager.getConversationBundleByTargetUrl(Pe.URL_PENDING))}))
this._fetchInboxData(this.currentConvosFilter)}_fetchInboxData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
if(this.inboxDataFetchInProgress||this.inboxDataLoaded)return(0,g.reject)()
this.inboxDataFetchInProgress=!0
this.inboxDataLoaded=!1
const n=this._loadConversations(e,t),i=this._loadConversationBundles(t)
return(0,g.hashSettled)({conversations:n,conversationBundles:i}).then((e=>{var t,n,i
if(this.isDestroying)return(0,g.reject)()
if("rejected"===(0,c.get)(e.conversations,"state")){this.inboxDataFetchFailed=!0
this.tracking.firePageViewEvent(Be.OVERLAY_FAILED_TO_CONNECT)
return(0,g.resolve)()}if(!(this.conversations.length||null!==(t=this.msgOverlayService.suggestedRecipients)&&void 0!==t&&t.length))return this._fetchFallbackStateData()
null===(n=(i=this.args).afterInboxDataFetch)||void 0===n||n.call(i,this.conversations)
return(0,g.resolve)(e)})).finally((()=>{if(!this.isDestroying){this.inboxDataFetchInProgress=!1
this.inboxDataLoaded=!0}}))}_fetchFallbackStateData(){const{store:e}=this,t=this.heathrow.organicAbiShouldSkipImport(),n={connectionSummary:e.findRecord("com.linkedin.voyager.relationships.shared.connection.ConnectionsSummary","GET",{reload:!1,adapterOptions:{url:`/${u.default.namespace}/relationships/connectionsSummary/`}}),isAbiComplete:t}
return(0,g.hashSettled)(n).then((t=>{var n
if(this.isDestroying)return(0,g.reject)()
this.isAbiComplete=t.isAbiComplete.value
this.numConnections=null!==(n=(0,c.get)(t,"connectionSummary.value.numConnections"))&&void 0!==n?n:0
return this.numConnections>=Ne?e.queryURL(`/${u.default.namespace}/relationships/connections`,{params:{start:0,count:4},reload:!1}):(0,g.resolve)()})).then((e=>{if(this.isDestroying)return(0,g.reject)()
if(e){const t=(0,c.get)(e,"elements")
this.connectionProfileImages=t.map((e=>(0,c.get)(e,"miniProfile.picture")))}return e}))}_loadConversations(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
const n=e||this.localStorage.getItem(Te)
if(this.msgDataManager.msgSDKEnabled)return this.msgDataManager.getMailbox()
if(n)return this.loadConversationsByFilter(n).then((()=>{this.isDestroying||this.tracking.firePageViewEvent(Be.OVERLAY_CONVERSATION_FILTERED_LIST[n])}))
const{inboxManager:i}=this.msgDataManager
return i.inboxDataLoaded&&!t?(0,g.resolve)([]):i.syncInbox()}_loadConversationBundles(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]
const t=this.msgDataManager.getConversationBundleByTargetUrl(Pe.URL_PENDING)
if(!e&&t){this.pendingMessageRequestBundle=t
return(0,g.resolve)()}return this.msgDataManager.fetchConversationBundles().then((()=>{this.isDestroying||(this.pendingMessageRequestBundle=this.msgDataManager.getConversationBundleByTargetUrl(Pe.URL_PENDING))}))}switchInboxTab(e){this.inboxType=e
this.isBulkActionsMode=!1
"SECONDARY"===e&&this.msgDataManager.inboxManager.markSecondaryInboxAsSeen()
const t="PRIMARY"===e?"flagship3_messaging_overlay_primary_tab":"flagship3_messaging_overlay_secondary_tab"
this.tracking.firePageViewEvent(t)}loadConversationsByFilter(e){this.isBulkActionsMode=!1
this.inboxDataLoaded=!1
this.inboxDataFetchInProgress=!0
this.currentConvosFilter=e
let t,n
t=e===Ee?{q:"systemLabel",type:Ee,excludedSystemLabelTypes:["SPAM","ARCHIVE"]}:e===xe?{q:"systemLabel",type:xe,excludedSystemLabelTypes:["SPAM","ARCHIVE"]}:"ARCHIVED"===e?{q:"search",folders:[e]}:e?{q:"search",filters:[e]}:{}
n=e?this.msgDataManager.inboxManager.loadCollection(e,t):this.msgDataManager.inboxManager.syncInbox()
return n.finally((()=>{if(!this.isDestroying){this.inboxDataLoaded=!0
this.inboxDataFetchInProgress=!1}}))}refetchInboxData(){this.inboxDataFetchFailed=!1
this.inboxDataFetchInProgress=!1
this.inboxDataLoaded=!1
this._fetchInboxData("",!0)}infiniteScroll(){return this.loadMore()}_updateMinimizedState(e){(0,v.runTask)(this,(()=>this.msgOverlayService.updateListBubbleMinimizeState(e)))}loadMore(){var e
if(this.loadMoreInProgress)return(0,g.resolve)()
if(0===(null===(e=this.conversations)||void 0===e?void 0:e.length))return(0,g.resolve)()
this.loadMoreInProgress=!0
this.loadMoreError=!1
return this.msgDataManager.inboxManager.loadMore(this.conversationCollection.name).then((e=>{const t=e.length
if(!this.isDestroying){const e=this.i18n.lookupTranslation("components/msg-ui@i18n-shared","i18n_a11y_infinite_scroll_conversations")
this.a11yNotification.setTextInLiveRegion(e([{newRecordCount:t}]))}const n=this.rum.startPerfMeasurement("messaging-list-bubble-render-load-more");(0,s.schedule)("afterRender",(()=>{n&&!n.isClosed&&this.rum.endPerfMeasurement(n)}))
return t})).catch((e=>{this.isDestroying||(this.loadMoreError=!0)
throw e})).finally((()=>{this.isDestroying||(this.loadMoreInProgress=!1)}))}newConversation(e,t){var n,i
e&&e.stopPropagation()
null===(n=(i=this.args).newConversation)||void 0===n||n.call(i,t)}retryLoadMore(){this.loadMore()}stopEvtPropagation(e){e&&e.stopPropagation()}toggleMinimize(e){var t
null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e)
this.isInMinimizeTransition=!0
if(this.isMinimized){this.badging.getBadgeCount("messaging")>0&&this.badging.fireBadgeInteractionEvent(document.getElementById(this.listBubbleId),"msg-overlay-list-bubble-header","messaging")
this.msgOverlayService.markAllAsSeen()
const e=this.rum.startPerfMeasurement("messaging-list-bubble-manual-open");(0,s.schedule)("afterRender",(()=>{e&&!e.isClosed&&this.rum.endPerfMeasurement(e)}))}this.msgOverlayService.toggleListBubbleMinimized()
this.isMinimized||this.tracking.firePageViewEvent(this.bubblePageKey)}openMessageRequestConversationList(){this.loadConversationsByFilter(Ee)
this.isHeaderDropdownMenuOpen=!1
this.tracking.firePageViewEvent("d_flagship3_messaging_overlay_pending_request_inbox")}backToInboxFromMessageRequestList(){this.loadConversationsByFilter("")
this.tracking.fireInteractionEvent("overlay.back_to_inbox_from_requests")
this.msgDataManager.refreshConversationBundles()}openDeclinedMessageRequestConversationList(){this.loadConversationsByFilter(xe)
this.isHeaderDropdownMenuOpen=!1
this.tracking.firePageViewEvent("d_flagship3_messaging_overlay_declined_request_inbox")}openAwayMessageSettingsModal(e){null==e||e.stopPropagation()
this.awayMessageSettingsModalIsOpen=!0}openMessagingSettingsModal(e){e&&e.stopPropagation()
this.isMessagingSettingsModalOpen=!0}onListBubbleItemClick(e){var t
if(!this.conversations.findBy("entityUrn",e))return
this._toggleConversationSelected(e)
this.selectedConversations=null===(t=this.conversations)||void 0===t?void 0:t.filter((e=>this.selectedConversationUrns.includes((0,c.get)(e,"entityUrn"))))
!this.isBulkActionsMode&&this.selectedConversations.length>0?this.isBulkActionsMode=!0:0===this.selectedConversations.length&&(this.isBulkActionsMode=!1)
const n=this.selectedConversationUrns.includes(e)?"overlay.bulk_select_conversation":"overlay.bulk_unselect_conversation"
this.tracking.fireInteractionEvent(n)}_toggleConversationSelected(e){if(0===this.selectedConversationUrns.length)this.selectedConversationUrns=[e]
else{const t=this.selectedConversationUrns.includes(e)
this.selectedConversationUrns=t?this.selectedConversationUrns.filter((t=>t!==e)):this.selectedConversationUrns.concat(e)}}enterBulkActionsMode(e){e&&e.stopPropagation()
this.isMinimized&&this.toggleMinimize()
this.isBulkActionsMode=!0
this.isHeaderDropdownMenuOpen=!1}onExitBulkActionsMode(){this.selectedConversationUrns=[]
this.selectedConversations=[]
this.isBulkActionsMode=!1}willExecuteBulkAction(){this.isBulkActionsMode=!1}didExecuteBulkAction(e){"delete"===e&&this.selectedConversations.forEach((e=>{this.msgOverlayService.conversationBubbleLayoutManager.closeBubbleByConversation(e)}))}applyFilter(e){e?this.localStorage.setItem(Te,e):this.localStorage.removeItem(Te)
this.loadConversationsByFilter(e).then((()=>{this.tracking.firePageViewEvent(Be.OVERLAY_CONVERSATION_FILTERED_LIST[e||"ALL"])}))
this.tracking.fireInteractionEvent(Ae.SELECT[e||"ALL"],"SHORT_PRESS")}clearFilters(){this.localStorage.removeItem(Te)
this.tracking.fireInteractionEvent(Ae.DISMISS[this.currentConvosFilter],"SHORT_PRESS")
this.loadConversationsByFilter("")}impressionKindnessReminder(){this.tracking.firePageViewEvent("d_flagship3_messaging_overlay_kindness_banner")}clickKindnessReminder(){this.tracking.fireInteractionEvent("overlay.open_kindness_banner")
if(p.default){const e=this.kindnessReminderHelpCenterLink
if(!e)return
this.windowService.open(e,"_blank")}}onSearchTermChange(e){this.searchTerm=e}createListBubbleItemImpressionEvent(e){return this.isDestroying||this.isDestroyed?[]:{name:Ie,body:{moduleKey:De,conversations:[{objectUrn:(0,c.get)(e,"backendUrn"),trackingId:(0,b.generateTrackingId)()}],participantPresenceStatuses:(0,h.getParticipantPresenceStatuses)(e)}}}onKindnessReminderWidgetDismiss(){this.kindnessReminderShown=!0
this.tracking.fireInteractionEvent("overlay.dismiss_kindness_banner")}messageRequestListHeaderOnGoBack(){this.loadConversationsByFilter(Ee)
this.tracking.fireInteractionEvent("overlay.back_to_message_requests_from_declined_messages")}copyRealtimePayload(){const e=this.clipboard.copyToClipboard(JSON.stringify(this.realtimeEvents.getRealtimePayloadDump()))
this.isHeaderDropdownMenuOpen=!1
if(e){const e=this.i18n.lookupTranslation("components/msg-overlay@list-bubble-v2","i18n_realtime_payload_copied")([])
this.persistentToastManager.success({message:e})}}openBubbleByConversationUrn(e){const t=this.conversations.find((t=>(0,c.get)(t,"entityUrn")===e))
t&&this.args.openBubble(t)}},q=(0,i.default)(V.prototype,"authenticatedUser",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=(0,i.default)(V.prototype,"badgeService",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=(0,i.default)(V.prototype,"clipboard",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=(0,i.default)(V.prototype,"lix",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=(0,i.default)(V.prototype,"tracking",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=(0,i.default)(V.prototype,"i18n",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=(0,i.default)(V.prototype,"windowService",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=(0,i.default)(V.prototype,"a11yNotification",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=(0,i.default)(V.prototype,"heathrow",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=(0,i.default)(V.prototype,"msgOverlayService",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,i.default)(V.prototype,"realtimeEvents",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=(0,i.default)(V.prototype,"store",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=(0,i.default)(V.prototype,"localStorage",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=(0,i.default)(V.prototype,"legoResolver",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=(0,i.default)(V.prototype,"legoTracking",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=(0,i.default)(V.prototype,"msgUserSettings",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=(0,i.default)(V.prototype,"msgDataManager",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=(0,i.default)(V.prototype,"persistentToastManager",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=(0,i.default)(V.prototype,"rum",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=(0,i.default)(V.prototype,"currentConvosFilter",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=(0,i.default)(V.prototype,"isHeaderDropdownMenuOpen",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ue=(0,i.default)(V.prototype,"isMessagingSettingsModalOpen",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de=(0,i.default)(V.prototype,"inboxDataFetchInProgress",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),me=(0,i.default)(V.prototype,"inboxDataLoaded",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pe=(0,i.default)(V.prototype,"inboxDataFetchFailed",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ge=(0,i.default)(V.prototype,"loadMoreError",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),be=(0,i.default)(V.prototype,"loadMoreInProgress",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),he=(0,i.default)(V.prototype,"pendingMessageRequestBundle",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=(0,i.default)(V.prototype,"numConnections",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=(0,i.default)(V.prototype,"connectionProfileImages",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=(0,i.default)(V.prototype,"awayMessageSettingsModalIsOpen",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=(0,i.default)(V.prototype,"selectedConversations",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),we=(0,i.default)(V.prototype,"selectedConversationUrns",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ce=(0,i.default)(V.prototype,"isBulkActionsMode",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=(0,i.default)(V.prototype,"searchTerm",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=(0,i.default)(V.prototype,"inboxType",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Fe.PRIMARY}}),ke=(0,i.default)(V.prototype,"isInMinimizeTransition",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Re=(0,i.default)(V.prototype,"kindnessReminderShown",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(V.prototype,"switchInboxTab",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"switchInboxTab"),V.prototype),(0,i.default)(V.prototype,"loadConversationsByFilter",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"loadConversationsByFilter"),V.prototype),(0,i.default)(V.prototype,"refetchInboxData",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"refetchInboxData"),V.prototype),(0,i.default)(V.prototype,"infiniteScroll",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"infiniteScroll"),V.prototype),(0,i.default)(V.prototype,"loadMore",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"loadMore"),V.prototype),(0,i.default)(V.prototype,"newConversation",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"newConversation"),V.prototype),(0,i.default)(V.prototype,"retryLoadMore",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"retryLoadMore"),V.prototype),(0,i.default)(V.prototype,"stopEvtPropagation",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"stopEvtPropagation"),V.prototype),(0,i.default)(V.prototype,"toggleMinimize",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"toggleMinimize"),V.prototype),(0,i.default)(V.prototype,"openMessageRequestConversationList",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"openMessageRequestConversationList"),V.prototype),(0,i.default)(V.prototype,"backToInboxFromMessageRequestList",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"backToInboxFromMessageRequestList"),V.prototype),(0,i.default)(V.prototype,"openDeclinedMessageRequestConversationList",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"openDeclinedMessageRequestConversationList"),V.prototype),(0,i.default)(V.prototype,"openAwayMessageSettingsModal",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"openAwayMessageSettingsModal"),V.prototype),(0,i.default)(V.prototype,"openMessagingSettingsModal",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"openMessagingSettingsModal"),V.prototype),(0,i.default)(V.prototype,"onListBubbleItemClick",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"onListBubbleItemClick"),V.prototype),(0,i.default)(V.prototype,"enterBulkActionsMode",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"enterBulkActionsMode"),V.prototype),(0,i.default)(V.prototype,"onExitBulkActionsMode",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"onExitBulkActionsMode"),V.prototype),(0,i.default)(V.prototype,"willExecuteBulkAction",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"willExecuteBulkAction"),V.prototype),(0,i.default)(V.prototype,"didExecuteBulkAction",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"didExecuteBulkAction"),V.prototype),(0,i.default)(V.prototype,"applyFilter",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"applyFilter"),V.prototype),(0,i.default)(V.prototype,"clearFilters",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"clearFilters"),V.prototype),(0,i.default)(V.prototype,"impressionKindnessReminder",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"impressionKindnessReminder"),V.prototype),(0,i.default)(V.prototype,"clickKindnessReminder",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"clickKindnessReminder"),V.prototype),(0,i.default)(V.prototype,"onSearchTermChange",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"onSearchTermChange"),V.prototype),(0,i.default)(V.prototype,"createListBubbleItemImpressionEvent",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"createListBubbleItemImpressionEvent"),V.prototype),(0,i.default)(V.prototype,"onKindnessReminderWidgetDismiss",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"onKindnessReminderWidgetDismiss"),V.prototype),(0,i.default)(V.prototype,"messageRequestListHeaderOnGoBack",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"messageRequestListHeaderOnGoBack"),V.prototype),(0,i.default)(V.prototype,"copyRealtimePayload",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"copyRealtimePayload"),V.prototype),(0,i.default)(V.prototype,"openBubbleByConversationUrn",[c.action],Object.getOwnPropertyDescriptor(V.prototype,"openBubbleByConversationUrn"),V.prototype),V)
e.default=je;(0,a.setComponentTemplate)(Oe,je)}))
define.alias("ember-media-player/components/media-player","msg-overlay/components/media-player")
define.alias("ember-media-player/components/media-player/big-play-button","msg-overlay/components/media-player/big-play-button")
define.alias("ember-media-player/components/media-player/caption","msg-overlay/components/media-player/caption")
define.alias("ember-media-player/components/media-player/control/back-to-start","msg-overlay/components/media-player/control/back-to-start")
define.alias("ember-media-player/components/media-player/control/captions-menu","msg-overlay/components/media-player/control/captions-menu")
define.alias("ember-media-player/components/media-player/control/custom","msg-overlay/components/media-player/control/custom")
define.alias("ember-media-player/components/media-player/control/fullscreen","msg-overlay/components/media-player/control/fullscreen")
define.alias("ember-media-player/components/media-player/control/next","msg-overlay/components/media-player/control/next")
define.alias("ember-media-player/components/media-player/control/playback-rate","msg-overlay/components/media-player/control/playback-rate")
define.alias("ember-media-player/components/media-player/control/previous","msg-overlay/components/media-player/control/previous")
define.alias("ember-media-player/components/media-player/control/settings","msg-overlay/components/media-player/control/settings")
define.alias("ember-media-player/components/media-player/control/settings/auto-advance","msg-overlay/components/media-player/control/settings/auto-advance")
define.alias("ember-media-player/components/media-player/control/settings/autoplay","msg-overlay/components/media-player/control/settings/autoplay")
define.alias("ember-media-player/components/media-player/control/settings/quality","msg-overlay/components/media-player/control/settings/quality")
define.alias("ember-media-player/components/media-player/control/skipahead","msg-overlay/components/media-player/control/skipahead")
define.alias("ember-media-player/components/media-player/control/skipback","msg-overlay/components/media-player/control/skipback")
define.alias("ember-media-player/components/media-player/control/theater-mode","msg-overlay/components/media-player/control/theater-mode")
define.alias("ember-media-player/components/media-player/end-screen","msg-overlay/components/media-player/end-screen")
define.alias("ember-media-player/components/media-player/error-screen","msg-overlay/components/media-player/error-screen")
define("msg-overlay/components/messaging-overlay-container",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","ember","@ember/runloop","@ember/service","@glimmer/component","@ember/object","rsvp","@ember/array","global-utils/utils/is-browser","msg-shared/utils/document-is-hidden","msg-ui/utils/notification-sounds","msg-shared/utils/constants","msg-shared/helpers/is-sponsored-conversation","ember-lifeline","msg-shared/helpers/is-inmail-conversation","msg-shared/helpers/get-participant-names","@glimmer/tracking"],(function(e,t,n,i,o,a,r,s,l,c,u,d,m,p,g,b,h,v,y,f,_,w,C){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var S,M,k,R,O,I,D,E,x,P,T,N,A,B,L,z,F,j,U,V,q,H,K,Y,G,W,J,X,Q,$,Z,ee,te,ne,ie,oe
const ae=(0,r.createTemplateFactory)({id:"TMgM3K4R",block:'[[[41,[30,0,["focusedMessagingMode"]],[[[1,"  "],[10,1],[14,0,"msg-overlay-container__dimmed-background"],[12],[13],[1,"\\n"]],[]],null],[10,"aside"],[14,1,"msg-overlay"],[14,0,"msg-overlay-container msg-overlay-container-reflow"],[12],[1,"\\n"],[41,[30,0,["enableListBubblePreWork"]],[[[1,"    "],[8,[39,1],null,[["@filterFromDeeplink","@realtimeMsgNotAutoOpened","@newConversation","@openBubble","@afterInboxDataFetch"],[[30,0,["filterFromDeeplink"]],[30,0,["realtimeMsgNotAutoOpened"]],[30,0,["newConversation"]],[30,0,["openConversation"]],[30,0,["afterInboxDataFetch"]]]],null],[1,"\\n"]],[]],[[[1,"    "],[8,[39,2],null,[["@filterFromDeeplink","@realtimeMsgNotAutoOpened","@newConversation","@openBubble","@afterInboxDataFetch"],[[30,0,["filterFromDeeplink"]],[30,0,["realtimeMsgNotAutoOpened"]],[30,0,["newConversation"]],[30,0,["openConversation"]],[30,0,["afterInboxDataFetch"]]]],null],[1,"\\n"]],[]]],[1,"\\n"],[42,[28,[37,4],[[28,[37,4],[[30,0,["conversationBubbleLayoutManager","avBubbles"]]],null]],null],null,[[[1,"    "],[8,[39,5],null,[["@bubble","@bubbleId","@closeBubble","@hideAudioBubbleAtMdBreakPoint","@isMinimized","@toggleMinimize"],[[30,1],[28,[37,6],[[30,0,["conversationBubbleLayoutManager","avBubbleIds"]],[30,1]],null],[28,[37,7],[[30,0,["closeAVBubble"]],[30,1]],null],[30,0,["hideAudioBubbleAtMdBreakPoint"]],[30,0,["isAudioBubbleMinimized"]],[30,0,["toggleAudioBubbleMinimized"]]]],null],[1,"\\n"]],[1]],null],[1,"\\n"],[42,[28,[37,4],[[28,[37,4],[[30,0,["conversationBubbleLayoutManager","openBubbles"]]],null]],null],null,[[[1,"    "],[8,[39,8],null,[["@bubble","@closeBubble","@handleSuccessfulDiscardRequest","@newConversation","@overlayLixes"],[[30,2],[28,[37,7],[[30,0,["closeBubble"]],[30,2]],null],[30,0,["handleSuccessfulDiscardRequest"]],[30,0,["newConversation"]],[30,0,["overlayLixes"]]]],null],[1,"\\n"]],[2]],null],[1,"\\n"],[1,"  "],[10,0],[14,1,"msg-overlay__emoji-hoverable-outlet"],[12],[13],[1,"\\n"],[13]],["bubble","bubble"],false,["if","msg-overlay@list-bubble-feature","msg-overlay@list-bubble","each","-track-array","msg-overlay@audio-bubble","global-helpers@map-get","fn","msg-overlay@conversation-bubble"]]',moduleName:"msg-overlay/components/messaging-overlay-container.hbs",isStrictMode:!1}),{CONTROL_NAMES:{OVERLAY:re},MESSAGE_TYPE:se}=v.default,le=/^messaging/,ce=/^profile/,ue=/^(feed.update.index|jobs.view.index|companies.company.index|profile.common.profile.index)/
let de=(S=(0,c.inject)("prefetch"),M=(0,c.inject)("i18n"),k=(0,c.inject)("global-nav-badge@badge"),R=(0,c.inject)("authentication@authenticated-user"),O=(0,c.inject)("profile-services@identity-store"),I=(0,c.inject)("lix"),D=(0,c.inject)("router"),E=(0,c.inject)("tracking"),x=(0,c.inject)("msg-overlay-manager@msg-overlay-manager"),P=(0,c.inject)("html-document-title@document-title-poller"),T=(0,c.inject)("msg-shared@first-message"),N=(0,c.inject)("msg-data@data-manager"),A=(0,c.inject)("msg-shared@component-context"),B=(0,c.inject)("msg-shared@messaging-user-settings"),L=(0,c.inject)("client-sensor-web@client-sensor"),z=(0,c.inject)("rum"),F=class extends u.default{get conversationBubbleLayoutManager(){return this.msgOverlayManager.conversationBubbleLayoutManager}get isMessagingRoute(){var e
return null===(e=this.router.currentRouteName)||void 0===e?void 0:e.match(le)}get isProfileRoute(){var e
return null===(e=this.router.currentRouteName)||void 0===e?void 0:e.match(ce)}get isContextualRoute(){var e
return null===(e=this.router.currentRouteName)||void 0===e?void 0:e.match(ue)}get hideAudioBubbleAtMdBreakPoint(){return this.conversationBubbleLayoutManager.numOpenBubbles>0&&this.conversationBubbleLayoutManager.numOpenAVBubbles>0&&this.isHideAudioBubbleReflowLixEnabled}get isHideAudioBubbleReflowLixEnabled(){return this.lix.getTreatmentIsEnabled("voyager.web.rooms-hide-audio-bubble-reflow")}get isAudioBubbleMinimized(){return this.msgOverlayManager.audioBubbleIsMinimized}get enableListBubblePreWork(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-sdk-pre-work-list-bubble")}constructor(){super(...arguments);(0,n.default)(this,"rumComponentId","msg-overlay");(0,t.default)(this,"prefetch",j,this);(0,t.default)(this,"i18n",U,this);(0,t.default)(this,"badgeService",V,this);(0,t.default)(this,"authenticatedUser",q,this);(0,t.default)(this,"identityStore",H,this);(0,t.default)(this,"lix",K,this);(0,t.default)(this,"router",Y,this);(0,t.default)(this,"tracking",G,this);(0,t.default)(this,"msgOverlayManager",W,this);(0,t.default)(this,"documentTitle",J,this);(0,t.default)(this,"firstMessage",X,this);(0,t.default)(this,"msgDataManager",Q,this);(0,t.default)(this,"msgComponentContextService",$,this);(0,t.default)(this,"msgUserSettings",Z,this);(0,t.default)(this,"clientSensor",ee,this);(0,t.default)(this,"rum",te,this);(0,t.default)(this,"filterFromDeeplink",ne,this);(0,t.default)(this,"focusedMessagingMode",ie,this);(0,t.default)(this,"realtimeMsgNotAutoOpened",oe,this)
this.msgComponentContextService.setTo("overlay")
const e=(0,d.get)(this,"router.currentRoute.queryParams"),i=e&&"true"===e.msgOverlay
i&&this._handleDeeplink(e)
this._showFirstMessage()
this.msgOverlayManager.setUnseenConvoCountFromBadge()
this.msgUserSettings.syncUserSettings().then((()=>{this.isDestroying||i||this._restoreCachedState()}))
this._attachListeners()
this.msgDataManager.subscribe(this.onEvent.bind(this))
this._downloadDeferredAssets()
this.msgOverlayManager.setOverlayHasLoaded()
this.overlayLixes={setComposeContextImprovementsEnabled:this.lix.getTreatmentIsEnabled("voyager.web.messaging-set-compose-context-improvements")}}willDestroy(){this.msgOverlayManager.off("newConversation",this,"_newConversation")}_downloadDeferredAssets(){this.prefetch.prefetchAssets("msg-spinmail")
this.prefetch.prefetchAssets("tenor-gif")}_restoreCachedState(){const e=this.msgOverlayManager.getCachedOverlayData();(0,d.get)(this.msgUserSettings,"messagingOverlayPopups")&&this._setListMinimizedState(e)
Object.keys(e).length&&this._showCachedConvos(e)}_handleDeeplink(e){const{chatId:t,msgConversationId:n,msgRecipientId:i,msgCompose:o,msgRecent:a,msgFilter:r,msgControlName:s}=e
this.filterFromDeeplink=r
if("true"===o){let e=(0,m.resolve)()
i&&(e=this.identityStore.findRecord("com.linkedin.voyager.identity.shared.MiniProfile",i))
e.then((e=>{if(!this.isDestroying){this._newConversation({isMinimized:!1,isJumbo:!0,isNew:!0,messageRecipients:e?[e]:void 0})
this.msgOverlayManager.updateListBubbleMinimizeState(!1)
this._measureListBubbleAutomaticOpenPerformance()
this.focusedMessagingMode=!0}}))}else n?this.msgDataManager.fetchConversation(n).then((e=>{this.isDestroying||this._showDeeplinkedConvo(e,s)})):t?this._showConversationPreview(t):a&&(this.shouldOpenMostRecentConversation=!0)}afterInboxDataFetch(e){if(!this.isDestroying){this.conversationDataFetched=!0
this.msgOverlayManager.listBubbleIsMinimized||this._measureListBubbleAutomaticOpenPerformance()
if(this.shouldOpenMostRecentConversation){e.length&&this._showDeeplinkedConvo(e[0])
this.shouldOpenMostRecentConversation=!1}}}_showConversationPreview(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]
this._newConversation({previewKey:e,isConversationPreview:!0,isMinimized:!1,isJumbo:!0,focusInputOnInit:!0})
this.focusedMessagingMode=t}_showDeeplinkedConvo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:""
this._createConversationBubble({conversation:e,inmailReplyDeepLink:t,isMinimized:!1,isJumbo:!0,hasUnseenMessages:!(0,d.get)(e,"read"),focusInputOnInit:!0})
this.msgOverlayManager.updateListBubbleMinimizeState(!1)
this._measureListBubbleAutomaticOpenPerformance()
this.focusedMessagingMode=!0}_attachListeners(){if(g.default){(0,f.addEventListener)(this,window,"blur",this._onWindowBlur.bind(this));(0,f.addEventListener)(this,window,"focus",this._onWindowFocus.bind(this));(0,f.addEventListener)(this,document,"click",this._exitFocusedMessagingMode);(0,f.addEventListener)(this,window,"visibilitychange",this._handleVisibilityChange.bind(this))
this.msgOverlayManager.on("newConversation",this,"_newConversation")
this.msgOverlayManager.on("conversationPreview",this,"openConversationPreview")
this.msgOverlayManager.on("conversationLoadingState",this,"openNewLoadingBubble")
this.msgOverlayManager.on("closeExistingBubble",this._closeBubbleByConversationUrn.bind(this))}}_exitFocusedMessagingMode(e){let{target:t}=e
t.classList&&t.classList.contains("msg-overlay-container__dimmed-background")&&(this.focusedMessagingMode=!1)}_setListMinimizedState(e){if(this.msgOverlayManager.forcedMinimizedAtRoute)return
const t=(0,d.get)(e,"_listBubble")
if(t&&!(0,d.get)(t,"isMinimized")){this.msgOverlayManager.updateListBubbleMinimizeState(!1)
this._measureListBubbleAutomaticOpenPerformance()}}_showCachedConvos(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})._conversationWindows
if(!e||this.msgOverlayManager.forcedMinimizedAtRoute)return
const t=e.reduce(((e,t)=>{let{convoRecordPromises:n,cachedConvoJumboState:i,cachedConvoMinimzedState:o}=e
const{convoId:a,isJumbo:r,isMinimized:s}=t,l=this.msgDataManager.fetchConversation(a)
n.push(l)
i[a]=r
o[a]=s
return{convoRecordPromises:n,cachedConvoJumboState:i,cachedConvoMinimzedState:o}}),{convoRecordPromises:[],cachedConvoJumboState:{},cachedConvoMinimzedState:{}});(0,m.all)(t.convoRecordPromises).then((e=>{e.forEach((e=>{var n
this.msgDataManager.msgSDKEnabled||this.msgDataManager.fetchParticipantReceipts((0,d.get)(e,"entityUrn")).then((t=>{this.msgDataManager.seenReceiptsManager.setSeenReceipts((0,d.get)(e,"entityUrn"),t)}))
const i=null!==(n=t.cachedConvoJumboState[e.id])&&void 0!==n?n:(0,d.get)(e,"groupChat")
this._createConversationBubble({conversation:e,isMinimized:!(0,d.get)(this.msgUserSettings,"messagingOverlayPopups")||t.cachedConvoMinimzedState[e.id],isJumbo:i,hasUnseenMessages:!(0,d.get)(e,"read")})}))}))}_measureListBubbleAutomaticOpenPerformance(){if(this.conversationDataFetched&&!this.listBubbleAutomaticOpenPerfMeasurement&&!this.listBubbleAutomaticOpenPerfMeasurement){this.listBubbleAutomaticOpenPerfMeasurement=this.rum.startPerfMeasurement("messaging-list-bubble-automatic-open");(0,l.schedule)("afterRender",(()=>{this.listBubbleAutomaticOpenPerfMeasurement&&!this.listBubbleAutomaticOpenPerfMeasurement.isClosed&&this.rum.endPerfMeasurement(this.listBubbleAutomaticOpenPerfMeasurement)}))}}_isMessagingFormFocused(){if(g.default){const e=document.activeElement&&document.activeElement.classList
return e&&e.contains("msg-messaging-form__message")}return!1}_onWindowBlur(){this._isMessagingFormFocused()&&document.activeElement.blur()}_onWindowFocus(){this.documentTitle.resetTitle()}_handleVisibilityChange(){(0,b.default)()?this._isMessagingFormFocused()&&document.activeElement.blur():this._reloadOpenConversationEvents()}_reloadOpenConversationEvents(){return(this.msgOverlayManager.conversationBubbleLayoutManager.openBubbles||[]).forEach((e=>{if(e.conversation&&(0,d.get)(e.conversation,"id")){const t=(0,d.get)(e.conversation,"id")
this.msgDataManager.initEventCollection({name:`${t}`,conversationId:t}).fetchAndLoad({reload:!0})}}))}_fireWillRenderTrackingAndSetExpectedRenderState(e){this.clientSensor.incrementMetricCounter({groupName:"messaging",metricName:"realtime-message-should-be-rendered-in-overlay"})
const t=this.msgDataManager.receivedRealtimeMessages[(0,d.get)(e,"latestEvent.entityUrn")]
t&&(t.fireExpectedRenderClientSensor=!0)}_realtimeConversationCreated(e){const t=g.default&&document.hasFocus()&&!(0,b.default)()
if((0,_.isInmailConversation)(e)&&!t){this._playSound(h.notificationSounds.RECEIVE)
this._updateDocumentTitle(e)
return!1}if(0===(0,d.get)(e,"unreadCount")||(0,d.get)(e,"muted")||(0,d.get)(e,"latestEvent.subtype")!==se.M2M&&(0,d.get)(e,"latestEvent.subtype")!==se.INMAIL_REPLY)return!1
const n=this.conversationBubbleLayoutManager.getBubbleByConversation(e),{isMessagingRoute:i}=this
let o=!1
if(n){this._fireWillRenderTrackingAndSetExpectedRenderState(e)
if(n.isActive&&!n.isMinimized&&t)this.msgOverlayManager.markConversationAsRead(n)
else{(0,d.set)(n,"hasUnseenMessages",!0)
i||(o=!0)}}else if(!i&&"PENDING"!==(0,d.get)(e,"messageRequestState")&&"DECLINED"!==(0,d.get)(e,"messageRequestState")){this._createConversationBubble({conversation:e,focusInputOnInit:!1,hasUnseenMessages:!0,isJumbo:(0,d.get)(e,"groupChat"),isMinimized:!(0,d.get)(this.msgUserSettings,"messagingOverlayPopups"),isTriggeredByRealtime:!0}).then((t=>{this.isDestroying||t&&this._fireWillRenderTrackingAndSetExpectedRenderState(e)}))
o=!0}if(o){this.badgeService.incrementBadge("messaging");(0,f.runTask)(this,(()=>{this.msgOverlayManager.setUnseenConvoCountFromBadge()}))}t||this._updateDocumentTitle(e)
this._playSound(h.notificationSounds.RECEIVE)
return!0}_closeBubbleByConversationUrn(e){this.conversationBubbleLayoutManager.closeBubbleByConversationUrn(e)}onEvent(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]
switch(e){case"realtimeMessageReceived":this._realtimeConversationCreated(...n)
break
case"realtimeConversationDelete":this._closeBubbleByConversationUrn(...n)}}_playSound(e){(0,d.get)(this.msgUserSettings,"messagingOverlaySounds")&&e&&h.soundPlaybackUtils.playSound(e)}_updateDocumentTitle(e){let t,n;(0,f.runTask)(this,(()=>{if(!this.isDestroying){if((0,d.get)(e,"groupChat")){t="i18n_participant_messaged_group"
n=(0,d.get)(e,"latestEvent.from.name")}else{t="i18n_participant_messaged_you"
n=(0,d.get)((0,w.getParticipantNames)(e),"firstObject")}const i=this.i18n.lookupTranslation("components/msg-overlay@messaging-overlay-container",t),o=jSecure.htmlUnencode(i([{senderName:n}]))
this.documentTitle.addTitle(o)}}))}_createConversationBubble(e){s.default.testing&&e.isTriggeredByRealtime&&console.log("attempting to create conversation bubble from realtime")
return this.msgOverlayManager.createConversationBubble(e).then((t=>{if(this.isDestroying)return!1
s.default.testing&&e.isTriggeredByRealtime&&console.log("conversation bubble created from realtime",t)
!t&&e.isTriggeredByRealtime&&(this.realtimeMsgNotAutoOpened=!0)
return t}))}_newConversation(){let{composeOptionType:e,contextualTrackingInfo:t,conversationId:n="",conversationPromise:i,forwardedAttachments:o=[],forwardedEvent:a,groupConversationName:r,inMailComposeViewContext:s,invitationUrn:l,is1on1Compose:c=!1,isConversationLoadingState:u=!1,isConversationPreview:m=!1,isInMailCompose:g=!1,isJumbo:b=!1,isOpenedFromMsgButton:h=!1,entryPointData:v={},message:y="",messageActions:f={},messageContext:_,messageRecipients:w=[],msgAdapterOptions:C,placeholderText:S,previewKey:M="",showGroupEditScreen:k,smpContent:R=null,subject:O="",trackingObject:I,update:D=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=w;(0,p.isArray)(E)||(E=[E])
const x=this.conversationBubbleLayoutManager.getBubbleByRecipients(E)
if(x){if(!y)return
this.msgOverlayManager.closeConversationBubble(x)}const P=!l&&g,T=b||P||a&&(0,d.get)(a,"isInMail")
this._createConversationBubble({attachments:o,composeOptionType:e,contextualTrackingInfo:t,conversationId:n,conversationPromise:i,entryPointData:v,focusInputOnInit:!0,forwardedEvent:a,groupConversationName:r,hasUnseenMessages:!1,inMailComposeViewContext:s,invitationUrn:l,is1on1Compose:c,isConversationLoadingState:u,isConversationPreview:m,isInMailCompose:P,isJumbo:T,isMinimized:!1,isNew:!0,isOpenedFromMsgButton:h,message:y,messageActions:f,messageContext:_,messageRecipients:E,msgAdapterOptions:C,placeholderText:S,previewKey:M,showGroupEditScreen:k,smpContent:R,subject:O,trackingObject:I,update:D})}_showFirstMessage(){const{i18n:e,firstMessage:t}=this,n=(0,d.get)(t.getMessageInfo()||{},"inviter")
n&&this._newConversation({messageRecipients:n,message:e.lookupTranslation("components/msg-overlay@messaging-overlay-container","i18n_first_message_prompt_doing_well")()})}openConversation(e){this.realtimeMsgNotAutoOpened&&(this.realtimeMsgNotAutoOpened=!1)
if(e){this.msgDataManager.msgSDKEnabled||this.msgDataManager.fetchParticipantReceipts((0,d.get)(e,"entityUrn")).then((t=>{this.msgDataManager.seenReceiptsManager.setSeenReceipts((0,d.get)(e,"entityUrn"),t)}))
const t={conversation:e,isInMail:"INMAIL"===(0,d.get)(e,"latestEvent.subtype"),isMinimized:!1,focusInputOnInit:!0},n=this.conversationBubbleLayoutManager.getBubbleByConversation(e)
if(n)this.msgOverlayManager.unminimizeAndReadConversation(n)
else{t.isJumbo=(0,d.get)(e,"groupChat")||"INMAIL"===(0,d.get)(e,"latestEvent.subtype")||"SPONSORED_INMAIL"===(0,d.get)(e,"latestEvent.subtype")||(0,y.isSponsoredConversation)(e)&&1===(0,d.get)(e,"eventCollection.data").length
this._createConversationBubble(t)}"INMAIL"===(0,d.get)(e,"latestEvent.subtype")&&this.tracking.fireInteractionEvent(re.OPEN_INMAIL)}else this._createConversationBubble({isJumbo:!1,isMinimized:!1})}openConversationPreview(e){let{previewKey:t,focusMode:n=!1}=e
this._showConversationPreview(t,n)}openNewLoadingBubble(e){this._newConversation(e)}newConversation(){let{recipients:e,messageActions:t,contextualTrackingInfo:n,conversationPromise:i,isConversationLoadingState:o,isConversationPreview:a,previewKey:r,isInMailCompose:s,forwardedEvent:l,showGroupEditScreen:c,isJumbo:u,composeOptionType:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
this._newConversation({conversationPromise:i,isConversationLoadingState:o,isConversationPreview:a,previewKey:r,isInMailCompose:s,contextualTrackingInfo:n,forwardedEvent:l,messageActions:t,messageRecipients:e,showGroupEditScreen:c,isJumbo:u,composeOptionType:d})}handleSuccessfulDiscardRequest(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
this._closeBubbleByConversationUrn(e)
this.msgDataManager.removeConversation(e)
t&&this.msgDataManager.unloadConversation(e)}closeBubble(e){this.focusedMessagingMode=!1
this.msgOverlayManager.closeConversationBubble(e)}closeAVBubble(e){this.msgOverlayManager.closeAVBubble(e)}toggleAudioBubbleMinimized(){this.msgOverlayManager.toggleAudioBubbleMinimized()}},j=(0,i.default)(F.prototype,"prefetch",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=(0,i.default)(F.prototype,"i18n",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=(0,i.default)(F.prototype,"badgeService",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=(0,i.default)(F.prototype,"authenticatedUser",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=(0,i.default)(F.prototype,"identityStore",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=(0,i.default)(F.prototype,"lix",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=(0,i.default)(F.prototype,"router",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=(0,i.default)(F.prototype,"tracking",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=(0,i.default)(F.prototype,"msgOverlayManager",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=(0,i.default)(F.prototype,"documentTitle",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=(0,i.default)(F.prototype,"firstMessage",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=(0,i.default)(F.prototype,"msgDataManager",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=(0,i.default)(F.prototype,"msgComponentContextService",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,i.default)(F.prototype,"msgUserSettings",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=(0,i.default)(F.prototype,"clientSensor",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=(0,i.default)(F.prototype,"rum",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=(0,i.default)(F.prototype,"filterFromDeeplink",[C.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=(0,i.default)(F.prototype,"focusedMessagingMode",[C.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=(0,i.default)(F.prototype,"realtimeMsgNotAutoOpened",[C.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.default)(F.prototype,"afterInboxDataFetch",[d.action],Object.getOwnPropertyDescriptor(F.prototype,"afterInboxDataFetch"),F.prototype),(0,i.default)(F.prototype,"openConversation",[d.action],Object.getOwnPropertyDescriptor(F.prototype,"openConversation"),F.prototype),(0,i.default)(F.prototype,"openConversationPreview",[d.action],Object.getOwnPropertyDescriptor(F.prototype,"openConversationPreview"),F.prototype),(0,i.default)(F.prototype,"openNewLoadingBubble",[d.action],Object.getOwnPropertyDescriptor(F.prototype,"openNewLoadingBubble"),F.prototype),(0,i.default)(F.prototype,"newConversation",[d.action],Object.getOwnPropertyDescriptor(F.prototype,"newConversation"),F.prototype),(0,i.default)(F.prototype,"handleSuccessfulDiscardRequest",[d.action],Object.getOwnPropertyDescriptor(F.prototype,"handleSuccessfulDiscardRequest"),F.prototype),(0,i.default)(F.prototype,"closeBubble",[d.action],Object.getOwnPropertyDescriptor(F.prototype,"closeBubble"),F.prototype),(0,i.default)(F.prototype,"closeAVBubble",[d.action],Object.getOwnPropertyDescriptor(F.prototype,"closeAVBubble"),F.prototype),(0,i.default)(F.prototype,"toggleAudioBubbleMinimized",[d.action],Object.getOwnPropertyDescriptor(F.prototype,"toggleAudioBubbleMinimized"),F.prototype),F)
e.default=de;(0,a.setComponentTemplate)(ae,de)}))
define("msg-overlay/components/overlay-conversation-list-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/service","@glimmer/component","@ember/object","tracked-toolbox","msg-ui/viewdata/conversation-list-viewdata","msg-ui/viewdata/sdk-conversation-list-viewdata"],(function(e,t,n,i,o,a,r,s,l,c,u,d,m){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var p,g,b,h,v,y,f,_,w,C,S
const M=(0,r.createTemplateFactory)({id:"0KXvDNTK",block:'[[[10,0],[14,0,"msg-conversations-container__conversations-list msg-overlay-list-bubble__conversations-list"],[12],[1,"\\n"],[41,[28,[37,1],[[30,0,["viewData","conversationListItemViewDataElements","length"]],0],null],[[[41,[28,[37,2],[[30,1]],null],[[[41,[30,2],[[[1,"        "],[8,[39,3],null,[["@connectionProfileImages","@newConversation"],[[30,3],[30,4]]],null],[1,"\\n"]],[]],[[[1,"        "],[8,[39,4],null,[["@isAbiComplete"],[[30,5]]],null],[1,"\\n"]],[]]]],[]],[[[1,"      "],[10,0],[12],[1,"\\n        "],[10,0],[14,0,"msg-overlay-list-bubble__illustration msg-overlay-list-bubble__no-results-image"],[12],[13],[1,"\\n"],[41,[28,[37,1],[[30,1],"CONNECTIONS"],null],[[[1,"          "],[10,"h4"],[14,0,"t-16 t-black t-bold ph text-align-center ph6"],[12],[1,"\\n            "],[1,[28,[35,5],["i18n_no_messages_from_connections","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[1,"        "],[10,2],[14,0,"text-align-center mb4"],[12],[1,"\\n"],[41,[28,[37,1],[[30,1],"BLOCKED"],null],[[[1,"            "],[1,[28,[35,5],["i18n_no_spam_messages","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[37,1],[[30,1],"UNREAD"],null],[[[1,"            "],[1,[28,[35,5],["i18n_no_unread_messages","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[37,1],[[30,1],"INMAIL"],null],[[[1,"            "],[1,[28,[35,5],["i18n_no_inmail_messages","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[37,1],[[30,1],"MESSAGE_REQUEST_PENDING"],null],[[[1,"            "],[1,[28,[35,5],["i18n_no_message_request","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[37,1],[[30,1],"MESSAGE_REQUEST_DECLINED"],null],[[[1,"            "],[1,[28,[35,5],["i18n_no_declined_message_request","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[37,1],[[30,1],"CONNECTIONS"],null],[[[1,"            "],[1,[28,[35,5],["i18n_reach_out_message","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[1,"            "],[1,[28,[35,5],["i18n_no_results_found","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n          "]],[]]]],[]]]],[]]]],[]]]],[]]]],[]]],[1,"        "],[13],[1,"\\n"],[41,[28,[37,1],[[30,1],"CONNECTIONS"],null],[[[1,"          "],[10,0],[14,0,"full-width display-flex justify-center"],[12],[1,"\\n            "],[8,[39,6],[[24,0,"ph0"]],[["@click","@text","@type"],[[30,4],[28,[37,5],["i18n_create_new_message","msg-overlay/components/overlay-conversation-list-feature"],null],"tertiary"]],null],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[1,"      "],[13],[1,"\\n"]],[]]]],[]],[[[42,[28,[37,8],[[28,[37,8],[[30,0,["viewData","conversationListItemViewDataElements"]]],null]],null],"@index",[[[1,"      "],[8,[39,9],null,[["@viewData","@convoIndex","@openBubble","@disableBulkActions","@isBulkActionsMode","@handleBulkActionToggle","@selectedConversationUrns"],[[30,6],[30,7],[30,8],[30,9],[30,10],[28,[37,10],[[30,11],[30,6,["entityUrn"]]],null],[30,12]]],null],[1,"\\n"]],[6,7]],null]],[]]],[13]],["@currentConvosFilter","@hasStrongNetwork","@connectionProfileImages","@newConversation","@isAbiComplete","viewData","index","@openBubble","@disableBulkActions","@isBulkActionsMode","@onBulkActionToggle","@selectedConversationUrns"],false,["if","global-helpers@eq","global-helpers@not","msg-overlay@conversation-list-empty-page-with-strong-network-presenter","msg-overlay@conversation-list-empty-page-presenter","t","artdeco-button@artdeco-button","each","-track-array","msg-overlay@overlay-conversation-list-item-presenter","fn"]]',moduleName:"msg-overlay/components/overlay-conversation-list-feature.hbs",isStrictMode:!1})
let k=(p=(0,s.inject)("authentication@authenticated-user"),g=(0,s.inject)("msg-data@data-manager"),b=(0,s.inject)("formatter"),h=(0,s.inject)("i18n"),v=(0,s.inject)("date"),y=class extends l.default{constructor(){super(...arguments);(0,t.default)(this,"authenticatedUser",f,this);(0,t.default)(this,"msgDataManager",_,this);(0,t.default)(this,"formatter",w,this);(0,t.default)(this,"i18n",C,this);(0,t.default)(this,"dateService",S,this)}get viewData(){return this.msgDataManager.msgSDKEnabled?new m.default({conversations:this.args.conversations,participants:this.args.participants,authenticatedUserMiniProfile:this.authenticatedUser.miniProfile.content,msgDataManager:this.msgDataManager,nowTimestamp:this.dateService.now(),formatter:this.formatter,i18n:this.i18n}):new d.default({conversations:this.args.conversations.map((e=>(0,c.get)(e,"content"))),authenticatedUserMiniProfile:this.authenticatedUser.miniProfile.content,msgDataManager:this.msgDataManager,nowTimestamp:this.dateService.now(),formatter:this.formatter,i18n:this.i18n})}},f=(0,i.default)(y.prototype,"authenticatedUser",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=(0,i.default)(y.prototype,"msgDataManager",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=(0,i.default)(y.prototype,"formatter",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=(0,i.default)(y.prototype,"i18n",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=(0,i.default)(y.prototype,"dateService",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.default)(y.prototype,"viewData",[u.cached],Object.getOwnPropertyDescriptor(y.prototype,"viewData"),y.prototype),y)
e.default=k;(0,a.setComponentTemplate)(M,k)}))
define("msg-overlay/components/overlay-conversation-list-item-presenter",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@glimmer/component","@ember/object","@ember/service","msg-shared/utils/constants","ember-cli-pemberly-tracking/utils/tracking","@ember/object/internals"],(function(e,t,n,i,o,a,r,s,l,c,u,d,m){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var p,g,b,h,v
const y=(0,r.createTemplateFactory)({id:"wPQuur+G",block:'[[[11,0],[24,0,"msg-conversation-listitem__link msg-overlay-list-bubble__convo-item"],[24,"tabindex","0"],[24,"role","button"],[16,1,[30,0,["conversationCardId"]]],[17,1],[4,[38,0],["click",[30,0,["onClick"]]],null],[4,[38,0],["keydown",[30,0,["onKeyDown"]]],null],[4,[38,0],["mousemove",[30,0,["onMouseMove"]]],null],[4,[38,1],[[30,0,["controlInteractionEventName"]]],null],[4,[38,1],[[30,0,["controlInteractionEventName"]]],[["interactionType","interactionKeys"],["KEYBOARD_PRESS","ENTER,SPACEBAR"]]],[4,[38,2],[[30,0,["impressionEventPayload"]]],[["routeName","currentRoute"],[[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n  "],[10,0],[14,0,"msg-conversation-card msg-overlay-list-bubble__convo-card display-flex"],[12],[1,"\\n"],[41,[30,0,["isStarringEnabled"]],[[[1,"      "],[10,0],[14,0,"msg-conversation-card__unread-dot-container"],[12],[1,"\\n"],[41,[28,[37,6],[[30,2,["isRead"]]],null],[[[1,"          "],[10,1],[14,0,"msg-conversation-card__unread-dot"],[12],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[1,"      "],[13],[1,"\\n"]],[]],null],[1,"    "],[8,[39,7],null,[["@viewData","@onCheckboxClick","@checkboxOnly","@checked","@disableSelectability","@entitySize","@iconSize"],[[30,2,["conversationEntityViewData"]],[30,0,["handleCheckboxClick"]],[30,3],[30,0,["isChecked"]],[30,4],3,"small"]],null],[1,"\\n\\n    "],[10,0],[15,0,[29,["msg-overlay-list-bubble__convo-card-content overflow-hidden pl2\\n        ",[52,[30,0,["isStarringEnabled"]],"relative"]]]],[12],[1,"\\n"],[1,"      "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content-wrapper fl"],[12],[1,"\\n        "],[10,0],[15,0,[29,["msg-conversation-card__row\\n            ",[52,[30,0,["isStarringEnabled"]],"align-items-center display-flex"]]]],[12],[1,"\\n          "],[10,"h3"],[15,0,[29,["msg-conversation-listitem__participant-names msg-conversation-card__participant-names truncate t-14 t-black\\n              ",[52,[30,2,["isRead"]],"t-normal","t-bold"]]]],[12],[1,"\\n            "],[1,[30,2,["title"]]],[1,"\\n          "],[13],[1,"\\n"],[41,[30,0,["isStarringEnabled"]],[[[1,"            "],[10,0],[14,0,"msg-conversation-card__mute-icon-holder"],[12],[1,"\\n"],[41,[30,2,["isMute"]],[[[1,"                "],[1,[28,[35,8],null,[["class","type","size","a11y-text"],["v-align-top","mute-icon","medium",[28,[37,9],["i18n_convo_is_muted","msg-overlay/components/overlay-conversation-list-item-presenter"],[["names"],[[30,2,["title"]]]]]]]]],[1,"\\n"]],[]],null],[1,"            "],[13],[1,"\\n"]],[]],null],[41,[30,2,["timestampText"]],[[[1,"            "],[10,"time"],[15,0,[29,["msg-overlay-list-bubble-item__time-stamp t-12\\n                ",[52,[30,2,["isRead"]],"t-normal t-black--light","t-bold t-black"]]]],[12],[1,"\\n              "],[1,[30,2,["timestampText"]]],[1,"\\n            "],[13],[1,"\\n"]],[]],null],[1,"        "],[13],[1,"\\n\\n        "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n          "],[10,0],[15,0,[52,[30,0,["twoLineMessageSnippetLayout"]],"msg-overlay-list-bubble__message-snippet-container--narrow-two-line","truncate"]],[12],[1,"\\n"],[41,[30,2,["messageRequestContext"]],[[[1,"              "],[10,2],[14,0,"display-flex align-items-center overflow-hidden t-12 t-bold"],[12],[1,"\\n                "],[10,1],[14,0,"truncate flex-1"],[12],[1,"\\n                  "],[1,[28,[35,10],[[30,2,["messageRequestContext"]]],null]],[1,"\\n                "],[13],[1,"\\n              "],[13],[1,"\\n"]],[]],null],[1,"            "],[10,2],[15,0,[29,[[52,[28,[37,11],[[30,2,["messageRequestContext"]],[30,2,["nudgeText"]]],null],"msg-overlay-list-bubble__message-snippet truncate","msg-overlay-list-bubble__message-snippet--v2"],"\\n                m0 t-black t-12\\n                ",[52,[30,2,["isRead"]],"t-normal t-black--light","t-bold"]]]],[12],[1,"\\n"],[41,[30,2,["messageSnippetIcon"]],[[[1,"                "],[1,[28,[35,8],null,[["type","size","class"],[[30,2,["messageSnippetIcon"]],"small","msg-conversation-card__message-snippet-icon"]]]],[1,"\\n"]],[]],null],[41,[30,2,["messageSnippetPillText"]],[[[1,"                "],[10,1],[14,0,"msg-conversation-card__pill t-14 t-black t-bold pr1"],[12],[1,"\\n                  "],[1,[30,2,["messageSnippetPillText"]]],[1,"\\n                "],[13],[1,"\\n"]],[]],null],[1,"              "],[1,[30,2,["messageSnippetText"]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n"],[41,[51,[30,0,["isStarringEnabled"]]],[[[1,"            "],[10,0],[14,0,"msg-conversation-card__conversation-status align-items-center flex-grow-1"],[12],[1,"\\n"],[41,[30,2,["isMute"]],[[[1,"                "],[1,[28,[35,8],null,[["class","type","size","a11y-text"],["msg-conversation-card__action-icon mute-icon pr2","mute-icon","medium",[28,[37,9],["i18n_convo_is_muted","msg-overlay/components/overlay-conversation-list-item-presenter"],[["names"],[[30,2,["title"]]]]]]]]],[1,"\\n"]],[]],[[[41,[28,[37,6],[[30,2,["isRead"]]],null],[[[1,"                "],[8,[39,13],[[24,0,"msg-conversation-card__unread-count artdeco-notification-badge--new text-align-center"]],[["@number","@showCount"],[[30,2,["conversationUnreadCount"]],true]],[["default"],[[[[1,"\\n"],[1,"                "]],[]]]]],[1,"\\n              "]],[]],null]],[]]],[1,"            "],[13],[1,"\\n"]],[]],null],[41,[30,0,["isStarringEnabled"]],[[[1,"            "],[10,0],[14,0,"msg-overlay-list-bubble__star-icon-container"],[12],[1,"\\n"],[1,"              "],[11,"button"],[16,0,[29,["artdeco-button artdeco-button--circle artdeco-button--muted artdeco-button--1 artdeco-button--tertiary msg-overlay-list-bubble__star-icon\\n                  ",[52,[30,2,["isStarred"]],"msg-overlay-list-bubble__star-icon--starred"]]]],[16,"aria-label",[52,[30,2,["isStarred"]],[28,[37,9],["i18n_remove_star","msg-overlay/components/overlay-conversation-list-item-presenter"],null],[28,[37,9],["i18n_star_conversation","msg-overlay/components/overlay-conversation-list-item-presenter"],null]]],[24,4,"button"],[4,[38,0],["click",[30,0,["toggleStarState"]]],null],[4,[38,0],["keydown",[30,0,["toggleStarState"]]],null],[12],[1,"\\n"],[41,[30,2,["isStarred"]],[[[1,"                  "],[1,[28,[35,8],null,[["type","size"],["star-filled-icon","small"]]]],[1,"\\n"]],[]],null],[41,[51,[30,2,["isStarred"]]],[[[1,"                  "],[8,[39,14],null,null,null],[1,"\\n"]],[]],null],[1,"              "],[13],[1,"\\n            "],[13],[1,"\\n"]],[]],null],[1,"        "],[13],[1,"\\n\\n"],[41,[30,2,["nudgeText"]],[[[1,"          "],[11,2],[16,0,[29,[[52,[28,[37,15],null,null],"msg-conversation-card__nudge-text--small","msg-conversation-card__nudge-text--large"],"\\n              msg-conversation-card__nudge-text"]]],[4,[38,2],null,[["registerOnImpression","routeName","currentRoute"],[[30,0,["onNudgeImpression"]],[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n            "],[1,[30,2,["nudgeText"]]],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],["&attrs","@viewData","@isBulkActionsMode","@disableBulkActions"],false,["on","ember-cli-pemberly-tracking@track-interaction","ember-cli-pemberly-tracking@track-impression","get","-get-dynamic-var","if","global-helpers@not","msg-ui@selectable-entity-presenter","artdeco-icons-web@li-icon","t","text-view-model@text-view-model","global-helpers@or","unless","artdeco-notification-badge@artdeco-notification-badge","msg-ui@primitives/message-star-outline","msg-shared@is-in-overlay"]]',moduleName:"msg-overlay/components/overlay-conversation-list-item-presenter.hbs",isStrictMode:!1}),{IMPRESSION_KEYS:{CONVERSATION:f},MODULE_KEYS:{OVERLAY_CONVERSATION_LIST:_},KEYCODES:{ENTER:w,SPACEBAR:C}}=u.default
let S=(p=(0,c.inject)("msg-data@data-manager"),g=(0,c.inject)("lix"),b=class extends s.default{constructor(){super(...arguments);(0,n.default)(this,"conversationCardId",`overlay-conversation-card-${(0,m.guidFor)(this)}`);(0,t.default)(this,"msgDataManager",h,this);(0,t.default)(this,"lix",v,this)}get controlInteractionEventName(){return`overlay.${this.args.viewData.controlName}`}get isChecked(){var e
return null===(e=this.args.selectedConversationUrns)||void 0===e?void 0:e.includes(this.args.viewData.entityUrn)}get isStarringEnabled(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-message-starring")}get twoLineMessageSnippetLayout(){return!this.args.viewData.messageRequestContext}onKeyDown(e){if(e.keyCode===w||e.keyCode===C){e.preventDefault()
this.args.isBulkActionsMode?this.args.handleBulkActionToggle():this.args.openBubble(this.args.viewData.entityUrn)}}onMouseMove(e){var t,n
null===(t=(n=this.args).onMouseMove)||void 0===t||t.call(n,e)}onClick(){if(this.args.isBulkActionsMode)this.args.handleBulkActionToggle()
else{this.args.openBubble(this.args.viewData.entityUrn)
this.msgDataManager.nudgingDataManager.fireClickTracking(this.args.viewData.id)}}toggleStarState(e){if(e.keyCode===w||e.keyCode===C||"click"===e.type){e.stopPropagation()
e.preventDefault()
const{entityUrn:t,isStarred:n}=this.args.viewData
this.msgDataManager.toggleConversationStar(t,!n)
const i=document.getElementById(this.conversationCardId).querySelector(".msg-overlay-list-bubble__star-icon")
null==i||i.blur()}}onNudgeImpression(){const{viewData:e,convoIndex:t}=this.args
return()=>this.msgDataManager.nudgingDataManager.onImpression(e.id,e.conversationBackendUrn,t+1)}impressionEventPayload(){if(this.isDestroying||this.isDestroyed)return[]
const{conversationBackendUrn:e,participantPresenceStatuses:t}=this.args.viewData
return{name:f,body:{moduleKey:_,conversations:[{objectUrn:e,trackingId:(0,d.generateTrackingId)()}],participantPresenceStatuses:t}}}handleCheckboxClick(){this.args.handleBulkActionToggle&&this.args.handleBulkActionToggle(this.args.viewData.id)}},h=(0,i.default)(b.prototype,"msgDataManager",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=(0,i.default)(b.prototype,"lix",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.default)(b.prototype,"onKeyDown",[l.action],Object.getOwnPropertyDescriptor(b.prototype,"onKeyDown"),b.prototype),(0,i.default)(b.prototype,"onMouseMove",[l.action],Object.getOwnPropertyDescriptor(b.prototype,"onMouseMove"),b.prototype),(0,i.default)(b.prototype,"onClick",[l.action],Object.getOwnPropertyDescriptor(b.prototype,"onClick"),b.prototype),(0,i.default)(b.prototype,"toggleStarState",[l.action],Object.getOwnPropertyDescriptor(b.prototype,"toggleStarState"),b.prototype),(0,i.default)(b.prototype,"onNudgeImpression",[l.action],Object.getOwnPropertyDescriptor(b.prototype,"onNudgeImpression"),b.prototype),(0,i.default)(b.prototype,"impressionEventPayload",[l.action],Object.getOwnPropertyDescriptor(b.prototype,"impressionEventPayload"),b.prototype),(0,i.default)(b.prototype,"handleCheckboxClick",[l.action],Object.getOwnPropertyDescriptor(b.prototype,"handleCheckboxClick"),b.prototype),b)
e.default=S;(0,a.setComponentTemplate)(y,S)}))
define("msg-overlay/components/overlay-search-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","ember","@ember/service","rsvp","@ember/object","msg-shared/utils/scroll-blocker-helper","msg-shared/utils/constants","ember-batcher","global-helpers/helpers/name","global-utils/utils/ember-cli-search-typeahead-utils","ember-lifeline","msg-shared/helpers/get-participant-names","@glimmer/component","@glimmer/tracking","msg-overlay/viewdata/overlay-search-viewdata"],(function(e,t,n,i,o,a,r,s,l,c,u,d,m,p,g,b,h,v,y,f,_){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var w,C,S,M,k,R,O,I,D,E,x,P,T,N,A,B,L,z,F,j,U,V,q,H,K,Y,G,W,J,X
const Q=(0,r.createTemplateFactory)({id:"GF7Z5x8M",block:'[[[11,0],[16,0,[29,["msg-overlay-list-bubble-search\\n    ",[52,[30,0,["shouldShowSearchContent"]]," msg-overlay-list-bubble-search--search-content-visible"]]]],[4,[38,1],[[30,0,["onElementInsert"]]],null],[4,[38,2],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search",[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n"],[41,[30,1],[[[1,"    "],[10,0],[14,0,"msg-overlay-list-bubble-search__input-container"],[12],[1,"\\n"],[1,"      "],[10,"label"],[14,0,"a11y-text"],[14,"for","msg-overlay-list-bubble-search__search-typeahead-input"],[12],[1,"\\n        "],[1,[28,[35,5],["i18n_a11y_search_hint_text","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n      "],[13],[1,"\\n      "],[1,[28,[35,6],null,[["type","class","size"],["search-icon","msg-overlay-list-search__search-icon","small"]]]],[1,"\\n      "],[8,[39,7],[[24,1,"msg-overlay-list-bubble-search__search-typeahead-input"],[24,0,"msg-overlay-list-bubble-search__search-typeahead-input"],[16,"placeholder",[28,[37,5],["i18n_find_a_connection","msg-overlay/components/overlay-search-feature"],null]],[24,"autocomplete","off"],[4,[38,8],["input",[30,0,["onInputChange"]]],null],[4,[38,8],["focusin",[30,0,["onInputFocusIn"]]],null],[4,[38,8],["focusout",[30,0,["onInputFocusOut"]]],null],[4,[38,8],["keyup",[30,0,["onKeyUp"]]],null]],[["@value","@insert-newline"],[[30,0,["searchTerm"]],[30,0,["onInputEnterKeyRelease"]]]],null],[1,"\\n      "],[8,[39,9],null,[["@class","@placement","@justification","@isOpen","@onVisibilityChange"],["msg-overlay-list-bubble__filters-dropdown","bottom","right",[30,0,["isConvoFiltersDropdownOpen"]],[30,0,["toggleConvoFilters"]]]],[["default"],[[[[1,"\\n        "],[8,[30,2,["dropdown-trigger"]],null,[["@class","@tabindex"],["msg-overlay-list-bubble__filters-btn","0"]],[["default"],[[[[1,"\\n          "],[1,[28,[35,6],null,[["type","size","a11y-text"],["filter-icon","small",[28,[37,5],["i18n_filter_messages_by","msg-overlay/components/overlay-search-feature"],null]]]]],[1,"\\n        "]],[]]]]],[1,"\\n        "],[8,[30,2,["dropdown-content"]],null,[["@classNames","@arrowDir"],["msg-overlay-list-bubble__filters-dropdown-content","right"]],[["default"],[[[[1,"\\n          "],[10,"ul"],[12],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n"],[1,"              "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[52,[30,3],false,true],[28,[37,11],[[30,0,["applyFilter"]],""],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_all_messages","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"ARCHIVED"],null],[28,[37,11],[[30,0,["applyFilter"]],"ARCHIVED"],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_archived","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"CONNECTIONS"],null],[28,[37,11],[[30,0,["applyFilter"]],"CONNECTIONS"],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_connections","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n"],[41,[30,0,["isStarringEnabled"]],[[[1,"              "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n                "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"STARRED"],null],[28,[37,11],[[30,0,["applyFilter"]],"STARRED"],null],"button"]],[["default"],[[[[1,"\\n                  "],[1,[28,[35,5],["i18n_starred","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                "]],[]]]]],[1,"\\n              "],[13],[1,"\\n"]],[]],null],[1,"            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"UNREAD"],null],[28,[37,11],[[30,0,["applyFilter"]],"UNREAD"],null],"button"]],[["default"],[[[[1,"\\n                "],[10,0],[14,0,"display-flex align-items-center justify-space-between"],[12],[1,"\\n                  "],[10,1],[12],[1,"\\n                    "],[1,[28,[35,5],["i18n_unread","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                  "],[13],[1,"\\n                "],[13],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"INMAIL"],null],[28,[37,11],[[30,0,["applyFilter"]],"INMAIL"],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_inmail","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n              "],[8,[39,10],null,[["@selected","@itemSelected","@role"],[[28,[37,12],[[30,3],"BLOCKED"],null],[28,[37,11],[[30,0,["applyFilter"]],"BLOCKED"],null],"button"]],[["default"],[[[[1,"\\n                "],[1,[28,[35,5],["i18n_spam","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n        "]],[]]]]],[1,"\\n      "]],[2]]]]],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["shouldShowSelectedFilter"]],[[[1,"    "],[18,9,[[28,[37,14],null,[["filterSection"],[[50,"dummy-yield-wrapper@dummy-yield-wrapper",0,null,null]]]]]],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["hasActiveSearch"]],[[[1,"    "],[8,[39,16],null,[["@icon","@size","@circle","@class","@text","@type","@click"],["cancel-icon","small",true,"msg-search-form__cancel-search",[28,[37,5],["i18n_cancel_search","msg-overlay/components/overlay-search-feature"],null],"tertiary",[30,4]]],null],[1,"\\n"]],[]],null],[1,"  "],[10,0],[15,0,[29,["relative display-flex justify-center flex-column overflow-hidden\\n      ",[52,[51,[30,0,["shouldShowSearchContent"]]]," hidden"]]]],[12],[1,"\\n    "],[10,0],[14,0,"msg-overlay-list-bubble-search-content"],[12],[1,"\\n"],[41,[30,0,["searchPerformed"]],[[[41,[30,0,["shouldShowSearchLoadingView"]],[[[1,"          "],[8,[39,18],null,[["@size","@class"],["small","msg-overlay-list-bubble-search__loading-state"]],null],[1,"\\n"]],[]],[[[1,"          "],[11,0],[24,0,"msg-overlay-list-bubble-search__search-result-container"],[4,[38,8],["mousedown",[30,0,["noOp"]]],null],[12],[1,"\\n"],[41,[30,0,["shouldShowNoResultView"]],[[[1,"              "],[11,0],[24,0,"msg-overlay-list-bubble-search__no-result-container text-align-center"],[4,[38,2],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search_no_results",[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                "],[10,0],[14,0,"msg-overlay-list-bubble__illustration msg-overlay-list-bubble-search__no-result-illustration"],[12],[13],[1,"\\n                "],[10,2],[14,0,"ph2 t-14 t-black t-normal"],[12],[1,"\\n                  "],[1,[28,[35,5],["i18n_we_did_not_find_anything","msg-overlay/components/overlay-search-feature"],[["searchTerm"],[[30,0,["searchTerm"]]]]]],[1,"\\n                "],[13],[1,"\\n              "],[13],[1,"\\n"]],[]],[[[41,[30,0,["displayedConnections","length"]],[[[1,"                "],[11,"header"],[24,0,"msg-overlay-list-bubble__list-header msg-overlay-list-bubble-search__result-header"],[4,[38,2],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search_typeahead_results",[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                  "],[10,"h5"],[14,0,"msg-overlay-list-bubble__list-header-title t-12 t-black--light t-bold truncate"],[12],[1,"\\n                    "],[1,[28,[35,5],["i18n_connections_matched","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                  "],[13],[1,"\\n                "],[13],[1,"\\n                "],[10,"ul"],[14,0,"msg-overlay-list-bubble-search__connection-search-result-list"],[12],[1,"\\n"],[42,[28,[37,20],[[28,[37,20],[[30,0,["viewData","connectionSearchResultViewDataElements"]]],null]],null],null,[[[1,"                    "],[10,"li"],[15,0,[29,["msg-overlay-list-bubble-search__list-item display-flex align-items-center pv2 ph3\\n                        ",[52,[28,[37,12],[[30,6],[30,0,["highlightedItemIndex"]]],null],"msg-overlay-list-bubble-search__list-item--selected"]]]],[12],[1,"\\n                      "],[8,[39,21],null,[["@itemIndex","@viewData","@caption","@onClick","@onMouseMove"],[[30,6],[30,5],[28,[37,22],[[30,5,["subtext"]],[30,5,["caption"]]],null],[28,[37,11],[[30,0,["onConnectionSearchResultSelect"]],[30,5,["miniProfile"]]],null],[28,[37,11],[[30,0,["onListItemMouseMove"]],[30,6],false],null]]],null],[1,"\\n                    "],[13],[1,"\\n"]],[5,6]],null],[1,"                "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["matchedConversations","length"]],[[[1,"                "],[11,"header"],[24,0,"msg-overlay-list-bubble__list-header msg-overlay-list-bubble-search__result-header"],[4,[38,2],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search_results",[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                  "],[10,"h5"],[14,0,"msg-overlay-list-bubble__list-header-title t-12 t-black--light t-bold truncate"],[12],[1,"\\n                    "],[1,[28,[35,5],["i18n_conversation_history","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                  "],[13],[1,"\\n                "],[13],[1,"\\n"],[1,"                "],[10,0],[14,0,"msg-overlay-list-bubble-search__content-search-result-list"],[12],[1,"\\n"],[42,[28,[37,20],[[28,[37,20],[[30,0,["viewData","conversationListItemViewDataElements"]]],null]],null],null,[[[1,"                    "],[11,0],[4,[38,23],[[28,[37,11],[[30,0,["createSearchItemImpressionEvent"]],[30,7],[30,8]],null]],[["routeName","currentRoute"],[[28,[37,3],[[53,"outletState"],"render.name"],null],[28,[37,3],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                      "],[8,[39,24],[[16,0,[52,[28,[37,12],[[30,8],[30,0,["highlightedConversationResultIndex"]]],null],"msg-overlay-list-bubble__convo-item--selected"]]],[["@viewData","@convoIndex","@openBubble","@onMouseMove","@disableBulkActions"],[[30,7],[30,8],[30,0,["onContentSearchResultSelect"]],[28,[37,11],[[30,0,["onListItemMouseMove"]],[30,8],true],null],true]],null],[1,"\\n                    "],[13],[1,"\\n"]],[7,8]],null],[41,[30,0,["loadMoreInProgress"]],[[[1,"                    "],[8,[39,18],null,[["@size"],["small"]],null],[1,"\\n"]],[]],null],[41,[30,0,["shouldLoadMoreConversations"]],[[[1,"                    "],[8,[39,25],null,[["@inView","@rootSelector"],[[30,0,["infiniteScroll"]],".msg-overlay-list-bubble-search-content"]],null],[1,"\\n"]],[]],null],[1,"                "],[13],[1,"\\n"]],[]],null]],[]]],[1,"          "],[13],[1,"\\n"]],[]]]],[]],[[[1,"        "],[10,0],[14,0,"msg-overlay-list-bubble-search__history-placeholder-container text-align-center"],[12],[1,"\\n          "],[10,0],[14,0,"msg-overlay-list-bubble__illustration msg-overlay-list-bubble-search__history-placeholder-illustration"],[12],[13],[1,"\\n          "],[10,2],[14,0,"t-14 t-black t-normal ph2"],[12],[1,"\\n            "],[1,[28,[35,5],["i18n_search_your_messages","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[]]],[1,"    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],["@showSearchInput","dropdown","@currentConvosFilter","@clearActiveSearch","connection","index","viewData","index","&default"],false,["if","did-insert","ember-cli-pemberly-tracking@track-render","get","-get-dynamic-var","t","artdeco-icons-web@li-icon","input","on","artdeco-dropdown@artdeco-dropdown","artdeco-dropdown@artdeco-dropdown-item","fn","global-helpers@eq","yield","hash","component","artdeco-button@artdeco-button","unless","artdeco-loader@artdeco-loader","each","-track-array","msg-overlay@connection-search-result-item-presenter","global-helpers@or","ember-cli-pemberly-tracking@track-impression","msg-overlay@overlay-conversation-list-item-presenter","msg-ui@visible-beacon"]]',moduleName:"msg-overlay/components/overlay-search-feature.hbs",isStrictMode:!1}),{KEYCODES:$,CONTROL_INTERACTION_KEYS:Z}=m.default,ee=".msg-overlay-list-bubble-search__search-typeahead-input",te=".msg-overlay-list-bubble-search-content",ne=".msg-overlay-list-bubble-search__list-item",ie=new Set(["ARCHIVED","CONNECTIONS","STARRED","UNREAD","INMAIL","BLOCKED"])
let oe=(w=(0,l.inject)("lix"),C=(0,l.inject)("i18n"),S=(0,l.inject)("tracking"),M=(0,l.inject)("global-services@a11y-notification"),k=(0,l.inject)("msg-data@data-manager"),R=(0,l.inject)("search-services@search-tracking-v2"),O=(0,l.inject)("authentication@authenticated-user"),I=(0,l.inject)("date"),D=(0,l.inject)("formatter"),E=class extends y.default{constructor(){super(...arguments);(0,t.default)(this,"lix",x,this);(0,t.default)(this,"i18n",P,this);(0,t.default)(this,"tracking",T,this);(0,t.default)(this,"a11yNotification",N,this);(0,t.default)(this,"msgDataManager",A,this);(0,t.default)(this,"searchTrackingV2",B,this);(0,t.default)(this,"authenticatedUser",L,this);(0,t.default)(this,"dateService",z,this);(0,t.default)(this,"formatter",F,this);(0,t.default)(this,"connectionSearchPerformed",j,this);(0,t.default)(this,"contentSearchPerformed",U,this);(0,t.default)(this,"inputHasFocus",V,this);(0,t.default)(this,"matchedConnections",q,this);(0,t.default)(this,"matchedConversations",H,this);(0,t.default)(this,"shouldShowSearchLoadingView",K,this);(0,t.default)(this,"collection",Y,this);(0,t.default)(this,"highlightedItemIndex",G,this);(0,t.default)(this,"searchTerm",W,this);(0,t.default)(this,"isConvoFiltersDropdownOpen",J,this);(0,t.default)(this,"loadMoreInProgress",X,this);(0,n.default)(this,"collectionName",void 0);(0,n.default)(this,"searchField",void 0);(0,n.default)(this,"hasMoreContentSearchResults",!1);(0,n.default)(this,"scrollSection",void 0)}get isStarringEnabled(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-message-starring")}get searchPerformed(){return this.connectionSearchPerformed||this.contentSearchPerformed}get shouldShowSelectedFilter(){const{currentConvosFilter:e}=this.args
return e&&ie.has(e)}get shouldShowSearchContent(){return this.inputHasFocus}get displayedConnections(){return this.matchedConnections.slice(0,3)}get shouldShowNoResultView(){return 0===this.displayedResultsLength&&this.connectionSearchPerformed&&this.contentSearchPerformed}get displayedResultsLength(){return this.displayedConnections.length+this.matchedConversations.length}get listItemCount(){return this.searchPerformed&&this.displayedResultsLength}get highlightedConversationResultIndex(){return this.highlightedItemIndex-this.displayedConnections.length}get searchResultConversationCollection(){return this.msgDataManager.inboxManager.getConversationCollectionByName(this.collectionName)}onElementInsert(e){this.currentElement=e
this.searchField=e.querySelector(ee)
this.scrollSection=e.querySelector(te);(0,d.default)(this,this.scrollSection)}_performSearch(e){this.shouldShowSearchLoadingView=!0
const t=(new Date).getTime()
this.lastRequestTime=t
const n=[this.msgDataManager.fetchTypeaheadResults(e).then((e=>this._handleConnectionSearchResults(e,t)))],i={q:"search",keywords:e,createdBefore:Date.now()}
"ARCHIVED"===this.args.currentConvosFilter?i.folders=[this.args.currentConvosFilter]:this.args.currentConvosFilter&&(i.filters=[this.args.currentConvosFilter])
this.collectionName=`${e}-${Date.now()}`
const o=this.msgDataManager.inboxManager.loadCollection(this.collectionName,i).then((()=>{this._handleConversationSearchResults(this.searchResultConversationCollection.data,t)}))
n.push(o);(0,c.all)(n).then((()=>{if(!this.isDestroying){this.shouldShowSearchLoadingView=!1
0!==this.displayedResultsLength&&this.a11yNotify("i18n_a11y_navigate_search_results")}}))}_handleSearchTermChange(e){var t,n
const i=e?e.trim():"",o=i.length>0
this.highlightedItemIndex=-1
o?(0,h.debounceTask)(this,"_performSearch",i,150):this._clearSearchResults()
null===(t=(n=this.args).onSearchTermChange)||void 0===t||t.call(n,i)}_handleConversationSearchResults(e,t){if(t!==this.lastRequestTime||0===this.searchTerm.length)return(0,c.reject)()
this.contentSearchPerformed=!0
this.matchedConversations=e
this.hasMoreContentSearchResults=e.length>0
this.a11yNotify("i18n_a11y_conversation_results_found",{resultsLength:e.length})
return(0,c.resolve)()}_handleConnectionSearchResults(e,t){if(t!==this.lastRequestTime||0===this.searchTerm.length)return(0,c.reject)()
this.connectionSearchPerformed=!0
this.matchedConnections=e
this.a11yNotify("i18n_a11y_connection_results_found",{resultsLength:e.length})
return(0,c.resolve)()}_clearSearchResults(){this.connectionSearchPerformed=!1
this.matchedConnections=[]
this.contentSearchPerformed=!1
this.matchedConversations=[]}_clearInputField(){this.searchTerm=""
this._handleSearchTermChange("")}_moveSelectedItem(e){const t=this.listItemCount
if(0===t)return
const n=this.highlightedItemIndex
let i
i=-1===n?1===e?0:t-1:(n+e+t)%t
s.default.testing&&console.log("[MSG-56428] logging for unstable search interaction test: ","currIndex: ",n," newIndex: ",i)
this.highlightedItemIndex=i
this._a11yNotifyItemSelectionChange();(0,p.mutateDOM)((()=>{if(!this.isDestroying)if(0===i)this.scrollSection.scrollTop=0
else{const e=this.currentElement.querySelectorAll(ne)[i]
if(e){const t=e.offsetTop,n=t+e.offsetHeight
n>this.scrollSection.offsetHeight+this.scrollSection.scrollTop?this.scrollSection.scrollTop=n-this.scrollSection.offsetHeight:t<this.scrollSection.scrollTop&&(this.scrollSection.scrollTop=t)}}}))}_a11yNotifyItemSelectionChange(){if(this.searchPerformed)if(this.highlightedItemIndex<this.displayedConnections.length)this.a11yNotify("i18n_a11y_search_result_connection_fullname",{connectionName:(0,g.getName)((0,u.get)(this.displayedConnections[this.highlightedItemIndex],"miniProfile"))})
else{const e=this.matchedConversations[this.highlightedConversationResultIndex]
let t
t="SPONSORED_INMAIL"===(0,u.get)(e,"latestEvent.subtype")?"i18n_a11y_search_result_spinmail_from_name":(0,u.get)(e,"groupChat")?"i18n_a11y_search_result_conversation_names":"i18n_a11y_search_result_participant_full_name"
this.a11yNotify(t,{names:(0,v.getParticipantNames)(e)})}}_openConnectionSearchResult(e){this._clearInputField()
this.args.openNewConversation({recipients:[e]})
this.tracking.fireInteractionEvent(Z.SELECT_CONNECTION_SEARCH_RESULT)}_openContentSearchResult(e){var t
const n=(0,u.get)(e,"backendUrn"),i=null===(t=this.searchResultConversationCollection)||void 0===t?void 0:t.collectionMetadata
this._clearInputField()
this.args.openBubble(e)
this.tracking.fireInteractionEvent(Z.SELECT_CONTENT_SEARCH_RESULT)
i&&this.searchTrackingV2.trackAction("MESSAGING_VIEW_RESULT",(0,b.getResultTrackingInfo)(e,(0,u.get)(i,"rawSearchId"),(0,u.get)(i,"trackingIdMap")[n]))}onKeyUp(e){if(this.inputHasFocus)switch(e.keyCode){case $.UP_ARROW:this._moveSelectedItem(-1)
e.preventDefault()
break
case $.DOWN_ARROW:this._moveSelectedItem(1)
e.preventDefault()
break
case $.ESC:this._clearInputField()}}infiniteScroll(){if(!this.hasMoreContentSearchResults)return(0,c.resolve)(!1)
this.loadMoreInProgress=!0
return this.msgDataManager.inboxManager.loadMore(this.collectionName).then((e=>{const t=e.length
if(!this.isDestroying){this.matchedConversations=this.searchResultConversationCollection.data
this.hasMoreContentSearchResults=t}return(0,c.resolve)(t)})).finally((()=>{this.loadMoreInProgress=!1}))}get shouldLoadMoreConversations(){return!(!this.matchedConversations||0===this.matchedConversations.length)&&(!this.searchResultConversationCollection.lastSetOfRecordsLoaded&&!this.loadMoreInProgress)}get viewData(){const{i18n:e,authenticatedUser:t,formatter:n,msgDataManager:i,dateService:o,displayedConnections:a,matchedConversations:r}=this,s=(0,u.get)(t,"miniProfile.content")
return new _.default({i18n:e,authenticatedUserMiniProfile:s,dateService:o,formatter:n,msgDataManager:i,matchedConnections:a.map((e=>(0,u.get)(e,"content"))),matchedConversations:r.map((e=>(0,u.get)(e,"content")))})}a11yNotify(e,t){const n=this.i18n.lookupTranslation("components/msg-overlay@overlay-search-feature",e)
this.a11yNotification.setTextInLiveRegion(n([t]))}toggleConvoFilters(e){this.isConvoFiltersDropdownOpen=e
this.tracking.fireInteractionEvent("overlay.filter_messages_by","SHORT_PRESS")}applyFilter(e){this.isConvoFiltersDropdownOpen=!1
if(this.args.currentConvosFilter!==e){this.args.onFilterApply(e)
this._handleSearchTermChange(this.searchTerm)}}clearFilters(){this.args.onClearFilters()
this._handleSearchTermChange(this.searchTerm)}onInputFocusIn(){this.inputHasFocus=!0;(0,p.mutateDOM)((()=>{this.isDestroying||(this.scrollSection.scrollTop=0)}))
this.tracking.fireInteractionEvent(Z.FOCUS_SEARCH_BOX)}onInputFocusOut(){this.inputHasFocus=!1}onInputEnterKeyRelease(){if(-1!==this.highlightedItemIndex&&this.searchPerformed){const e=this.displayedConnections.length
if(this.highlightedItemIndex<e){const e=this.displayedConnections[this.highlightedItemIndex]
this._openConnectionSearchResult((0,u.get)(e,"miniProfile"))}else{const e=this.matchedConversations[this.highlightedConversationResultIndex]
this._openContentSearchResult(e)}}}clearInputField(){this._clearInputField()
this.tracking.fireInteractionEvent(Z.CANCEL_SEARCH)}onConnectionSearchResultSelect(e){this._openConnectionSearchResult(e)}onContentSearchResultSelect(e){const t=this.matchedConversations.find((t=>(0,u.get)(t,"entityUrn")===e))
this._openContentSearchResult(t)}onInputChange(e){this.searchTerm=e.target.value
this._handleSearchTermChange(this.searchTerm)}onListItemMouseMove(e,t,n){if(this.lastX!==n.screenX||this.lastY!==n.screenY){this.highlightedItemIndex=t?e+this.displayedConnections.length:e
this.lastX=n.screenX
this.lastY=n.screenY}}createSearchItemImpressionEvent(e,t){var n
if(this.isDestroying)return[]
const i=null===(n=this.searchResultConversationCollection)||void 0===n?void 0:n.collectionMetadata
return i?{name:"SearchImpressionV2Event",body:{results:[{duration:0,entityUrn:e.entityUrn,gridPosition:{row:t+1,column:1},resultSize:{height:0,width:0},searchId:(0,u.get)(i,"rawSearchId"),trackingId:(0,u.get)(i,"trackingIdMap")[e.conversationBackendUrn],visibleHeight:0,visibleTime:0,isCacheHit:!1}]}}:[]}noOp(e){e.preventDefault()}},x=(0,i.default)(E.prototype,"lix",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=(0,i.default)(E.prototype,"i18n",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,i.default)(E.prototype,"tracking",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=(0,i.default)(E.prototype,"a11yNotification",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,i.default)(E.prototype,"msgDataManager",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=(0,i.default)(E.prototype,"searchTrackingV2",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,i.default)(E.prototype,"authenticatedUser",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=(0,i.default)(E.prototype,"dateService",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=(0,i.default)(E.prototype,"formatter",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=(0,i.default)(E.prototype,"connectionSearchPerformed",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=(0,i.default)(E.prototype,"contentSearchPerformed",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=(0,i.default)(E.prototype,"inputHasFocus",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q=(0,i.default)(E.prototype,"matchedConnections",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=(0,i.default)(E.prototype,"matchedConversations",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=(0,i.default)(E.prototype,"shouldShowSearchLoadingView",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=(0,i.default)(E.prototype,"collection",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=(0,i.default)(E.prototype,"highlightedItemIndex",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),W=(0,i.default)(E.prototype,"searchTerm",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=(0,i.default)(E.prototype,"isConvoFiltersDropdownOpen",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X=(0,i.default)(E.prototype,"loadMoreInProgress",[f.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(E.prototype,"onElementInsert",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"onElementInsert"),E.prototype),(0,i.default)(E.prototype,"onKeyUp",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"onKeyUp"),E.prototype),(0,i.default)(E.prototype,"infiniteScroll",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"infiniteScroll"),E.prototype),(0,i.default)(E.prototype,"toggleConvoFilters",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"toggleConvoFilters"),E.prototype),(0,i.default)(E.prototype,"applyFilter",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"applyFilter"),E.prototype),(0,i.default)(E.prototype,"clearFilters",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"clearFilters"),E.prototype),(0,i.default)(E.prototype,"onInputFocusIn",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"onInputFocusIn"),E.prototype),(0,i.default)(E.prototype,"onInputFocusOut",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"onInputFocusOut"),E.prototype),(0,i.default)(E.prototype,"onInputEnterKeyRelease",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"onInputEnterKeyRelease"),E.prototype),(0,i.default)(E.prototype,"clearInputField",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"clearInputField"),E.prototype),(0,i.default)(E.prototype,"onConnectionSearchResultSelect",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"onConnectionSearchResultSelect"),E.prototype),(0,i.default)(E.prototype,"onContentSearchResultSelect",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"onContentSearchResultSelect"),E.prototype),(0,i.default)(E.prototype,"onInputChange",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"onInputChange"),E.prototype),(0,i.default)(E.prototype,"onListItemMouseMove",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"onListItemMouseMove"),E.prototype),(0,i.default)(E.prototype,"createSearchItemImpressionEvent",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"createSearchItemImpressionEvent"),E.prototype),(0,i.default)(E.prototype,"noOp",[u.action],Object.getOwnPropertyDescriptor(E.prototype,"noOp"),E.prototype),E)
e.default=oe;(0,a.setComponentTemplate)(Q,oe)}))
define("msg-overlay/components/presence-onboarding-presenter",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/object","@ember/service","@glimmer/component","@glimmer/tracking","global-utils/utils/get-csrf-token","rsvp"],(function(e,t,n,i,o,a,r,s,l,c,u,d,m){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var p,g,b,h,v,y,f,_,w,C,S,M,k,R,O,I
const D=(0,r.createTemplateFactory)({id:"D/CGQt2O",block:'[[[41,[30,0,["showPresenceOnboardingPresenter"]],[[[1,"  "],[11,0],[24,0,"msg-overlay-presence-onboarding-presenter"],[4,[38,1],["click",[30,0,["stopPropagation"]]],null],[12],[1,"\\n    "],[10,2],[14,0,"t-14"],[12],[1,"\\n      "],[1,[28,[35,2],["i18n_active_status","msg-overlay/components/presence-onboarding-presenter"],null]],[1,"\\n      "],[10,3],[14,6,"/help/linkedin/answer/84123"],[14,"target","_blank"],[14,"rel","noopener noreferrer"],[14,0,"t-black link-without-visited-state"],[12],[1,"\\n        "],[1,[28,[35,2],["i18n_learn_more","msg-overlay/components/presence-onboarding-presenter"],null]],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n    "],[10,0],[14,0,"display-flex justify-flex-end mt2"],[12],[1,"\\n      "],[8,[39,3],[[16,"aria-label",[28,[37,2],["a11y_manage_active_status","msg-overlay/components/presence-onboarding-presenter"],null]],[4,[38,1],["click",[30,0,["manageActiveStatus"]]],null],[4,[38,4],["active_status_onboarding_manage"],null]],[["@class","@size","@type","@color"],["mr2","1","tertiary","muted"]],[["default"],[[[[1,"\\n        "],[1,[28,[35,2],["i18n_manage","msg-overlay/components/presence-onboarding-presenter"],null]],[1,"\\n      "]],[]]]]],[1,"\\n      "],[8,[39,3],[[16,"aria-label",[28,[37,2],["a11y_enable_active_status","msg-overlay/components/presence-onboarding-presenter"],null]],[4,[38,1],["click",[30,0,["enableActiveStatus"]]],null],[4,[38,4],["active_status_onboarding_enable"],null]],[["@size"],["1"]],[["default"],[[[[1,"\\n        "],[1,[28,[35,2],["i18n_got_it","msg-overlay/components/presence-onboarding-presenter"],null]],[1,"\\n      "]],[]]]]],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"]],[]],null]],[],false,["if","on","t","artdeco-button@artdeco-button","ember-cli-pemberly-tracking@track-interaction"]]',moduleName:"msg-overlay/components/presence-onboarding-presenter.hbs",isStrictMode:!1})
let E=(p=(0,l.inject)("global-services@a11y-notification"),g=(0,l.inject)("i18n"),b=(0,l.inject)("lego@resolver"),h=(0,l.inject)("lego@tracking"),v=(0,l.inject)("store"),y=(0,l.inject)("tracking"),f=(0,l.inject)("global-services@window"),_=class extends c.default{constructor(){super(...arguments);(0,t.default)(this,"a11yNotification",w,this);(0,t.default)(this,"i18n",C,this);(0,t.default)(this,"legoResolver",S,this);(0,t.default)(this,"legoTracking",M,this);(0,t.default)(this,"store",k,this);(0,t.default)(this,"tracking",R,this);(0,t.default)(this,"windowService",O,this);(0,t.default)(this,"showPresenceOnboardingPresenter",I,this);(0,n.default)(this,"_legoWidgetTrackingToken",void 0)
this._fetchLegoWidget().then((()=>this._fetchActiveStatusSetting())).then((e=>{this.isDestroying||("HIDDEN"===e?this._showPresenceOnboardingPresenter():this._dismissLegoWidget())}))}stopPropagation(e){e.stopPropagation()}_showPresenceOnboardingPresenter(){this.showPresenceOnboardingPresenter=!0
this.tracking.firePageViewEvent("flagship3_messaging_active_status_onboarding")
const e=this.i18n.lookupTranslation("components/msg-overlay@presence-onboarding-presenter","i18n_active_status")()
this.a11yNotification.setTextInLiveRegion(e)}_completePresenceOnboardingPresenter(){this.showPresenceOnboardingPresenter=!1
return this._enableActiveStatusSetting().then((()=>this._dismissLegoWidget()))}_fetchLegoWidget(){return this.legoResolver.fireLegoCall({pageKey:"messaging_presence",slotId:"onboarding",groupId:"onboarding_group",widgetId:"presence_onboarding"}).then((e=>{if(!e)return(0,m.reject)()
if(!this.isDestroying){this._legoWidgetTrackingToken=(0,s.get)(e,"trackingToken")
return e}}))}_dismissLegoWidget(){this.legoTracking.sendLegoAction(this._legoWidgetTrackingToken,this.legoTracking.LEGO_ACTION_DISMISS,1)}_fetchActiveStatusSetting(){return this.store.adapterFor("-ember-m3").ajax("/psettings/presence","get",{data:{asJson:!0}}).then((e=>{const t=(0,s.get)(e,"map.data.visibility")
if(!t)throw new Error("failed to get active status setting")
return t}))}_enableActiveStatusSetting(){return this.store.adapterFor("-ember-m3").ajax("/psettings/presence/update-presence-settings","post",{data:{visibility:"CONNECTIONS",csrfToken:(0,d.default)()},headers:{"x-requested-with":"XMLHttpRequest"}}).then((e=>{const t=(0,s.get)(e,"result.responseCode")
if(200!==t)throw new Error(`failed to set active status setting, responseCode: ${t}`)}))}enableActiveStatus(){this._completePresenceOnboardingPresenter()}manageActiveStatus(){this._completePresenceOnboardingPresenter().then((()=>this.windowService.open("/psettings/presence","_blank")))}},w=(0,i.default)(_.prototype,"a11yNotification",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=(0,i.default)(_.prototype,"i18n",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=(0,i.default)(_.prototype,"legoResolver",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=(0,i.default)(_.prototype,"legoTracking",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=(0,i.default)(_.prototype,"store",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=(0,i.default)(_.prototype,"tracking",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=(0,i.default)(_.prototype,"windowService",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=(0,i.default)(_.prototype,"showPresenceOnboardingPresenter",[u.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(_.prototype,"enableActiveStatus",[s.action],Object.getOwnPropertyDescriptor(_.prototype,"enableActiveStatus"),_.prototype),(0,i.default)(_.prototype,"manageActiveStatus",[s.action],Object.getOwnPropertyDescriptor(_.prototype,"manageActiveStatus"),_.prototype),_)
e.default=E;(0,a.setComponentTemplate)(D,E)}))
define("msg-overlay/components/recommendation-card-presenter",["exports","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const o=(0,n.createTemplateFactory)({id:"ZGfvNKBE",block:'[[[11,"li"],[24,0,"msg-overlay-list-bubble__convo-item msg-overlay-list-bubble__profile-item"],[4,[38,0],[[30,1]],[["routeName","currentRoute"],[[28,[37,1],[[53,"outletState"],"render.name"],null],[28,[37,1],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n  "],[11,"button"],[24,0,"msg-conversation-listitem__link msg-overlay-list-bubble__convo-item-link"],[24,"tabindex","0"],[24,4,"button"],[4,[38,3],["click",[30,2]],null],[4,[38,3],["keyup",[30,2]],[["preventDefault"],[true]]],[4,[38,4],["overlay_message_recommendation"],[["onInteract"],[[30,3]]]],[12],[1,"\\n    "],[10,0],[14,0,"msg-conversation-card msg-overlay-list-bubble__convo-card"],[12],[1,"\\n      "],[10,0],[14,0,"msg-conversation-card__presence-entity-container"],[12],[1,"\\n        "],[8,[39,5],[[24,0,"msg-conversation-card__presence-entity"]],[["@viewData","@size"],[[30,4,["EntityWithPresenceViewData"]],3]],null],[1,"\\n      "],[13],[1,"\\n      "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content msg-overlay-list-bubble__contextual-convo-card-content"],[12],[1,"\\n        "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content-wrapper"],[12],[1,"\\n          "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n            "],[10,1],[14,0,"truncate t-14 t-black"],[12],[1,"\\n              "],[1,[30,4,["suggestedRecipientName"]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n\\n          "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n            "],[10,1],[14,0,"msg-overlay-list-bubble__message-snippet m0 t-12 t-black--light t-normal block truncate"],[12],[1,"\\n              "],[1,[30,4,["suggestedRecipientOccupation"]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n\\n          "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n"],[41,[51,[30,5]],[[[41,[30,4,["suggestionReasons"]],[[[1,"                "],[10,1],[14,0,"t-12 t-black--light t-normal t-italic block truncate mt1"],[12],[1,"\\n                  "],[1,[52,[30,4,["isCurrentEmployee"]],[28,[37,8],["works_at","msg-overlay/components/recommendation-card-presenter"],[["actor"],[[30,6]]]],[52,[30,4,["isPreviousEmployee"]],[28,[37,8],["has_worked_at","msg-overlay/components/recommendation-card-presenter"],[["actor"],[[30,6]]]],[52,[30,4,["isConnectingMember"]],[28,[37,8],["knows_people_at","msg-overlay/components/recommendation-card-presenter"],[["connectionCount","actor"],[[30,4,["numSecondDegreeMembers"]],[30,6]]]]]]]],[1,"\\n                "],[13],[1,"\\n"]],[]],null]],[]],null],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],["@impressionTrackingHandler","@messageRecommendation","@interactionTrackingHandler","@viewData","@isFeedContext","@actor"],false,["ember-cli-pemberly-tracking@track-impression","get","-get-dynamic-var","on","ember-cli-pemberly-tracking@track-interaction","presence@entity-with-presence-presenter","unless","if","t"]]',moduleName:"msg-overlay/components/recommendation-card-presenter.hbs",isStrictMode:!1})
var a=(0,t.setComponentTemplate)(o,(0,i.default)())
e.default=a}))
define("msg-overlay/components/recommendation-card",["exports","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const o=(0,n.createTemplateFactory)({id:"ifgvhzW1",block:'[[[11,"li"],[24,0,"msg-overlay-list-bubble__convo-item msg-overlay-list-bubble__profile-item"],[4,[38,0],[[30,1]],[["routeName","currentRoute"],[[28,[37,1],[[53,"outletState"],"render.name"],null],[28,[37,1],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n  "],[11,"button"],[24,0,"msg-conversation-listitem__link msg-overlay-list-bubble__convo-item-link"],[24,"tabindex","0"],[24,4,"button"],[4,[38,3],["click",[30,2]],null],[4,[38,3],["keyup",[30,2]],[["preventDefault"],[true]]],[4,[38,4],["overlay_message_recommendation"],[["onInteract"],[[30,3]]]],[12],[1,"\\n    "],[10,0],[14,0,"msg-conversation-card msg-overlay-list-bubble__convo-card"],[12],[1,"\\n      "],[10,0],[14,0,"msg-conversation-card__presence-entity-container"],[12],[1,"\\n        "],[8,[39,5],[[24,0,"msg-conversation-card__presence-entity"]],[["@miniProfile","@size"],[[30,4,["miniProfile"]],3]],null],[1,"\\n      "],[13],[1,"\\n      "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content msg-overlay-list-bubble__contextual-convo-card-content"],[12],[1,"\\n        "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content-wrapper"],[12],[1,"\\n          "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n            "],[10,1],[14,0,"truncate t-14 t-black"],[12],[1,"\\n              "],[1,[28,[35,6],null,[["firstName","lastName","type"],[[30,4,["miniProfile","firstName"]],[30,4,["miniProfile","lastName"]],"full"]]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n\\n          "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n            "],[10,1],[14,0,"msg-overlay-list-bubble__message-snippet m0 t-12 t-black--light t-normal block truncate"],[12],[1,"\\n              "],[1,[30,4,["miniProfile","occupation"]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n\\n          "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n"],[41,[51,[30,5]],[[[41,[30,4,["reasons"]],[[[1,"                "],[10,1],[14,0,"t-12 t-black--light t-normal t-italic block truncate mt1"],[12],[1,"\\n                  "],[1,[52,[30,4,["isCurrentEmployee"]],[28,[37,9],["works_at","msg-overlay/components/recommendation-card"],[["actor"],[[30,6]]]],[52,[30,4,["isPreviousEmployee"]],[28,[37,9],["has_worked_at","msg-overlay/components/recommendation-card"],[["actor"],[[30,6]]]],[52,[30,4,["isConnectingMember"]],[28,[37,9],["knows_people_at","msg-overlay/components/recommendation-card"],[["connectionCount","actor"],[[30,4,["suggestionReason","numSecondDegreeMembers"]],[30,6]]]]]]]],[1,"\\n                "],[13],[1,"\\n"]],[]],null]],[]],null],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],["@impressionTrackingHandler","@messageRecommendation","@interactionTrackingHandler","@suggestion","@isFeedContext","@actor"],false,["ember-cli-pemberly-tracking@track-impression","get","-get-dynamic-var","on","ember-cli-pemberly-tracking@track-interaction","presence@entity-with-presence","ember-cli-pemberly-i18n@format-name","unless","if","t"]]',moduleName:"msg-overlay/components/recommendation-card.hbs",isStrictMode:!1})
var a=(0,t.setComponentTemplate)(o,(0,i.default)())
e.default=a}))
define("msg-overlay/components/search-connection-item",["exports","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const o=(0,n.createTemplateFactory)({id:"BZsCuFn7",block:'[[[11,0],[24,0,"display-flex align-items-center"],[24,"tabindex","-1"],[17,1],[4,[38,0],["mousemove",[30,2]],null],[4,[38,0],["click",[30,3]],null],[12],[1,"\\n  "],[10,0],[14,0,"msg-overlay-search-result-picture circle display-flex flex-shrink-zero"],[12],[1,"\\n    "],[8,[39,1],null,[["@classNames","@image","@alt","@ghostType","@desiredWidth"],["msg-overlay-search-result-picture__background-img full-width full-height round",[30,4,["picture"]],[28,[37,2],["i18n_fullname","msg-overlay/components/search-connection-item"],[["name"],[[28,[37,3],[[30,4]],null]]]],"person",100]],null],[1,"\\n  "],[13],[1,"\\n\\n  "],[10,0],[14,0,"display-flex overflow-hidden pv1 pl2"],[12],[1,"\\n    "],[10,"h4"],[14,0,"msg-overlay-search-result-name t-12 t-black t-bold flex-shrink-zero truncate"],[12],[1,"\\n      "],[1,[28,[35,2],["i18n_fullname","msg-overlay/components/search-connection-item"],[["name"],[[28,[37,3],[[30,4]],null]]]]],[1,"\\n    "],[13],[1,"\\n"],[41,[30,5],[[[1,"      "],[10,1],[14,0,"t-12 t-black--light t-normal flex-shrink-zero ph1 truncate"],[12],[1,"\\n        "],[1,[28,[35,2],["dot","msg-overlay/components/search-connection-item"],null]],[1,"\\n      "],[13],[1,"\\n      "],[10,2],[14,0,"t-12 t-black--light t-normal truncate"],[12],[1,"\\n        "],[1,[30,5]],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"  "],[13],[1,"\\n"],[13]],["&attrs","@onMouseMove","@onClick","@profile","@caption"],false,["on","ember-vector-images@lazy-image","t","global-helpers@name","if"]]',moduleName:"msg-overlay/components/search-connection-item.hbs",isStrictMode:!1})
var a=(0,t.setComponentTemplate)(o,(0,i.default)())
e.default=a}))
define("msg-overlay/config/environment",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
let t
try{const e="msg-overlay/config/environment",n=document.querySelector('meta[name="'+e+'"]').getAttribute("content")
t=JSON.parse(unescape(n))}catch(e){t={sparkPlaceholders:{includeHashes:["assets/media-player.amd.js"]}}}var n=t
e.default=n}))
define("msg-overlay/engine",["exports","@babel/runtime/helpers/esm/defineProperty","extended/resolver","ember-engines/engine","ember-load-initializers"],(function(e,t,n,i,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const a="msg-overlay"
class r extends i.default{constructor(){super(...arguments);(0,t.default)(this,"modulePrefix",a);(0,t.default)(this,"Resolver",n.default)}}(0,o.default)(r,a)
var s=r
e.default=s}))
define.alias("ember-number-formatting/helpers/abbreviate-number","msg-overlay/helpers/abbreviate-number")
define.alias("ember-truth-helpers/helpers/and","msg-overlay/helpers/and")
define.alias("artdeco-datepicker/helpers/artdeco-adjust-date-for-timezone","msg-overlay/helpers/artdeco-adjust-date-for-timezone")
define.alias("artdeco-datepicker/helpers/artdeco-is-between-dates","msg-overlay/helpers/artdeco-is-between-dates")
define.alias("artdeco-datepicker/helpers/cal-dates-equal","msg-overlay/helpers/cal-dates-equal")
define.alias("ember-element-helper/helpers/element","msg-overlay/helpers/element")
define.alias("ember-holy-futuristic-template-namespacing-batman/helpers/-translate-dynamic-2","msg-overlay/helpers/ember-holy-futuristic-template-namespacing-batman-translate-dynamic-2")
define("msg-overlay/helpers/ensure-safe-component",["exports","@embroider/util"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.EnsureSafeComponentHelper}})}))
define.alias("ember-truth-helpers/helpers/equal","msg-overlay/helpers/eq")
define.alias("ember-cli-pemberly-i18n/helpers/format-number","msg-overlay/helpers/format-number")
define.alias("ember-semaphore/helpers/format-title","msg-overlay/helpers/format-title")
define.alias("ember-truth-helpers/helpers/gt","msg-overlay/helpers/gt")
define.alias("ember-truth-helpers/helpers/gte","msg-overlay/helpers/gte")
define.alias("ember-truth-helpers/helpers/is-array","msg-overlay/helpers/is-array")
define.alias("ember-truth-helpers/helpers/is-empty","msg-overlay/helpers/is-empty")
define.alias("ember-truth-helpers/helpers/is-equal","msg-overlay/helpers/is-equal")
define.alias("artdeco-icons-web/helpers/li-icon","msg-overlay/helpers/li-icon")
define.alias("ember-number-formatting/helpers/localized-format-currency","msg-overlay/helpers/localized-format-currency")
define.alias("ember-number-formatting/helpers/localized-format-number","msg-overlay/helpers/localized-format-number")
define.alias("ember-truth-helpers/helpers/lt","msg-overlay/helpers/lt")
define.alias("ember-truth-helpers/helpers/lte","msg-overlay/helpers/lte")
define.alias("ember-media-player/helpers/media-action-autoplay","msg-overlay/helpers/media-action-autoplay")
define.alias("ember-media-player/helpers/media-action-seekto","msg-overlay/helpers/media-action-seekto")
define.alias("ember-truth-helpers/helpers/not-equal","msg-overlay/helpers/not-eq")
define.alias("ember-truth-helpers/helpers/not","msg-overlay/helpers/not")
define.alias("ember-truth-helpers/helpers/or","msg-overlay/helpers/or")
define.alias("ember-set-helper/helpers/set","msg-overlay/helpers/set")
define.alias("ember-cli-pemberly-i18n/helpers/t","msg-overlay/helpers/t")
define.alias("ember-cli-pemberly-litms/helpers/tag-manager-test-helper","msg-overlay/helpers/tag-manager-test-helper")
define.alias("ember-number-formatting/helpers/trim-fractional-numbers","msg-overlay/helpers/trim-fractional-numbers")
define.alias("ember-truth-helpers/helpers/xor","msg-overlay/helpers/xor")
define("msg-overlay/initializers/artdeco",["exports","artdeco-eyeglass"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
e.initialize=o
const n=[t.default.contextClasses,t.default.floatingLabel,t.default.focusOutline]
function i(e,t){const i=e[t]
e[t]=function(){n.forEach((e=>e&&"function"==typeof e.teardown&&e.teardown()))
i&&"function"==typeof i&&i.call(e)}}function o(e){if("undefined"!=typeof document){n.forEach((e=>e.install()))
"function"==typeof e.willDestroy?i(e,"willDestroy"):"function"==typeof e.destroy&&i(e,"destroy")}}var a={name:"artdeco",initialize:o}
e.default=a}))
define("msg-overlay/initializers/ember-faker",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
e.initialize=t
function t(){}var n={name:"ember-faker",initialize:t}
e.default=n}))
define("msg-overlay/initializers/icons",["exports","artdeco-icons-web/src/icons","msg-overlay/config/environment"],(function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
function i(e){throw e}var o={name:"icons",initialize:function(){const{environment:e,APP:o}=n.default
let a,r
o&&({artdecoCustomSpriteUrl:a,artdecoCustomSpriteName:r}=o)
const s="test"!==e
t.default.load(s,a,r).catch(i)}}
e.default=o}))
define.alias("ember-m3/initializers/m3-store","msg-overlay/initializers/m3-store")
define.alias("artdeco-datepicker/modifiers/artdeco-calendar-click-watcher","msg-overlay/modifiers/artdeco-calendar-click-watcher")
define.alias("@ember/render-modifiers/modifiers/did-insert","msg-overlay/modifiers/did-insert")
define.alias("@ember/render-modifiers/modifiers/did-update","msg-overlay/modifiers/did-update")
define.alias("ember-prop-modifier","msg-overlay/modifiers/prop")
define.alias("ember-ref-modifier/modifiers/ref","msg-overlay/modifiers/ref")
define.alias("@ember/render-modifiers/modifiers/will-destroy","msg-overlay/modifiers/will-destroy")
define.alias("@embroider/util/services/ensure-registered","msg-overlay/services/-ensure-registered")
define.alias("artdeco-hoverables/services/artdeco-hoverable","msg-overlay/services/artdeco-hoverable")
define.alias("artdeco-modal/services/artdeco-modal","msg-overlay/services/artdeco-modal")
define.alias("artdeco-toast/services/artdeco-toast","msg-overlay/services/artdeco-toast")
define.alias("client-sensor-web/services/client-sensor","msg-overlay/services/client-sensor")
define.alias("ember-date-service/services/date","msg-overlay/services/date")
define.alias("@linkedin/ember-restli-graphql/services/graphql","msg-overlay/services/graphql")
define.alias("@linkedin/ember-pem/services/internal-event-utils","msg-overlay/services/internal-event-utils")
define.alias("@linkedin/ember-pem/services/internal-pem-tracking","msg-overlay/services/internal-pem-tracking")
define.alias("ember-m3/services/m3-schema-manager","msg-overlay/services/m3-schema-manager")
define.alias("ember-media-player/services/media-player","msg-overlay/services/media-player")
define.alias("ember-number-formatting/services/number-formatter","msg-overlay/services/number-formatter")
define.alias("ember-number-formatting/services/number-locale","msg-overlay/services/number-locale")
define.alias("@linkedin/ember-pem/services/pem-tracking","msg-overlay/services/pem-tracking")
define.alias("persistent-toast-manager/services/persistent-toast-manager","msg-overlay/services/persistent-toast-manager")
define.alias("ember-media-player/services/static-asset-loader","msg-overlay/services/static-asset-loader")
define.alias("ember-cli-pemberly-m3/services/store","msg-overlay/services/store")
define.alias("ember-cli-pemberly-litms/services/tag-manager","msg-overlay/services/tag-manager")
define.alias("ember-cli-pemberly-litms/services/tracking-adapter-for-tag-manager","msg-overlay/services/tracking-adapter-for-tag-manager")
define.alias("ember-singularity/services/unified-event-handler","msg-overlay/services/unified-event-handler")
define("msg-overlay/templates/application",["exports","@ember/template-factory"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var n=(0,t.createTemplateFactory)({id:"NzqRJWV7",block:'[[[8,[39,0],null,null,null]],[],false,["msg-overlay@messaging-overlay-container"]]',moduleName:"msg-overlay/templates/application.hbs",isStrictMode:!1})
e.default=n}))
define.alias("artdeco-datepicker/templates/components/artdeco-calendar","msg-overlay/templates/components/artdeco-calendar")
define.alias("artdeco-datepicker/templates/components/artdeco-datepicker-embedded-cal","msg-overlay/templates/components/artdeco-datepicker-embedded-cal")
define.alias("artdeco-datepicker/templates/components/artdeco-datepicker","msg-overlay/templates/components/artdeco-datepicker")
define.alias("artdeco-datepicker/templates/components/artdeco-daterange-embedded-cal","msg-overlay/templates/components/artdeco-daterange-embedded-cal")
define.alias("artdeco-datepicker/templates/components/artdeco-daterange","msg-overlay/templates/components/artdeco-daterange")
define.alias("client-sensor-web/utils/helpers","msg-overlay/utils/helpers")
define("msg-overlay/utils/recommendation-helpers",["exports","msg-shared/utils/constants"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.USECASE_PARTIAL_LOOKUP=void 0
e.normalizeUsecase=function(e,t){return`${r[e]}_${t?"FULL":"SHORT"}`}
const{CONTEXT_TYPES:{FEED_CONTEXT:n,JOB_CONTEXT:i,COMPANY_CONTEXT:o,PROFILE_CONTEXT:a}}=t.OVERLAY,r={[n]:"ARTICLE_SHARE_OVERLAY",[i]:"OVERLAY_JOB",[o]:"OVERLAY_COMPANY",[a]:"OVERLAY_PROFILE"}
e.USECASE_PARTIAL_LOOKUP=r}))
define.alias("ember-vector-images/utils/vector-url","msg-overlay/utils/vector-url")
define("msg-overlay/viewdata/contextual-recommendation-list-viewdata",["exports","msg-overlay/viewdata/recommendation-card-viewdata","msg-facepile-grid/viewdata/facepile-viewdata","@ember/object","msg-data/viewdata"],(function(e,t,n,i,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class a extends o.default{get requiredProps(){return["suggestedRecipients","formatter"]}get suggestedRecipientsLength(){var e
return null===(e=this.props.suggestedRecipients)||void 0===e?void 0:e.length}get recommendationCardViewDataItems(){return this.props.suggestedRecipients.map((e=>new t.default({suggestion:e,formatter:this.props.formatter})))}_previewMutualConnections(){const e=[],{suggestedRecipients:t}=this.props
t.length&&e.push((0,i.get)(t[0],"suggestedRecipientProfile"))
t.length>1&&e.push((0,i.get)(t[1],"suggestedRecipientProfile"))
return e}get mutualConnectionNames(){return this._previewMutualConnections().map((e=>(0,i.getProperties)((0,i.get)(e,"miniProfile"),"firstName","lastName")))}get hasMoreSuggestedRecipients(){return this.suggestedRecipientsLength>2}get firstMutualConnectionName(){return this.mutualConnectionNames[0]}get secondMutualConnectionName(){return this.mutualConnectionNames[1]}get facepileViewData(){return new n.default({participants:this._previewMutualConnections(),isGroupChat:!1,formatter:this.props.formatter})}}e.default=a}))
define("msg-overlay/viewdata/conversation-bubble-header-controls-viewdata",["exports","msg-data/viewdata","@ember/object","msg-ui/viewdata/virtual-meeting-cta-viewdata","msg-shared-modals/viewdata/conversation-header-dropdown-menu-viewdata","msg-shared/utils/view-data-helpers"],(function(e,t,n,i,o,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const r=["conversation","authenticatedUserProfile","msgDataManager","i18n","formatter"]
class s extends t.default{get requiredProps(){return r}get latestMessage(){const{conversation:e,msgDataManager:t}=this.props
return e&&(0,a.getLatestMessage)(e,t)}get conversationName(){const{conversation:e}=this.props
return e?(0,n.get)(this.props.conversation,"name"):void 0}get participantNames(){const{conversation:e}=this.props
if(e){const t=(0,n.get)(e,"participants")
return(0,a.getParticipantNames)(t,this.latestMessage)}}get virtualMeetingCtaViewData(){const{conversation:e,authenticatedUserProfile:t,msgDataManager:n}=this.props
return void 0!==e?new i.default({conversation:e,authenticatedUserProfile:t,msgDataManager:n}):{}}get conversationHeaderDropdownMenuViewData(){const{conversation:e,msgDataManager:t,authenticatedUserProfile:n,i18n:i,formatter:a}=this.props
return new o.default({conversation:e,authenticatedUserProfile:n,msgDataManager:t,i18n:i,formatter:a})}}e.default=s}))
define("msg-overlay/viewdata/conversation-bubble-header-viewdata",["exports","@ember/object","global-helpers/helpers/urn-to-id","msg-shared/helpers/get-total-participants-count","msg-shared/helpers/participant-names-with-self","msg-shared/helpers/get-recipient-profile-id","msg-ui/viewdata/conversation-entity-viewdata","msg-overlay/viewdata/conversation-bubble-header-controls-viewdata","msg-data/viewdata","msg-shared/utils/view-data-helpers"],(function(e,t,n,i,o,a,r,s,l,c){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const u=["conversation","messageRecipients","headerReactionNotification","authenticatedUserProfile","formatter","i18n","msgDataManager"],d="components/msg-overlay@conversation-bubble-header-feature"
class m extends l.default{get requiredProps(){return u}get shouldShowHeader(){const{conversation:e}=this.props
return void 0!==e}get participants(){const{conversation:e}=this.props
return e?(0,t.get)(e,"participants"):null}get hasParticipants(){return null!==this.participants}get isGroupChat(){const{conversation:e}=this.props
return!!e&&(0,t.get)(e,"groupChat")}get conversationName(){const{conversation:e}=this.props
return e?(0,t.get)(e,"name"):null}get latestEvent(){const{conversation:e,msgDataManager:t}=this.props
return e&&(0,c.getLatestMessage)(e,t)}get messageRecipient(){const{messageRecipients:e}=this.props
return e?(0,t.get)(e,"firstObject"):void 0}get messageRecipientId(){const{messageRecipient:e}=this
return e?(0,t.get)(e,"publicIdentifier"):""}get messageRecipientFirstName(){const{messageRecipient:e}=this
return e?(0,t.get)(e,"firstName"):null}get messageRecipientLastName(){const{messageRecipient:e}=this
return e?(0,t.get)(e,"lastName"):null}get messageRecipientProfile(){const{participants:e}=this
return e?(0,t.get)(e,"firstObject.miniProfile"):void 0}get messageRecipientProfileId(){const{messageRecipientProfile:e}=this
return e?(0,t.get)(e,"publicIdentifier"):null}get isCompanyRecipient(){const{latestEvent:e,participants:n}=this
return!(!n||void 0===(0,t.get)(n,"firstObject.miniCompany"))||!!(0,c.isConversationWithAdvertiser)(e)}get participantNames(){const{conversation:e}=this.props
if(e){const n=(0,t.get)(e,"participants")
return(0,c.getParticipantNames)(n,this.latestEvent)}}get participantNamesWithSelf(){const{authenticatedUserProfile:e,conversation:t,i18n:n}=this.props
return(0,o.participantNamesWithSelf)(t,e,!0,n)}get recipientProfileId(){const{conversation:e}=this.props
return(0,a.getRecipientProfileId)(e)}get companyRecipientId(){const{participants:e}=this
return e&&void 0!==(0,t.get)(e,"firstObject.miniCompany")?(0,n.urnToId)([(0,t.get)(e,"firstObject.miniCompany.entityUrn")]):null}get reactorFirstName(){const{headerReactionNotification:e}=this.props,n=(0,t.get)(e,"reactor")
return n?(0,t.get)(n,"firstName"):null}get reactorLastName(){const{headerReactionNotification:e}=this.props,n=(0,t.get)(e,"reactor")
return n?(0,t.get)(n,"lastName"):null}get reactorEmoji(){const{headerReactionNotification:e}=this.props
return(0,t.get)(e,"emoji")}get hasPresenceInformation(){const{conversation:e}=this.props,{latestEvent:n}=this
return!(!e||!n)&&(!(0,t.get)(e,"groupChat")&&"MEMBER_TO_MEMBER"===(0,t.get)(n,"subtype")&&!(0,t.get)(e,"withNonConnection"))}get existingGroupParticipantsTitle(){const{conversation:e,authenticatedUserProfile:n,i18n:a}=this.props
if(!e)return null
const{participants:r}=this
let s
s=(0,t.get)(e,"name")?(0,t.get)(r,"length")?a.lookupTranslation(d,"i18n_participant_familiar")([{names:(0,o.participantNamesWithSelf)(e,n,!0,a)}]):a.lookupTranslation(d,"i18n_just_you")():a.lookupTranslation(d,"i18n_num_participants_in_group_conversation")([{count:(0,i.getTotalParticipantsCount)(e)}])
return s}get conversationEntityViewData(){const{latestEvent:e}=this,{authenticatedUserProfile:t,conversation:n,formatter:i}=this.props
if(e)return new r.default({conversation:n,latestEvent:e,authenticatedUserMiniProfile:t,formatter:i})}get conversationBubbleHeaderControlsViewData(){const{conversation:e,msgDataManager:t,authenticatedUserProfile:n,i18n:i,formatter:o}=this.props
return new s.default({conversation:e,authenticatedUserProfile:n,msgDataManager:t,i18n:i,formatter:o})}}e.default=m}))
define("msg-overlay/viewdata/list-bubble-viewdata",["exports","msg-data/viewdata","msg-overlay/viewdata/contextual-recommendation-list-viewdata","presence/viewdata/entity-with-presence-viewdata"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class o extends t.default{get requiredProps(){return["suggestedRecipients","formatter","authenticatedUserProfile"]}get contextualRecommendationListViewData(){return new n.default({suggestedRecipients:this.props.suggestedRecipients,formatter:this.props.formatter})}get entityWithPresenceViewData(){const{authenticatedUserProfile:e,formatter:t}=this.props
return new i.default({profile:e,altText:t.formatName(e,"full")})}}e.default=o}))
define("msg-overlay/viewdata/overlay-search-viewdata",["exports","@babel/runtime/helpers/esm/applyDecoratedDescriptor","msg-data/viewdata","msg-ui/viewdata/conversation-list-item-viewdata","msg-typeahead/viewdata/possible-recipient-viewdata","tracked-toolbox"],(function(e,t,n,i,o,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var r
let s=(r=class extends n.default{get requiredProps(){return["matchedConnections","matchedConversations","i18n","authenticatedUserMiniProfile","dateService","formatter","msgDataManager"]}get conversationListItemViewDataElements(){const{msgDataManager:e,formatter:t,i18n:n,authenticatedUserMiniProfile:o,dateService:a,matchedConversations:r}=this.props
return r.map((r=>new i.default({conversation:r,authenticatedUserMiniProfile:o,msgDataManager:e,nowTimestamp:a.now(),formatter:t,i18n:n})))}get connectionSearchResultViewDataElements(){const{formatter:e,matchedConnections:t}=this.props
return t.map((t=>new o.default({possibleRecipient:t,formatter:e})))}},(0,t.default)(r.prototype,"conversationListItemViewDataElements",[a.cached],Object.getOwnPropertyDescriptor(r.prototype,"conversationListItemViewDataElements"),r.prototype),(0,t.default)(r.prototype,"connectionSearchResultViewDataElements",[a.cached],Object.getOwnPropertyDescriptor(r.prototype,"connectionSearchResultViewDataElements"),r.prototype),r)
e.default=s}))
define("msg-overlay/viewdata/recommendation-card-viewdata",["exports","@ember/object","msg-data/viewdata","presence/viewdata/entity-with-presence-viewdata"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class o extends n.default{get requiredProps(){return["suggestion","formatter"]}get recipientProfile(){return(0,t.get)(this.props.suggestion,"suggestedRecipientProfile.miniProfile")}get suggestedRecipientName(){return this.props.formatter.formatName(this.recipientProfile,"full")}get EntityWithPresenceViewData(){return new i.default({altText:this.suggestedRecipientName,profile:this.recipientProfile})}get suggestedRecipientOccupation(){const{recipientProfile:e}=this
return e&&(0,t.get)(e,"occupation")}get suggestionReasons(){return(0,t.get)(this.props.suggestion,"reasons")}get reasonType(){return(0,t.get)(this.suggestionReasons,"firstObject.$type")}get isCurrentEmployee(){return"com.linkedin.voyager.messaging.peripheral.recipientsuggestions.reasons.CurrentEmployee"===this.reasonType}get isPreviousEmployee(){return"com.linkedin.voyager.messaging.peripheral.recipientsuggestions.reasons.PreviousEmployee"===this.reasonType}get isConnectingMember(){return"com.linkedin.voyager.messaging.peripheral.recipientsuggestions.reasons.ConnectingMember"===this.reasonType}get numSecondDegreeMembers(){return(0,t.get)(this.suggestionReasons,"firstObject.numSecondDegreeMembers")}get trackingId(){return(0,t.get)(this.props.suggestion,"trackingId")}get profileObjectUrn(){const{recipientProfile:e}=this
return e&&(0,t.get)(e,"objectUrn")}}e.default=o}))
define("msg-overlay/viewdata/sdk-conversation-bubble-header-controls-viewdata",["exports","msg-data/viewdata","msg-shared-modals/viewdata/sdk-conversation-header-dropdown-menu-viewdata"],(function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const i=["conversation","participants","i18n","formatter","authenticatedUserProfile"]
class o extends t.default{get requiredProps(){return i}get conversationName(){return this.props.conversation.title}get participantNames(){return this.props.participants.map((e=>({firstName:null==e?void 0:e.firstName,lastName:null==e?void 0:e.lastName,maidenName:null==e?void 0:e.maidenName})))}get virtualMeetingCtaViewData(){}get conversationHeaderDropdownMenuViewData(){return new n.default({conversation:this.props.conversation,authenticatedUserProfile:this.props.authenticatedUserProfile,participants:this.props.participants,i18n:this.props.i18n,formatter:this.props.formatter})}}e.default=o}))
define("msg-overlay/viewdata/sdk-conversation-bubble-header-viewdata",["exports","@ember/object","global-helpers/helpers/urn-to-id","msg-data/viewdata","msg-shared/utils/view-data-helpers","msg-shared/helpers/is-company-profile","msg-shared/utils/sdk-view-data-helpers","urn-utils","msg-ui/viewdata/sdk-conversation-entity-viewdata","msg-overlay/viewdata/sdk-conversation-bubble-header-controls-viewdata"],(function(e,t,n,i,o,a,r,s,l,c){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const u=["conversation","participantStateMap","messageRecipients","headerReactionNotification","authenticatedUserProfile","formatter","i18n","msgDataManager"],d="components/msg-overlay@conversation-bubble-header-feature"
class m extends i.default{get requiredProps(){return u}get shouldShowHeader(){const{conversation:e}=this.props
return void 0!==e}get participants(){const{conversation:e}=this.props
return e?e.participants.map((e=>this.props.participantStateMap[e])):null}get hasParticipants(){return null!==this.participants}get isGroupChat(){const{conversation:e}=this.props
return!!e&&this.participants.length>2}get conversationName(){const{conversation:e}=this.props
return e?e.title:null}get latestEvent(){const{conversation:e,msgDataManager:t}=this.props
return e&&(0,r.getLatestMessage)(e,t)}get messageRecipient(){const{messageRecipients:e,authenticatedUserProfile:t}=this.props
return e?(0,r.getNonSelfParticipants)(e,t)[0]:void 0}get messageRecipientId(){const{messageRecipient:e}=this
return e?e.publicIdentifier:""}get messageRecipientFirstName(){const{messageRecipient:e}=this
return e?e.firstName:null}get messageRecipientLastName(){const{messageRecipient:e}=this
return e?e.lastName:null}get messageRecipientProfile(){const{participants:e}=this
return e?e[0]:void 0}get messageRecipientProfileId(){const{messageRecipientProfile:e}=this
return e?(0,t.get)(e,"publicIdentifier"):null}get isCompanyRecipient(){const{latestEvent:e,participants:t}=this
return!(!t||!(0,a.isCompanyProfile)(t[0]))||!!(0,o.isConversationWithAdvertiser)(e)}get participantNames(){const{conversation:e}=this.props
if(e)return this._getNonSelfParticipantNames()}_getNonSelfParticipantNames(){return(0,r.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile).map((e=>({firstName:null==e?void 0:e.firstName,lastName:null==e?void 0:e.lastName,maidenName:null==e?void 0:e.maidenName})))}get participantNamesWithSelf(){return this.participants}get recipientProfileId(){const e=(0,r.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile)
return e?(0,s.extractEntityInfoFromUrn)(e[0].hostIdentityUrn).id:null}get companyRecipientId(){var e
const{participants:t}=this
return t&&void 0!==(null===(e=t[0])||void 0===e?void 0:e.entityUrn)?(0,n.urnToId)(t[0].entityUrn):null}get reactorFirstName(){const{headerReactionNotification:e}=this.props,{reactor:t}=e
return t?t.firstName:null}get reactorLastName(){const{headerReactionNotification:e}=this.props,n=(0,t.get)(e,"reactor")
return n?(0,t.get)(n,"lastName"):null}get reactorEmoji(){const{headerReactionNotification:e}=this.props
return(0,t.get)(e,"emoji")}get hasPresenceInformation(){const{conversation:e}=this.props,{latestEvent:n}=this
return!(!e||!n)&&(!this.isGroupChat&&"MEMBER_TO_MEMBER"===(0,t.get)(n,"subtype")&&!1)}get existingGroupParticipantsTitle(){const{conversation:e,i18n:t}=this.props
if(!e)return null
const{participants:n}=this
let i
i=e.title?1===n.length?t.lookupTranslation(d,"i18n_just_you")():t.lookupTranslation(d,"i18n_participant_familiar")([{names:this.participants}]):t.lookupTranslation(d,"i18n_num_participants_in_group_conversation")([{count:this._getNonSelfParticipantNames().length}])
return i}get conversationEntityViewData(){const{conversation:e,formatter:t,authenticatedUserProfile:n}=this.props
return new l.default({conversation:e,participants:this.participants,latestMessage:this.latestEvent,authenticatedUserMiniProfile:n,formatter:t})}get conversationBubbleHeaderControlsViewData(){return new c.default({conversation:this.props.conversation,participants:this.participants,i18n:this.props.i18n,formatter:this.props.formatter,authenticatedUserProfile:this.props.authenticatedUserProfile})}}e.default=m}))

//# sourceMappingURL=engine.map